import{S as Me,P as be,W as ve,a as ze,D as Pe,B as V,M as B,b as l,c as $,L as Ie,G as b,C as z,T as Z,O as k,d as H,e as K,E as R,V as y,f as Se,g as ae,h as Y,i as J,j as Q,k as ke,l as Le,H as Ge,A as Te,m as Ce,n as Ee}from"./vendor.7cf6ec24.js";const _e=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}};_e();let re=(u,n,o=1/0)=>Math.min(Math.max(u,n),o);const C={lightGreen:10335764,darkGreen:5876775,lightBrown:16767913,darkBronw:13669759,darkGrey:7496554,darkMetal:7496554,lightMetal:14465972,white:16645367,wood:10972695,brick:14070926,roof:7942486,sky:8435420,red:16711680,rust:12158069,water:8435420,balloon:14277081,glass:15658734};function Be(){return new Me}function Fe(u,n){let o=u/n;const t=50,e=1,i=3500;let s=new be(t,o,e,i);return s.position.set(0,-350,2150),s.rotation.set(.2,.036,0),s}let He=u=>ze.isWebGL2Available()?u.getContext("webgl2"):u.getContext("webgl")||u.getContext("experimental-webgl"),Re=({canvas:u,W:n,H:o,dpr:t=window.devicePixelRatio,antialias:e=!0})=>{let i=new ve({canvas:u,context:He(u),antialias:e,alpha:!0,powerPreference:"high-performance"});return i.setSize(n,o),i.setPixelRatio(t),i.shadowMap.enabled=!0,i};function We(){let u=new Pe(16777215,.75);return u.position.set(-280,695,350),u.castShadow=!0,u.shadow.camera.left=-800,u.shadow.camera.right=800,u.shadow.camera.top=800,u.shadow.camera.bottom=-800,u.shadow.camera.near=1,u.shadow.camera.far=1500,u.shadow.mapSize.width=512,u.shadow.mapSize.height=512,u}class S{constructor(n=[100,100,100],o={x:0,y:0,z:0},t=null,e=`cube-${~~(Math.random()*1e3)}`){this.width=n[0],this.height=n[1],this.depth=n[2],this.color=t,this.geometry=new V(this.width,this.height,this.depth),this.material,this.color?this.material=new B({color:this.color,flatShading:!0}):this.material=null,this.mesh=new l(this.geometry,this.material),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.position.x+=o.x,this.mesh.position.y+=o.y,this.mesh.position.z+=o.z,this.mesh.name=e,this.mesh.updateMatrix()}}const g={wood:new B({color:C.wood,flatShading:!0}),green:new B({color:C.darkGreen,flatShading:!0}),darkMetal:new B({color:C.darkMetal,specular:328965,shininess:100}),lightMetal:new B({color:C.lightMetal,side:$,specular:328965,shininess:100}),glass:new B({color:C.glass,side:$,transparent:!0,opacity:.5,specular:328965,shininess:1e4}),rust:new B({color:C.rust,side:$,specular:328965,shininess:100}),brick:new B({color:C.brick,flatShading:!0}),roof:new B({color:C.roof,flatShading:!0}),white:new B({color:C.white,flatShading:!0}),red:new B({color:C.red,flatShading:!0}),balloon:new B({color:C.balloon,flatShading:!0,side:$}),line:new Ie({color:C.lightMetal,linewidth:1}),water:new B({color:C.water,flatShading:!0,specular:328965,shininess:1e3,transparent:!0,opacity:.8}),override:new B({color:14464896,wireframe:!0})};class ee{constructor(n=1,o=!0,t=!0,e=35,i=16,s=!1){const r=new b;this.radius=e,this.segmentsCount=i;const a=s?g.lightMetal:null,h=new l(new z(e,e,24*n,16,1,!0));if(h.rotation.y=2*Math.PI/80,h.updateMatrix(),r.merge(h.geometry,h.matrix),o){const c=new l(new Z(e,6,10,16,2*Math.PI));c.position.y=12*n,c.rotation.x=Math.PI/2,c.updateMatrix(),r.merge(c.geometry,c.matrix)}if(t){const c=new l(new Z(e,6,10,16,2*Math.PI));c.position.y=-12*n,c.rotation.x=Math.PI/2,c.updateMatrix(),r.merge(c.geometry,c.matrix)}const d=new z(2,2,24*n,3,1,!0);for(let c=0;c<this.segmentsCount;c++){const m=new l(d);m.position.set(e*Math.cos(c*(2*Math.PI)/this.segmentsCount),0,e*Math.sin(c*(2*Math.PI)/this.segmentsCount)),m.updateMatrix(),r.merge(m.geometry,m.matrix)}this.mesh=new l(r,a),this.mesh.name="pipe-connection"}}class te{constructor(n=!0,o=!0){this.mesh=new k,this.mesh.name="pipe-corner";const t=new b,e=35,i=new Z(2*e,e,16,16,Math.PI/2),s=new l(i);if(s.rotation.z=Math.PI/2,s.updateMatrix(),t.merge(s.geometry,s.matrix),o){const a=new ee().mesh;a.rotation.z+=Math.PI/2,a.position.y+=2*e,a.updateMatrix(),t.merge(a.geometry,a.matrix)}if(n){const a=new ee().mesh;a.position.x-=2*e,a.updateMatrix(),t.merge(a.geometry,a.matrix)}const r=new l(t,g.lightMetal);r.castShadow=!0,r.receiveShadow=!0,this.mesh=r}}class he{constructor(){const n=new H;n.moveTo(0,0),n.absarc(0,0,12,0,Math.PI*2);const o=new K;o.moveTo(0,0),o.absarc(0,0,10,0,Math.PI*2),n.holes.push(o);const t={curveSegments:8,steps:1,depth:1,bevelEnabled:!1},e=new R(n,t);this.mesh=new l(e,g.rust),this.mesh.rotation.x+=Math.PI/2,this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.name="chimney"}}class Oe{constructor(n=!1){this.mesh=new k,this.mesh.name="fence";const o=90,t=(400-10)/3,e=o-20,i=Math.atan(e/t),s=new b,r=new l(new V(5,o,5));if(s.merge(r.geometry,r.matrix),n){const p=r.clone();p.position.z+=t,p.updateMatrix(),s.merge(p.geometry,p.matrix)}const a=new l(new V(2,2,t));a.position.set(0,e/2-10,t/2),a.updateMatrix(),s.merge(a.geometry,a.matrix);const h=new l(s,g.darkMetal);h.name="pillars",h.castShadow=!0,h.receiveShadow=!0;const d=new b;for(let p=0;p<t/2;p++)d.vertices.push(new y(10*Math.cos(p),10*Math.sin(p),2*p));const c=new Se(d,g.line);c.name="helix",c.castShadow=!0,c.receiveShadow=!0,c.position.set(-5,40,0);const m=new b,I=t/5;for(let p=0;p<t;p+=I){const x=t-p;m.vertices.push(new y(0,0,p)),m.vertices.push(new y(0,x*Math.tan(i),t))}for(let p=t;p>0;p-=I){const x=t-p;m.vertices.push(new y(0,e,x)),m.vertices.push(new y(0,e-x*Math.tan(i),0))}for(let p=0;p<t;p+=I){const x=t-p;m.vertices.push(new y(0,0,x)),m.vertices.push(new y(0,x*Math.tan(i),0))}for(let p=0;p<t;p+=I){const x=t-p;m.vertices.push(new y(0,e,p)),m.vertices.push(new y(0,e-x*Math.tan(i),t))}const w=new ae(m,g.line);w.position.y-=o/2,w.castShadow=!0,w.receiveShadow=!0,w.name="grid",this.mesh.add(h,c,w)}}class Ae{constructor(){this.mesh=new k,this.mesh.name="filter";const n=new b,o=new l(new V(5,30,390)),t=o.clone();t.position.x-=100,t.updateMatrix(),n.merge(o.geometry,o.matrix),n.merge(t.geometry,t.matrix);const e=new l(n,g.rust);e.castShadow=!0,e.receiveShadow=!0;const i=new b;for(let r=0;r<4;r++){let a=r*4;i.vertices.push(new y(0,a,-40)),i.vertices.push(new y(-100,a,-40))}const s=new ae(i,g.line);s.castShadow=!0,s.receiveShadow=!0,this.mesh.add(e,s)}}class De{constructor(){this.mesh=new k,this.mesh.name="bottom-island",this.mesh.add(new S([400,400,400],{x:0,y:0,z:0},C.darkGrey).mesh),this.mesh.position.set(0,-400,400);const n=new b,o=[{x:120,y:350,z:-120,scale:150},{x:135,y:270,z:-90,scale:70},{x:95,y:245,z:-70,scale:50},{x:80,y:240,z:70,scale:40},{x:90,y:230,z:100,scale:30},{x:120,y:220,z:80,scale:20},{x:-130,y:320,z:-110,scale:140},{x:-125,y:270,z:-70,scale:70},{x:-140,y:500,z:90,scale:200}];for(let c=0;c<o.length;c++){const m=new he().mesh;m.position.set(o[c].x,o[c].y,o[c].z),m.scale.z=o[c].scale,m.updateMatrix(),n.merge(m.geometry,m.matrix)}const t=new b,e=new l(new z(40,40,70,6,1));e.position.set(0,-50,0),e.updateMatrix();const i=new he().mesh;i.scale.set(3.5,3.5,150),i.updateMatrix(),t.merge(e.geometry,e.matrix),t.merge(i.geometry,i.matrix);const s=new l(t,g.rust);s.position.set(-125,325,90),s.updateMatrix(),n.merge(s.geometry,s.matrix);const r=new l(n,g.rust);r.castShadow=!0,r.receiveShadow=!0,this.mesh.add(r);const a=[{position:{x:0,y:170,z:195},rotation:{x:0,y:Math.PI/2,z:0}},{position:{x:0,y:0,z:195},rotation:{x:0,y:Math.PI/2,z:Math.PI}},{position:{x:215,y:-75,z:10},rotation:{x:Math.PI/2,y:Math.PI/2,z:0}},{position:{x:215,y:-75,z:-20},rotation:{x:Math.PI/2,y:Math.PI,z:0}}];for(let c=0;c<a.length;c++){const m=new te().mesh;m.position.set(a[c].position.x,a[c].position.y,a[c].position.z),m.rotation.set(a[c].rotation.x,a[c].rotation.y,a[c].rotation.z,"ZYX"),this.mesh.add(m)}const h=[{position:{x:195,y:245,z:-195},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:-195+130},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:-195+130*2},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:195},rotation:{x:0,y:-Math.PI/2,z:0},isClosed:!0},{position:{x:195-130*2,y:245,z:195},rotation:{x:0,y:-Math.PI/2,z:0},isClosed:!0},{position:{x:-195,y:245,z:-195},rotation:{x:0,y:0,z:0}},{position:{x:-195,y:245,z:-195+130},rotation:{x:0,y:0,z:0}},{position:{x:-195,y:245,z:-195+130*2},rotation:{x:0,y:0,z:0}}];for(let c=0;c<h.length;c++){const m=new Oe(h[c].isClosed).mesh;m.position.set(h[c].position.x,h[c].position.y,h[c].position.z),m.rotation.set(h[c].rotation.x,h[c].rotation.y,h[c].rotation.z),this.mesh.add(m)}const d=new Ae().mesh;d.position.set(50,215,-5),this.mesh.add(d)}}class ce{constructor(){this.mesh=new k,this.mesh.name="fan";const n=new b,o=new l(new z(8,8,10,6,1)),t=new l(new z(5,5,400,6,1)),e=new l(new z(25,25,50,8,1));e.rotation.x+=Math.PI/2,e.position.y+=200,e.updateMatrix(),n.merge(o.geometry,o.matrix),n.merge(t.geometry,t.matrix),n.merge(e.geometry,e.matrix);const i=new l(n,g.darkMetal);i.castShadow=!0,i.receiveShadow=!0;const s=new k,r=new z(10,10,30,6,1),a=new l(r,g.darkMetal);a.receiveShadow=!0,a.castShadow=!0,a.position.z+=30,a.rotation.x=Math.PI/2;let h=[];const d=new V(20,120,2);for(let c=0;c<3;c++){const m=new l(d,g.white);m.geometry.translate(0,120/6,0),m.geometry.vertices[4].y+=5,m.geometry.vertices[4].z-=1,m.geometry.vertices[5].y+=5,m.geometry.vertices[5].z-=1,m.rotation.z=c*(2*Math.PI/3),m.position.z+=40,m.castShadow=!0,m.receiveShadow=!0,h.push(m)}s.position.y+=200,s.add(a,...h),this.propeller=s,this.mesh.add(i,s)}rotate(n){this.propeller.rotation.z+=n}}class me{constructor(n=!1){const o=new b,t=new S([10,20,4],{x:0,y:0,z:0});t.mesh.updateMatrix();const e=new S([28,4,2],{x:-(28/2+10/2),y:10-4/2,z:0});e.mesh.updateMatrix();const i=new S([28,4,2],{x:-(28/2+10/2),y:-3,z:0});i.mesh.updateMatrix();const s=new S([10,6,4],{x:0,y:13,z:0});s.mesh.geometry.vertices[0].x-=5,s.mesh.geometry.vertices[1].x-=5,s.mesh.geometry.vertices[4].x+=5,s.mesh.geometry.vertices[5].x+=5,s.mesh.updateMatrix(),o.merge(i.mesh.geometry,i.mesh.matrix),o.merge(t.mesh.geometry,t.mesh.matrix),o.merge(e.mesh.geometry,e.mesh.matrix),o.merge(s.mesh.geometry,s.mesh.matrix),this.width=38,this.mesh=new l(o,g.wood),this.mesh.position.y+=10}}class le{constructor(n=[1,1,1],o=0){this.mesh=new k,this.mesh.name="pine";const t=new z(8,8,15,10,1),e=new l(t,g.wood);e.castShadow=!0,e.receiveShadow=!0,e.position.y+=7.5;const i=new b;for(let r=1;r<=7;r++){let a=45-r*5;const h=new l(new z(a-10,a,10,6,1));h.position.y+=10+r*70/7,h.updateMatrix(),i.merge(h.geometry,h.matrix)}const s=new l(i,g.green);s.receiveShadow=!0,s.castShadow=!0,this.mesh.scale.x=n[0],this.mesh.scale.y=n[1],this.mesh.scale.z=n[2],this.mesh.rotation.y=o,this.mesh.add(e,s)}}class Ve{constructor(){this.mesh=new k,this.mesh.name="windwane";const n=new b,o=new b;{const a=new S([20,200,15],{x:0,y:100,z:0}).mesh;a.geometry.vertices[0].x-=5,a.geometry.vertices[0].z-=5,a.geometry.vertices[1].x-=5,a.geometry.vertices[1].z+=5,a.geometry.vertices[4].x+=5,a.geometry.vertices[4].z+=5,a.geometry.vertices[5].x+=5,a.geometry.vertices[5].z-=5,a.updateMatrix(),o.merge(a.geometry,a.matrix);for(let h=0;h<4;h++){const d=new S([65,10,5],{x:-25,y:30+h*40,z:0}).mesh;d.rotation.z+=Math.PI/4*(h%2==0?-1:1),d.updateMatrix(),o.merge(d.geometry,d.matrix)}}for(let a=0;a<4;a++){const h=new l(o,g.wood);h.position.x+=40*Math.cos(a*Math.PI/2),h.position.z+=40*Math.sin(a*Math.PI/2),h.rotation.y+=Math.PI/4-a*(Math.PI/2),h.updateMatrix(),n.merge(h.geometry,h.matrix)}const t=new S([80,10,80],{x:0,y:200,z:0}).mesh;t.rotation.y-=Math.PI/4,t.updateMatrix(),n.merge(t.geometry,t.matrix);const e=new l(n,g.wood);e.name="stand",e.castShadow=!0,e.receiveShadow=!0,e.rotation.y+=Math.PI/4;const i=new b;{const a=new l(new z(2,2,60,6,1));a.rotation.z=Math.PI/6,a.position.set(15,230,0),a.updateMatrix();const h=a.clone();h.rotation.z=-Math.PI/6,h.position.x=-15,h.updateMatrix();const d=new l(new z(4,4,6,6,1));d.position.set(0,255,0),d.updateMatrix(),i.merge(a.geometry,a.matrix),i.merge(h.geometry,h.matrix),i.merge(d.geometry,d.matrix)}const s=new l(i,g.lightMetal);s.castShadow=!0,s.receiveShadow=!0;const r=new k;{const a=new l(new z(2,2,100,6,1),g.lightMetal);a.position.set(0,260,0),a.rotation.x+=Math.PI/2,a.receiveShadow=!0,a.castShadow=!0;const h=new l(new z(3,3,5,6,1),g.lightMetal);h.position.set(0,260,0),h.receiveShadow=!0,h.castShadow=!0;const d=new H,c=36,m=16;d.moveTo(0,m/2),d.lineTo(c/4,m),d.lineTo(c,m),d.lineTo(c-c/4,m/2),d.lineTo(c,0),d.lineTo(c/4,0),d.moveTo(0,m/2);const I={steps:2,depth:4,bevelEnabled:!1},w=new l(new R(d,I),g.red);w.castShadow=!0,w.receiveShadow=!0,w.position.set(-2,260-m/2,-25),w.rotation.y=Math.PI/2;const p=new k,x=new b;for(let L=0;L<12;L++){const G=new S([45,2,1],{x:4*Math.cos(L*(Math.PI/6)),y:4*Math.sin(L*(Math.PI/6)),z:0}).mesh;G.geometry.translate(20,0,0),G.geometry.vertices[1].z-=4,G.geometry.vertices[1].y+=10,G.rotation.z+=L*Math.PI/6,G.updateMatrix(),x.merge(G.geometry,G.matrix)}const f=new l(x,g.lightMetal);f.castShadow=!0,f.receiveShadow=!0;const P=new l(new z(4,4,4,6,1),g.darkMetal);P.rotation.x=Math.PI/2,P.castShadow=!0,P.receiveShadow=!0,p.add(f,P),p.position.set(0,260,45),this.fan=p,r.add(a,h,w,p)}this.vane=r,this.mesh.add(e,s,r)}rotateFan(n){this.fan.rotation.z+=n}}class Ne{constructor(){const n=new b,o=new S([5,410,5],{x:0,y:205,z:0}).mesh;n.merge(o.geometry,o.matrix);const t=o.clone();t.position.z-=30,t.updateMatrix(),n.merge(t.geometry,t.matrix);for(let e=0;e<40;e++){const i=new S([2,2,30],{x:0,y:e*10+10,z:-15}).mesh;n.merge(i.geometry,i.matrix)}this.mesh=new l(n,g.wood),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class je{constructor(n=[[0,0,0]]){const o=new b;for(let t=0;t<n.length;t++){const e=new S([30,40,30],{x:n[t][0],y:n[t][1],z:n[t][2]}).mesh;e.rotation.set(Math.random()*(2*Math.PI),Math.random()*(2*Math.PI),Math.random()*(2*Math.PI)),e.updateMatrix(),o.merge(e.geometry,e.matrix)}this.mesh=new l(o,g.lightMetal),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class qe{constructor(){this.mesh=new k,this.mesh.name="middle-island",this.mesh.add(new S([400,400,400],{x:0,y:0,z:0},C.lightBrown,"middle-cube-basement").mesh),this.fans=[];const n=[{x:200,y:100,z:-100,rx:-Math.PI/2,rz:-Math.PI/2},{x:200,y:-50,z:100,rx:-Math.PI/2,rz:-Math.PI/2}];for(let w=0;w<n.length;w++){const p=new ce;p.mesh.position.set(n[w].x,n[w].y,n[w].z),p.mesh.rotation.set(n[w].rx,0,n[w].rz),this.fans.push(p)}const o=[{x:190,z:-190,ry:0,mx:-1,mz:0,count:11},{x:190,z:185,ry:-Math.PI/2,mx:0,mz:-1,count:10},{x:-190,z:190,ry:0,mx:1,mz:0,count:4},{x:80,z:185,ry:Math.PI,mx:1,mz:0,count:3}],t=38;let e=new b;for(let w=0;w<o.length;w++)for(let p=0;p<o[w].count;p++){const x=new me().mesh;x.position.set(o[w].x+p*o[w].mx*t,210,o[w].z+p*o[w].mz*t),x.rotation.y=o[w].ry,x.updateMatrix(),e.merge(x.geometry,x.matrix)}const i=new l(e,g.wood);i.name="fence-perimeter",i.castShadow=!0,i.receiveShadow=!0;const s=new le([1.2,2,1.2]).mesh;s.position.set(-140,200,140);const r=new Ve;r.mesh.position.set(100,200,-50),r.mesh.rotation.y+=Math.PI/16,this.windvane=r;const a=new Ne().mesh;a.position.set(-158,200,-90),a.rotation.z=Math.PI/32;const h=[];for(let w=0;w<12;w++)h.push([250*Math.cos(w*Math.PI/24),0,-180*Math.sin(w*Math.PI/24)]);for(let w=0;w<8;w++)h.push([150*Math.cos(w*Math.PI/16)+10,0,-100*Math.sin(w*Math.PI/16)]);const d=new je(h).mesh;d.position.set(-210,200,170);const c=new b;new b;const m=[{type:"straight",position:[80,-475,125],rotation:[Math.PI/2,0,0]},{type:"connection",position:[80,-475,35],rotation:[Math.PI/2,0,0],options:{m:1}},{type:"arc",position:[80,-397.5,20],rotation:[-(Math.PI/2),Math.PI/2,-(Math.PI/2)],options:{scale:1.1}},{type:"connection",position:[80,-300,-57.5],rotation:[0,0,0],options:{m:8}},{type:"straight",position:[-275,-75,80],rotation:[0,0,Math.PI/2]},{type:"connection",position:[-360,-75,80],rotation:[0,0,Math.PI/2],options:{m:1}},{type:"arc",position:[-370,0,80],rotation:[0,0,Math.PI/2],options:{scale:1.1}},{type:"connection",position:[-450,150,80],rotation:[0,0,0],options:{m:4}}];for(let w=0;w<m.length;w++){let x=function(f,P){f.position.set(P.position[0],P.position[1],P.position[2]),f.rotation.set(P.rotation[0],P.rotation[1],P.rotation[2]),f.updateMatrix()},p;switch(m[w].type){case"straight":p=new l(new z(35,35,150,8,1));break;case"connection":p=new ee(m[w].options.m).mesh;break;case"arc":p=new te(!1,!1).mesh,p.scale.set(m[w].options.scale,m[w].options.scale,m[w].options.scale);break}x(p,m[w]),c.merge(p.geometry,p.matrix)}const I=new l(c,g.lightMetal);I.castShadow=!0,I.receiveShadow=!0,this.mesh.add(i,s,r.mesh,a,d,...this.fans.map(w=>w.mesh),I)}}class $e{constructor(n,o,t=5,e=8){this.radius=t;const i=new Y([new y(0,0,0),new y(0,0,n),new y(0,o,n+t)]),s=new H;s.moveTo(this.radius*Math.cos(0),this.radius*Math.sin(0));for(let r=1;r<16;r++)s.lineTo(this.radius*Math.cos(r*(2*Math.PI)/16),this.radius*Math.sin(r*(2*Math.PI)/16));this.mesh=new l(new R(s,{curveSegments:8,steps:e,bevelEnabled:!1,extrudePath:i}))}}class Ue{constructor(){this.mesh=new k,this.mesh.name="house";const n={x:140,y:50,z:140},o=new S([n.x,n.y,n.z],{x:0,y:n.y/2,z:-100},C.brick,"first-floor").mesh;o.castShadow=!0,o.receiveShadow=!0;const t=new S([n.x+10,n.y/10,n.z+10],{x:0,y:n.y/20,z:-100},C.darkMetal,"basement").mesh;t.castShadow=!0,t.receiveShadow=!0;const e=new k,i=new l(new z(n.x-40,n.x-35,5,4,1),g.brick);i.position.y-=2.5,i.castShadow=!0,i.receiveShadow=!0;const s=new l(new z(20,20,5,4,1),g.brick);s.position.y+=122.5,s.castShadow=!0,s.receiveShadow=!0;const r=new l(new z(15,15,5,4,1),g.brick);r.position.y+=155,r.castShadow=!0,r.receiveShadow=!0,e.add(i,s,r),e.position.set(0,n.y,-100),e.rotation.y+=Math.PI/4;const a=new b,h=[{y:20,rT:50,rB:100,height:40},{y:70,rT:20,rB:50,height:60},{y:110,rT:15,rB:20,height:20},{y:130,rT:30,rB:15,height:10},{y:145,rT:10,rB:30,height:20},{y:165,rT:1,rB:10,height:20}];for(let v=0;v<h.length;v++){const E=new l(new z(h[v].rT,h[v].rB,h[v].height,4,1));E.position.y+=h[v].y,E.updateMatrix(),a.merge(E.geometry,E.matrix)}const d=new l(a,g.roof);d.castShadow=!0,d.receiveShadow=!0,e.add(d);const c=new b,m=[{x:0,y:100,z:-70,width:30,height:50},{x:-10,y:120,z:-80,width:20,height:80}];for(let v=0;v<m.length;v++){const E=new $e(m[v].width,m[v].height).mesh;E.position.set(m[v].x,m[v].y,m[v].z),E.updateMatrix(),c.merge(E.geometry,E.matrix)}const I=new l(c,g.lightMetal);I.castShadow=!0,I.receiveShadow=!0;const w=new H;w.moveTo(15,-15),w.lineTo(15,15);for(let v=0;v<8;v++)w.lineTo(15*Math.cos(v*Math.PI/8),10*Math.sin(v*Math.PI/8)+15);w.lineTo(-15,-15),w.moveTo(-15,15);const p={steps:2,depth:4,bevelEnabled:!1},x=new l(new R(w,p),g.wood);x.castShadow=!0,x.receiveShadow=!0,x.position.set(70,15,-125),x.rotation.y=Math.PI/2;const f=new H;f.moveTo(0,0),f.absarc(0,0,15,0,Math.PI*2);const P=new K;P.moveTo(0,0),P.absarc(0,0,12,0,Math.PI*2),f.holes.push(P);const L=new R(f,{depth:4,steps:1,bevelEnabled:!1}),G=new S([1,30,4]),F=new S([30,1,4]);L.merge(G.geometry,G.matrix),L.merge(F.geometry,F.matrix);const _=new l(L,g.wood);_.position.set(70,25,-65),_.rotation.y=Math.PI/2,_.scale.x=1.15,_.receiveShadow=!0,_.castShadow=!0,this.mesh.add(t,o,x,_,e,I)}}class Xe{constructor(){this.mesh=new k,this.mesh.name="top-island",this.mesh.add(new S([400,400,400],{x:0,y:0,z:0},C.lightGreen).mesh),this.fans=[];const n=[{x:-100,y:100},{x:100,y:-100}];for(let h=0;h<n.length;h++){const d=new ce;d.mesh.position.set(n[h].x,n[h].y,200),d.mesh.rotation.set(Math.PI/2,Math.PI,0),this.fans.push(d)}this.fans.map(h=>{this.mesh.add(h.mesh)});const o=new Ue().mesh;o.position.x+=70,o.position.y+=200,o.position.z+=5,o.rotation.y-=Math.PI/16,this.mesh.add(o);let t=new b;const e=[{x:190,z:187,ry:0,mx:-1,mz:0,count:10},{x:-187,z:185,ry:-Math.PI/2,mx:0,mz:-1,count:10},{x:-187,z:-187,ry:Math.PI,mx:1,mz:0,count:10},{x:190,z:118,ry:Math.PI/2,mx:0,mz:1,count:2},{x:187,z:-155,ry:-Math.PI/2,mx:0,mz:-1,count:1}],i=38;for(let h=0;h<e.length;h++)for(let d=0;d<e[h].count;d++){const c=new me().mesh;c.position.set(e[h].x+d*e[h].mx*i,210,e[h].z+d*e[h].mz*i),c.rotation.y=e[h].ry,c.updateMatrix(),t.merge(c.geometry,c.matrix)}const s=new l(t,g.wood);s.name="fence-perimeter",s.castShadow=!0,s.receiveShadow=!0,this.mesh.add(s);const r=[{x:120,y:200,z:140,sx:1,sy:1,sz:1},{x:15,y:200,z:140,sx:1,sy:1.2,sz:1},{x:-100,y:200,z:140,sx:1.1,sy:1.5,sz:1.1},{x:-90,y:200,z:-80,sx:1.6,sy:1.8,sz:1.6}];for(let h=0;h<r.length;h++){const d=new le([r[h].sx,r[h].sy,r[h].sz]).mesh;d.position.set(r[h].x,r[h].y,r[h].z),this.mesh.add(d)}const a=new te().mesh;a.position.x-=60,a.position.y+=215,a.position.z+=40,this.mesh.add(a),this.mesh.position.set(-400,400,0)}}class Ze{constructor(){this.mesh=new k,this.mesh.name="zeppelin-balloon";const n=200,o=12,t=[];for(let r=0;r<o;r++)t.push(new J(n*Math.sin(r*(Math.PI/o)),n*Math.cos(r*(Math.PI/o))*2));const e=new l(new Q(t),g.balloon);e.receiveShadow=!0;const i=new H;i.moveTo(t[0].y,t[0].x);for(let r=1;r<t.length-1;r++)i.lineTo(t[r].y,t[r].x);i.moveTo(t[t.length]);const s=new l(new R(i,{steps:1,depth:20,bevelEnabled:!1}),g.lightMetal);s.rotation.z-=Math.PI/2,s.position.set(5,0,-10),s.castShadow=!0,s.receiveShadow=!0,this.mesh.add(e,s),this.mesh.rotation.x=Math.PI/2}}class de{constructor(n,o,t=15){this.radius=n;const e=new Y(o),i=new H;i.moveTo(this.radius*Math.cos(0),this.radius*Math.sin(0));for(let s=1;s<16;s++)i.lineTo(this.radius*Math.cos(s*(2*Math.PI)/16),this.radius*Math.sin(s*(2*Math.PI)/16));this.mesh=new l(new R(i,{steps:t,bevelEnabled:!1,extrudePath:e})),this.mesh.name="hose"}}class Ke{constructor(n=!0,o=!1){this.mesh=new k,this.mesh.name="zeppelin-fan";const t=40,e=new b,i=new l(new z(t,t-5,t*2,16,1)),s=[];for(let f=0;f<16;f++)s.push(new J(t*Math.cos(f*(Math.PI/32)),t*Math.sin(f*(Math.PI/32))/3));const r=new l(new Q(s,8));r.position.y+=t,r.updateMatrix();const a=new l(new z(5,5,120,6,1));if(a.position.set(-60,0,0),a.rotation.z-=Math.PI/2,a.updateMatrix(),n){const f=new S([15,45,1]).mesh;f.position.set(35,5,15),f.updateMatrix();const P=f.clone();f.position.z-=30,f.updateMatrix(),e.merge(f.geometry,f.matrix),e.merge(P.geometry,P.matrix);for(let F=-2;F<4;F++){let _=new l(new z(4,4,30,3,1));_.rotation.set(Math.PI/2,Math.PI/3,0),_.position.set(t+F/2-2,F*8,0),_.updateMatrix(),e.merge(_.geometry,_.matrix)}let L=o?-1:1;const G=new de(4,[new y(-10,28,L*35),new y(0,5,L*50),new y(10,-4,L*55),new y(20,-8,L*50),new y(24,-12,L*40),new y(20,-16,L*25)]).mesh;e.merge(G.geometry,G.matrix)}const h=new l(new z(5,10,15,6,1,!0));h.position.y+=58,h.updateMatrix(),e.merge(i.geometry,i.matrix),e.merge(r.geometry,r.matrix),e.merge(a.geometry,a.matrix),e.merge(h.geometry,h.matrix);const d=new l(e,g.lightMetal);d.castShadow=!0,d.receiveShadow=!0;const c=new b,m=new l(new z(4,4,280,6,1));m.position.set(0,100,0),m.updateMatrix();const I=new l(new z(12,5,10,6,1));I.position.set(0,228,0),I.updateMatrix();const w=new b,p=new H;p.moveTo(0,-5);for(let f=-4;f<4;f++)p.lineTo(120+10*Math.cos(f*Math.PI/8),10*Math.sin(f*Math.PI/8));p.lineTo(0,5);for(let f=0;f<4;f++){let P=new l(new R(p,{curveSegments:8,steps:1,depth:2,bevelEnabled:!1}));P.rotation.z+=f*(Math.PI/2),P.updateMatrix(),w.merge(P.geometry,P.matrix)}const x=new l(w,g.white);x.position.set(0,235,0),x.geometry.applyMatrix4(new ke().makeRotationX(Math.PI/2)),x.updateMatrix(),c.merge(m.geometry,m.matrix),c.merge(I.geometry,I.matrix),c.merge(x.geometry,x.matrix),this.propeller=new l(c,g.white),this.propeller.castShadow=!0,this.propeller.receiveShadow=!0,this.mesh.add(d,this.propeller)}rotate(n){this.propeller.rotation.y+=n}}class Ye{constructor(){const n=new b,o=new b,t=30,e=new l(new z(t,t,70,16,1)),i=[];for(let I=0;I<16;I++)i.push(new J(t*Math.cos(I*(Math.PI/32)),t*Math.sin(I*(Math.PI/32))/2));const s=new l(new Q(i,12));s.position.y=35,s.updateMatrix();const r=s.clone();r.rotation.z+=Math.PI,r.position.y=-35,r.updateMatrix();const a=new l(new z(8,8,10,8,1));a.position.y+=50,a.updateMatrix(),o.merge(e.geometry,e.matrix),o.merge(s.geometry,s.matrix),o.merge(r.geometry,r.matrix),o.merge(a.geometry,a.matrix);const h=new l(o);h.position.z+=35,h.updateMatrix();const d=h.clone();d.position.z-=70,d.updateMatrix();const c=new S([5,4,80]).mesh;c.position.y+=52,c.updateMatrix();const m=new l(new z(2,2,120,6,1));m.position.set(-60,52,0),m.rotation.z-=Math.PI/2,m.updateMatrix(),n.merge(h.geometry,h.matrix),n.merge(d.geometry,d.matrix),n.merge(c.geometry,c.matrix),n.merge(m.geometry,m.matrix),this.mesh=new l(n,g.lightMetal),this.mesh.name="fuel-tanks",this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class Je{constructor(){this.mesh=new k,this.mesh.name="turbine";const n=new b,o=new H;o.moveTo(0,0),o.absarc(0,0,60,0,Math.PI*2);const t=new K;t.moveTo(0,0),t.absarc(0,0,55,0,Math.PI*2),o.holes.push(t);const e=new l(new R(o,{depth:80,steps:1,bevelEnabled:!1}));e.position.z-=40,e.updateMatrix();const i=new S([150,5,30],{x:-130,y:0,z:0}).mesh,s=new S([118,5,10]).mesh;s.rotation.z+=Math.PI/4,s.updateMatrix();const r=new l(new z(20,20,50,8,1));r.rotation.x+=Math.PI/2,r.updateMatrix(),n.merge(e.geometry,e.matrix),n.merge(i.geometry,i.matrix),n.merge(s.geometry,s.matrix),n.merge(r.geometry,r.matrix);const a=new l(n,g.darkMetal);a.castShadow=!0,a.receiveShadow=!0;const h=new b;for(let c=0;c<12;c++){const m=new S([50,2,1],{x:4*Math.cos(c*(Math.PI/6)),y:4*Math.sin(c*(Math.PI/6)),z:30}).mesh;m.geometry.translate(20,0,0),m.geometry.vertices[1].z-=8,m.geometry.vertices[1].y+=10,m.rotation.z+=c*Math.PI/6,m.updateMatrix(),h.merge(m.geometry,m.matrix)}const d=new l(new z(10,1,10,8,1));d.rotation.x-=Math.PI/2,d.position.z+=35,d.updateMatrix(),h.merge(d.geometry,d.matrix),this.propeller=new l(h,g.lightMetal),this.propeller.castShadow=!0,this.propeller.receiveShadow=!0,this.mesh.add(a,this.propeller)}rotate(n){this.propeller.rotation.z+=n}}class Qe{constructor(){this.mesh=new k,this.mesh.name="cabine";const n=new l(new z(150,100,80,16,1),g.darkMetal);n.scale.x=.5,n.updateMatrix(),this.turbines=[];const o=[{x:200,y:-50,z:0,rx:0,ry:0,rz:0},{x:-200,y:-50,z:0,rx:Math.PI,ry:Math.PI,rz:Math.PI/4}];for(let t=0;t<o.length;t++){const e=new Je;e.mesh.position.set(o[t].x,o[t].y,o[t].z),e.mesh.rotation.set(o[t].rx,o[t].ry,o[t].rz),e.mesh.rotation.z-=Math.PI/8,this.turbines.push(e)}this.mesh.add(n,...this.turbines.map(t=>t.mesh)),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class et{constructor(){this.mesh=new k,this.mesh.name="zeppelin",this.mesh.position.set(-400,550,-900);const n=new Ze().mesh;this.fans=[];const o=[{x:250,y:0,z:200,ry:0,full:!0,mirrored:!1},{x:240,y:0,z:-200,ry:0,full:!0,mirrored:!0},{x:-250,y:0,z:200,ry:Math.PI,full:!1,mirrored:!1},{x:-240,y:0,z:-200,ry:Math.PI,full:!1,mirrored:!1}];for(let r=0;r<o.length;r++){const a=new Ke(o[r].full,o[r].mirrored);a.mesh.position.set(o[r].x,o[r].y,o[r].z),a.mesh.rotation.y+=o[r].ry,this.fans.push(a)}const t=new Ye().mesh;t.rotation.z-=Math.PI/8,t.position.set(220,-65,-50);const e=new b,i=[[new y(200,-110,-15),new y(210,-150,20),new y(195,-10,60),new y(195,-50,100),new y(220,0,160)],[new y(200,-110,-85),new y(210,-160,-140),new y(220,20,-180)]];for(let r=0;r<i.length;r++){const a=new de(4,i[r],40).mesh;e.merge(a.geometry,a.matrix)}const s=new l(e,g.lightMetal);s.castShadow=!0,s.receiveShadow=!0,this.cabine=new Qe,this.cabine.mesh.position.y-=210,this.mesh.add(this.cabine.mesh,n,...this.fans.map(r=>r.mesh),t,s)}}class tt{constructor(n=[new y(0,0,0),new y(1,1,1)],o=10){const t=new Y(n);var e={steps:o,bevelEnabled:!1,extrudePath:t};const i=new H,s=36,r=16;i.moveTo(s*Math.cos(0),s*Math.sin(0));for(let c=1;c<r;c++)i.lineTo(s*Math.cos(c*(2*Math.PI)/r),s*Math.sin(c*(2*Math.PI)/r)/1.5);const a=new R(i,e),h=g.water;a.mergeVertices();const d=a.vertices.length;this.waves=[];for(let c=0;c<d;c++){const m=a.vertices[c];this.waves.push({y:m.y,x:m.x,z:m.z,ang:Math.random()*Math.PI*2,amp:5+Math.random()*15,speed:.032+Math.random()*.064})}this.mesh=new l(a,h),this.mesh.receiveShadow=!0,this.mesh.castShadow=!0}moveWaves(){const n=this.mesh.geometry.vertices,o=n.length;for(let t=0;t<o;t++){const e=n[t],i=this.waves[t];e.x=i.x-Math.cos(i.ang)*i.amp,e.y=i.y+Math.sin(i.ang)*i.amp,i.ang+=i.speed}this.mesh.geometry.verticesNeedUpdate=!0}}class nt{constructor(){this.mesh=new k,this.mesh.name="lamp-post";const n=new S([8,100,8]).mesh;n.geometry.vertices[2].x+=1,n.geometry.vertices[2].z+=1,n.geometry.vertices[3].x+=1,n.geometry.vertices[3].z-=1,n.geometry.vertices[6].x-=1,n.geometry.vertices[6].z-=1,n.geometry.vertices[7].x-=1,n.geometry.vertices[7].z+=1,n.updateMatrix();const o=new S([6,6,40],{x:0,y:45,z:12}).mesh,t=new S([4,4,20],{x:0,y:38,z:10}).mesh;t.rotation.x-=Math.PI/4,t.updateMatrix();const e=new b;e.merge(n.geometry,n.matrix),e.merge(o.geometry,o.matrix),e.merge(t.geometry,t.matrix);const i=new l(e,g.wood);i.castShadow=!0,i.receiveShadow=!0;const s=new l(new z(1,6,4,8),g.darkMetal);s.castShadow=!0,s.receiveShadow=!0,s.position.set(0,40,30),this.light=new Le(16636818,0,0,0),this.light.castShadow=!1,this.light.shadow.mapSize.set(16,16),this.light.shadow.normalBias=.5,this.light.position.set(-10,30,30),this.mesh.add(i,s,this.light)}turnLights(n){n?(this.light.intensity=.95,this.light.distance=1e3,this.light.decay=2,this.light.castShadow=!0,this.light.shadow.mapSize.set(128,128)):(this.light.intensity=0,this.light.distance=1,this.light.decay=1,this.light.castShadow=!1,this.light.shadow.mapSize.set(8,8))}}const N={sunrise:{hemisphereLight:{intensity:.6},ambientLight:{intensity:.3},sunLight:{intensity:.75,position:[630,210,-110],color:16759431}},midday:{hemisphereLight:{intensity:.9},ambientLight:{intensity:.5},sunLight:{intensity:.75,position:[-280,695,350],color:16777215}},sunset:{hemisphereLight:{intensity:.6},ambientLight:{intensity:.3},sunLight:{intensity:.75,position:[-290,560,900],color:16759431}},midnight:{hemisphereLight:{intensity:.025},ambientLight:{intensity:.025},sunLight:{intensity:.025,position:[-420,800,370],color:15658734}}},O=[6,8,17,20];class ot{constructor(){this.now=new Date(0),this.timeNode=document.getElementById("time"),this.dayNode=document.getElementById("day"),this.update()}update(){Date.now()-this.now>6e4&&(this.now=new Date,this.hours=("0"+this.now.getHours()).slice(-2))}getHours(){return this.hours}}let st=({dpr:u,antialias:n})=>{let o=window.innerWidth,t=window.innerHeight;window.addEventListener("resize",()=>{o=window.innerWidth,t=window.innerHeight,a.setSize(o,t),r.aspect=o/t,r.updateProjectionMatrix(),X()},!1);const e=document.getElementById("scene"),i=e.querySelector("canvas"),s=Be(),r=Fe(o,t),a=Re({canvas:i,W:o,H:t,dpr:u,antialias:n}),h=new Ge(11184810,0,.9),d=new Te(4210752,.5),c=We();let m=M=>{h.intensity=N[M].hemisphereLight.intensity,d.intensity=N[M].ambientLight.intensity,c.intensity=N[M].sunLight.intensity,c.color.setHex(N[M].sunLight.color),c.position.set(...N[M].sunLight.position),M==="midnight"?(G.map(T=>T.turnLights(!0)),g.line.color.setHex(1118481)):(G.map(T=>T.turnLights()),g.line.color.setHex(14465972))};const I=new De,w=new qe,p=new Xe,x=new et,f=new k;f.name="islands",f.add(I.mesh,w.mesh,p.mesh);const P=[],L=[{points:[new y(-450,690,40),new y(-370,615,40),new y(-195,600,40),new y(-180,210,40),new y(-60,210,50),new y(-20,210,100),new y(15,205,210),new y(0,-180,230),new y(0,-180,570)],steps:25},{points:[new y(0,-250,665),new y(0,-380,665)],steps:4},{points:[new y(-450,90,80),new y(-450,0,80)],steps:2}];for(let M=0;M<L.length;M++)P.push(new tt(L[M].points,L[M].steps));P.map(M=>f.add(M.mesh));let G=[];const F=[{x:-215,y:650,z:-185,ry:0},{x:-215,y:650,z:185,ry:Math.PI},{x:180,y:250,z:-175,ry:-Math.PI/4},{x:170,y:-150,z:400,ry:-Math.PI/2}];for(let M=0;M<F.length;M++){const T=new nt;T.mesh.position.set(F[M].x,F[M].y,F[M].z),T.mesh.rotation.y+=F[M].ry,G.push(T)}f.add(...G.map(M=>M.mesh)),s.add(h,d,c,f,x.mesh),s.rotation.x=Math.PI/4,s.rotation.y=-Math.PI/4;const _=new Ce;let v;const E={x:0,y:0};window.matchMedia("(hover)").matches&&document.addEventListener("mousemove",({clientX:M,clientY:T})=>{E.x=-1+M/o*2,E.y=1-T/t*2});let W={x:0,y:0},ne=({beta:M,gamma:T})=>{if(!W.initial)return W.initial={x:M,y:T};W.x=re(-90,M-W.initial.x,90)||0,W.y=re(-45,T-W.initial.y,45)||0,E.y=-W.x/90,E.x=-W.y/45};if(window.DeviceOrientationEvent&&typeof window.DeviceOrientationEvent.requestPermission=="function"){let M=document.createElement("button");M.id="gyroscope",M.addEventListener("click",()=>{DeviceOrientationEvent.requestPermission().then(T=>{T==="granted"&&window.addEventListener("deviceorientation",ne),M.classList.add("hidden")}).catch(console.log)}),document.body.appendChild(M)}else window.addEventListener("deviceorientation",ne);let ue=+new ot().getHours(),A=M=>{M>=O[0]&&M<O[1]?(e.className="sunrise",m("sunrise")):M>=O[1]&&M<O[2]?(e.className="midday",m("midday")):M>=O[2]&&M<O[3]?(e.className="sunset",m("sunset")):(e.className="midnight",g.line.color.setHex(1118481),m("midnight"))};A(ue);const ge=w.windvane.vane;let U=.05,j=0,X=()=>{v=_.getDelta(),w.fans[0].rotate(5*v),w.fans[1].rotate(6*v),p.fans[0].rotate(-2*v),p.fans[1].rotate(-4*v),w.windvane.rotateFan(v),P[0].moveWaves(),P[1].moveWaves(),P[2].moveWaves(),x.fans[0].rotate(20*v),x.fans[1].rotate(21*v),x.fans[2].rotate(19*v),x.fans[3].rotate(22*v),x.cabine.turbines[0].rotate(.25*v),x.cabine.turbines[1].rotate(.25*v),x.mesh.position.y+=Math.sin(j*Math.PI),f.position.y+=Math.cos(j*Math.PI)/2,ge.rotation.y+=Math.cos(j*Math.PI)*U/10,j+=.01,s.rotation.x+=(-E.y*(Math.PI/10)+Math.PI/4-s.rotation.x)*U,s.rotation.y+=(E.x*(Math.PI/8)-Math.PI/4-s.rotation.y)*U,a.render(s,r)},oe=null,se=()=>{oe=requestAnimationFrame(se),X()},ye=()=>{se()},xe=()=>{cancelAnimationFrame(oe)},fe=M=>{let T=new Ee({autoplace:!1,hideable:!1});T.closed=!0,M.appendChild(T.domElement);let q={cameraControls:!0,isOverride:!1,sunrise:()=>A(7),midday:()=>A(11),sunset:()=>A(19),midnight:()=>A(0)},D=T.addFolder("daytime");D.add(q,"sunrise"),D.add(q,"midday"),D.add(q,"sunset"),D.add(q,"midnight"),D.open()};const ie=document.getElementById("gui");return ie&&fe(ie),{draw:X,start:ye,stop:xe}},we=new URL(document.location).searchParams,it=parseInt(we.get("dpr"))||window.devicePixelRatio,at=we.get("antialias")!=="false",{draw:rt,start:pe,stop:ht}=st({dpr:it,antialias:at}),ct=(()=>{try{return window.self!==window.top}catch{return!0}})();if(ct){document.body.classList.add("is-iframe"),rt();let u=["http://localhost:8080","https://nextgtrgod.github.io"];window.addEventListener("message",n=>{if(!!u.includes(n.origin))switch(n.data){case"start":pe();break;case"stop":ht();break}})}else{pe();let u=document.getElementById("gui");u&&!1&&(u.classList.add("visible"),console.log("press h to toggle controls")),document.addEventListener("keyup",({keyCode:o})=>{o===72&&u.classList.toggle("visible")})}document.body.classList.add("loaded");
