(function(e){function t(t){for(var o,a,r=t[0],h=t[1],c=t[2],w=0,l=[];w<r.length;w++)a=r[w],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&l.push(n[a][0]),n[a]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(e[o]=h[o]);m&&m(t);while(l.length)l.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],o=!0,r=1;r<s.length;r++){var h=s[r];0!==n[h]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=s[0]))}return e}var o={},n={app:0},i=[];function a(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=o,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(s,o,function(t){return e[t]}.bind(null,o));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],h=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var m=h;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);s("fb98");var o=s("8992"),n=s("5a89");const i={lightGreen:10335764,darkGreen:5876775,lightBrown:16767913,darkBronw:13669759,darkGrey:7496554,darkMetal:7496554,lightMetal:14465972,white:16645367,wood:10972695,brick:14070926,roof:7942486,sky:8435420,red:16711680,rust:12158069,water:8435420,balloon:14277081,glass:15658734};function a(){let e=new n["v"];return e}function r(e,t){let s=e/t;const o=50,i=1,a=3500;let r=new n["t"](o,s,i,a);return r.position.set(0,-350,2150),r.rotation.set(.2,.036,0),r}var h=s("113e");let c=e=>h["a"].isWebGL2Available()?e.getContext("webgl2"):e.getContext("webgl")||e.getContext("experimental-webgl"),m=(e,t,s,o=!0)=>{let i=new n["A"]({canvas:e,context:c(e),antialias:o,alpha:!0,powerPreference:"high-performance"});return i.setSize(t,s),i.setPixelRatio(window.devicePixelRatio),i.shadowMap.enabled=!0,i};var w=m;function l(){let e=new n["f"](16777215,.75);return e.position.set(-280,695,350),e.castShadow=!0,e.shadow.camera.left=-800,e.shadow.camera.right=800,e.shadow.camera.top=800,e.shadow.camera.bottom=-800,e.shadow.camera.near=1,e.shadow.camera.far=1500,e.shadow.mapSize.width=512,e.shadow.mapSize.height=512,e}class d{constructor(e=[100,100,100],t={x:0,y:0,z:0},s=null,o="cube-"+~~(1e3*Math.random())){this.width=e[0],this.height=e[1],this.depth=e[2],this.color=s,this.geometry=new n["b"](this.width,this.height,this.depth),this.material,this.color?this.material=new n["q"]({color:this.color,flatShading:!0}):this.material=null,this.mesh=new n["p"](this.geometry,this.material),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.position.x+=t.x,this.mesh.position.y+=t.y,this.mesh.position.z+=t.z,this.mesh.name=o,this.mesh.updateMatrix()}}const p={wood:new n["q"]({color:i.wood,flatShading:!0}),green:new n["q"]({color:i.darkGreen,flatShading:!0}),darkMetal:new n["q"]({color:i.darkMetal,specular:328965,shininess:100}),lightMetal:new n["q"]({color:i.lightMetal,side:n["g"],specular:328965,shininess:100}),glass:new n["q"]({color:i.glass,side:n["g"],transparent:!0,opacity:.5,specular:328965,shininess:1e4}),rust:new n["q"]({color:i.rust,side:n["g"],specular:328965,shininess:100}),brick:new n["q"]({color:i.brick,flatShading:!0}),roof:new n["q"]({color:i.roof,flatShading:!0}),white:new n["q"]({color:i.white,flatShading:!0}),red:new n["q"]({color:i.red,flatShading:!0}),balloon:new n["q"]({color:i.balloon,flatShading:!0,side:n["g"]}),line:new n["m"]({color:i.lightMetal,linewidth:1}),water:new n["q"]({color:i.water,flatShading:!0,specular:328965,shininess:1e3,transparent:!0,opacity:.8}),override:new n["q"]({color:14464896,wireframe:!0})};class y{constructor(e=1,t=!0,s=!0,o=35,i=16,a=!1){const r=new n["i"];this.radius=o,this.segmentsCount=i;const h=a?p.lightMetal:null,c=new n["p"](new n["e"](o,o,24*e,16,1,!0));if(c.rotation.y=2*Math.PI/80,c.updateMatrix(),r.merge(c.geometry,c.matrix),t){const t=new n["p"](new n["x"](o,6,10,16,2*Math.PI));t.position.y=12*e,t.rotation.x=Math.PI/2,t.updateMatrix(),r.merge(t.geometry,t.matrix)}if(s){const t=new n["p"](new n["x"](o,6,10,16,2*Math.PI));t.position.y=-12*e,t.rotation.x=Math.PI/2,t.updateMatrix(),r.merge(t.geometry,t.matrix)}const m=new n["e"](2,2,24*e,3,1,!0);for(let w=0;w<this.segmentsCount;w++){const e=new n["p"](m);e.position.set(o*Math.cos(w*(2*Math.PI)/this.segmentsCount),0,o*Math.sin(w*(2*Math.PI)/this.segmentsCount)),e.updateMatrix(),r.merge(e.geometry,e.matrix)}this.mesh=new n["p"](r,h),this.mesh.name="pipe-connection"}}class g{constructor(e=!0,t=!0){this.mesh=new n["r"],this.mesh.name="pipe-corner";const s=new n["i"],o=35,i=new n["x"](2*o,o,16,16,Math.PI/2),a=new n["p"](i);if(a.rotation.z=Math.PI/2,a.updateMatrix(),s.merge(a.geometry,a.matrix),t){const e=(new y).mesh;e.rotation.z+=Math.PI/2,e.position.y+=2*o,e.updateMatrix(),s.merge(e.geometry,e.matrix)}if(e){const e=(new y).mesh;e.position.x-=2*o,e.updateMatrix(),s.merge(e.geometry,e.matrix)}const r=new n["p"](s,p.lightMetal);r.castShadow=!0,r.receiveShadow=!0,this.mesh=r}}class u{constructor(){const e=new n["w"];e.moveTo(0,0),e.absarc(0,0,12,0,2*Math.PI);const t=new n["s"];t.moveTo(0,0),t.absarc(0,0,10,0,2*Math.PI),e.holes.push(t);const s={curveSegments:8,steps:1,depth:1,bevelEnabled:!1},o=new n["h"](e,s);this.mesh=new n["p"](o,p.rust),this.mesh.rotation.x+=Math.PI/2,this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.name="chimney"}}class x{constructor(e=!1){this.mesh=new n["r"],this.mesh.name="fence";const t=90,s=130,o=t-20,i=Math.atan(o/s),a=new n["i"],r=new n["p"](new n["b"](5,t,5));if(a.merge(r.geometry,r.matrix),e){const e=r.clone();e.position.z+=s,e.updateMatrix(),a.merge(e.geometry,e.matrix)}const h=new n["p"](new n["b"](2,2,s));h.position.set(0,o/2-10,s/2),h.updateMatrix(),a.merge(h.geometry,h.matrix);const c=new n["p"](a,p.darkMetal);c.name="pillars",c.castShadow=!0,c.receiveShadow=!0;const m=new n["i"];for(let p=0;p<s/2;p++)m.vertices.push(new n["z"](10*Math.cos(p),10*Math.sin(p),2*p));const w=new n["l"](m,p.line);w.name="helix",w.castShadow=!0,w.receiveShadow=!0,w.position.set(-5,40,0);const l=new n["i"],d=s/5;for(let p=0;p<s;p+=d){const e=s-p;l.vertices.push(new n["z"](0,0,p)),l.vertices.push(new n["z"](0,e*Math.tan(i),s))}for(let p=s;p>0;p-=d){const e=s-p;l.vertices.push(new n["z"](0,o,e)),l.vertices.push(new n["z"](0,o-e*Math.tan(i),0))}for(let p=0;p<s;p+=d){const e=s-p;l.vertices.push(new n["z"](0,0,e)),l.vertices.push(new n["z"](0,e*Math.tan(i),0))}for(let p=0;p<s;p+=d){const e=s-p;l.vertices.push(new n["z"](0,o,p)),l.vertices.push(new n["z"](0,o-e*Math.tan(i),s))}const y=new n["n"](l,p.line);y.position.y-=t/2,y.castShadow=!0,y.receiveShadow=!0,y.name="grid",this.mesh.add(c,w,y)}}class M{constructor(){this.mesh=new n["r"],this.mesh.name="filter";const e=new n["i"],t=new n["p"](new n["b"](5,30,390)),s=t.clone();s.position.x-=100,s.updateMatrix(),e.merge(t.geometry,t.matrix),e.merge(s.geometry,s.matrix);const o=new n["p"](e,p.rust);o.castShadow=!0,o.receiveShadow=!0;const i=new n["i"];for(let r=0;r<4;r++){let e=4*r;i.vertices.push(new n["z"](0,e,-40)),i.vertices.push(new n["z"](-100,e,-40))}const a=new n["n"](i,p.line);a.castShadow=!0,a.receiveShadow=!0,this.mesh.add(o,a)}}class z{constructor(){this.mesh=new n["r"],this.mesh.name="bottom-island",this.mesh.add(new d([400,400,400],{x:0,y:0,z:0},i.darkGrey).mesh),this.mesh.position.set(0,-400,400);const e=new n["i"],t=[{x:120,y:350,z:-120,scale:150},{x:135,y:270,z:-90,scale:70},{x:95,y:245,z:-70,scale:50},{x:80,y:240,z:70,scale:40},{x:90,y:230,z:100,scale:30},{x:120,y:220,z:80,scale:20},{x:-130,y:320,z:-110,scale:140},{x:-125,y:270,z:-70,scale:70},{x:-140,y:500,z:90,scale:200}];for(let n=0;n<t.length;n++){const s=(new u).mesh;s.position.set(t[n].x,t[n].y,t[n].z),s.scale.z=t[n].scale,s.updateMatrix(),e.merge(s.geometry,s.matrix)}const s=new n["i"],o=new n["p"](new n["e"](40,40,70,6,1));o.position.set(0,-50,0),o.updateMatrix();const a=(new u).mesh;a.scale.set(3.5,3.5,150),a.updateMatrix(),s.merge(o.geometry,o.matrix),s.merge(a.geometry,a.matrix);const r=new n["p"](s,p.rust);r.position.set(-125,325,90),r.updateMatrix(),e.merge(r.geometry,r.matrix);const h=new n["p"](e,p.rust);h.castShadow=!0,h.receiveShadow=!0,this.mesh.add(h);const c=[{position:{x:0,y:170,z:195},rotation:{x:0,y:Math.PI/2,z:0}},{position:{x:0,y:0,z:195},rotation:{x:0,y:Math.PI/2,z:Math.PI}},{position:{x:215,y:-75,z:10},rotation:{x:Math.PI/2,y:Math.PI/2,z:0}},{position:{x:215,y:-75,z:-20},rotation:{x:Math.PI/2,y:Math.PI,z:0}}];for(let n=0;n<c.length;n++){const e=(new g).mesh;e.position.set(c[n].position.x,c[n].position.y,c[n].position.z),e.rotation.set(c[n].rotation.x,c[n].rotation.y,c[n].rotation.z,"ZYX"),this.mesh.add(e)}const m=[{position:{x:195,y:245,z:-195},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:-65},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:65},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:195},rotation:{x:0,y:-Math.PI/2,z:0},isClosed:!0},{position:{x:-65,y:245,z:195},rotation:{x:0,y:-Math.PI/2,z:0},isClosed:!0},{position:{x:-195,y:245,z:-195},rotation:{x:0,y:0,z:0}},{position:{x:-195,y:245,z:-65},rotation:{x:0,y:0,z:0}},{position:{x:-195,y:245,z:65},rotation:{x:0,y:0,z:0}}];for(let n=0;n<m.length;n++){const e=new x(m[n].isClosed).mesh;e.position.set(m[n].position.x,m[n].position.y,m[n].position.z),e.rotation.set(m[n].rotation.x,m[n].rotation.y,m[n].rotation.z),this.mesh.add(e)}const w=(new M).mesh;w.position.set(50,215,-5),this.mesh.add(w)}}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class f{constructor(){v(this,"rotate",e=>{this.propeller.rotation.z+=e}),this.mesh=new n["r"],this.mesh.name="fan";const e=new n["i"],t=new n["p"](new n["e"](8,8,10,6,1)),s=new n["p"](new n["e"](5,5,400,6,1)),o=new n["p"](new n["e"](25,25,50,8,1));o.rotation.x+=Math.PI/2,o.position.y+=200,o.updateMatrix(),e.merge(t.geometry,t.matrix),e.merge(s.geometry,s.matrix),e.merge(o.geometry,o.matrix);const i=new n["p"](e,p.darkMetal);i.castShadow=!0,i.receiveShadow=!0;const a=new n["r"],r=new n["e"](10,10,30,6,1),h=new n["p"](r,p.darkMetal);h.receiveShadow=!0,h.castShadow=!0,h.position.z+=30,h.rotation.x=Math.PI/2;let c=[];const m=new n["b"](20,120,2);for(let w=0;w<3;w++){const e=new n["p"](m,p.white);e.geometry.translate(0,20,0),e.geometry.vertices[4].y+=5,e.geometry.vertices[4].z-=1,e.geometry.vertices[5].y+=5,e.geometry.vertices[5].z-=1,e.rotation.z=w*(2*Math.PI/3),e.position.z+=40,e.castShadow=!0,e.receiveShadow=!0,c.push(e)}a.position.y+=200,a.add(h,...c),this.propeller=a,this.mesh.add(i,a)}}class P{constructor(e=!1){const t=new n["i"],s=new d([10,20,4],{x:0,y:0,z:0});s.mesh.updateMatrix();const o=new d([28,4,2],{x:-19,y:8,z:0});o.mesh.updateMatrix();const i=new d([28,4,2],{x:-19,y:-3,z:0});i.mesh.updateMatrix();const a=new d([10,6,4],{x:0,y:13,z:0});a.mesh.geometry.vertices[0].x-=5,a.mesh.geometry.vertices[1].x-=5,a.mesh.geometry.vertices[4].x+=5,a.mesh.geometry.vertices[5].x+=5,a.mesh.updateMatrix(),t.merge(i.mesh.geometry,i.mesh.matrix),t.merge(s.mesh.geometry,s.mesh.matrix),t.merge(o.mesh.geometry,o.mesh.matrix),t.merge(a.mesh.geometry,a.mesh.matrix),this.width=38,this.mesh=new n["p"](t,p.wood),this.mesh.position.y+=10}}class b{constructor(e=[1,1,1],t=0){this.mesh=new n["r"],this.mesh.name="pine";const s=new n["e"](8,8,15,10,1),o=new n["p"](s,p.wood);o.castShadow=!0,o.receiveShadow=!0,o.position.y+=7.5;const i=new n["i"];for(let r=1;r<=7;r++){let e=45-5*r;const t=new n["p"](new n["e"](e-10,e,10,6,1));t.position.y+=10+70*r/7,t.updateMatrix(),i.merge(t.geometry,t.matrix)}const a=new n["p"](i,p.green);a.receiveShadow=!0,a.castShadow=!0,this.mesh.scale.x=e[0],this.mesh.scale.y=e[1],this.mesh.scale.z=e[2],this.mesh.rotation.y=t,this.mesh.add(o,a)}}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S{constructor(){I(this,"rotateFan",e=>{this.fan.rotation.z+=e}),this.mesh=new n["r"],this.mesh.name="windwane";const e=new n["i"],t=new n["i"];{const e=new d([20,200,15],{x:0,y:100,z:0}).mesh;e.geometry.vertices[0].x-=5,e.geometry.vertices[0].z-=5,e.geometry.vertices[1].x-=5,e.geometry.vertices[1].z+=5,e.geometry.vertices[4].x+=5,e.geometry.vertices[4].z+=5,e.geometry.vertices[5].x+=5,e.geometry.vertices[5].z-=5,e.updateMatrix(),t.merge(e.geometry,e.matrix);for(let s=0;s<4;s++){const e=new d([65,10,5],{x:-25,y:30+40*s,z:0}).mesh;e.rotation.z+=Math.PI/4*(s%2===0?-1:1),e.updateMatrix(),t.merge(e.geometry,e.matrix)}}for(let h=0;h<4;h++){const s=new n["p"](t,p.wood);s.position.x+=40*Math.cos(h*Math.PI/2),s.position.z+=40*Math.sin(h*Math.PI/2),s.rotation.y+=Math.PI/4-h*(Math.PI/2),s.updateMatrix(),e.merge(s.geometry,s.matrix)}const s=new d([80,10,80],{x:0,y:200,z:0}).mesh;s.rotation.y-=Math.PI/4,s.updateMatrix(),e.merge(s.geometry,s.matrix);const o=new n["p"](e,p.wood);o.name="stand",o.castShadow=!0,o.receiveShadow=!0,o.rotation.y+=Math.PI/4;const i=new n["i"];{const e=new n["p"](new n["e"](2,2,60,6,1));e.rotation.z=Math.PI/6,e.position.set(15,230,0),e.updateMatrix();const t=e.clone();t.rotation.z=-Math.PI/6,t.position.x=-15,t.updateMatrix();const s=new n["p"](new n["e"](4,4,6,6,1));s.position.set(0,255,0),s.updateMatrix(),i.merge(e.geometry,e.matrix),i.merge(t.geometry,t.matrix),i.merge(s.geometry,s.matrix)}const a=new n["p"](i,p.lightMetal);a.castShadow=!0,a.receiveShadow=!0;const r=new n["r"];{const e=new n["p"](new n["e"](2,2,100,6,1),p.lightMetal);e.position.set(0,260,0),e.rotation.x+=Math.PI/2,e.receiveShadow=!0,e.castShadow=!0;const t=new n["p"](new n["e"](3,3,5,6,1),p.lightMetal);t.position.set(0,260,0),t.receiveShadow=!0,t.castShadow=!0;const s=new n["w"],o=36,i=16;s.moveTo(0,i/2),s.lineTo(o/4,i),s.lineTo(o,i),s.lineTo(o-o/4,i/2),s.lineTo(o,0),s.lineTo(o/4,0),s.moveTo(0,i/2);const a={steps:2,depth:4,bevelEnabled:!1},h=new n["p"](new n["h"](s,a),p.red);h.castShadow=!0,h.receiveShadow=!0,h.position.set(-2,260-i/2,-25),h.rotation.y=Math.PI/2;const c=new n["r"],m=new n["i"];for(let n=0;n<12;n++){const e=new d([45,2,1],{x:4*Math.cos(n*(Math.PI/6)),y:4*Math.sin(n*(Math.PI/6)),z:0}).mesh;e.geometry.translate(20,0,0),e.geometry.vertices[1].z-=4,e.geometry.vertices[1].y+=10,e.rotation.z+=n*Math.PI/6,e.updateMatrix(),m.merge(e.geometry,e.matrix)}const w=new n["p"](m,p.lightMetal);w.castShadow=!0,w.receiveShadow=!0;const l=new n["p"](new n["e"](4,4,4,6,1),p.darkMetal);l.rotation.x=Math.PI/2,l.castShadow=!0,l.receiveShadow=!0,c.add(w,l),c.position.set(0,260,45),this.fan=c,r.add(e,t,h,c)}this.vane=r,this.mesh.add(o,a,r)}}class k{constructor(){const e=new n["i"],t=new d([5,410,5],{x:0,y:205,z:0}).mesh;e.merge(t.geometry,t.matrix);const s=t.clone();s.position.z-=30,s.updateMatrix(),e.merge(s.geometry,s.matrix);for(let o=0;o<40;o++){const t=new d([2,2,30],{x:0,y:10*o+10,z:-15}).mesh;e.merge(t.geometry,t.matrix)}this.mesh=new n["p"](e,p.wood),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class T{constructor(e=[[0,0,0]]){const t=new n["i"];for(let s=0;s<e.length;s++){const o=new d([30,40,30],{x:e[s][0],y:e[s][1],z:e[s][2]}).mesh;o.rotation.set(Math.random()*(2*Math.PI),Math.random()*(2*Math.PI),Math.random()*(2*Math.PI)),o.updateMatrix(),t.merge(o.geometry,o.matrix)}this.mesh=new n["p"](t,p.lightMetal),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class L{constructor(){this.mesh=new n["r"],this.mesh.name="middle-island",this.mesh.add(new d([400,400,400],{x:0,y:0,z:0},i.lightBrown,"middle-cube-basement").mesh),this.fans=[];const e=[{x:200,y:100,z:-100,rx:-Math.PI/2,rz:-Math.PI/2},{x:200,y:-50,z:100,rx:-Math.PI/2,rz:-Math.PI/2}];for(let n=0;n<e.length;n++){const t=new f;t.mesh.position.set(e[n].x,e[n].y,e[n].z),t.mesh.rotation.set(e[n].rx,0,e[n].rz),this.fans.push(t)}const t=[{x:190,z:-190,ry:0,mx:-1,mz:0,count:11},{x:190,z:185,ry:-Math.PI/2,mx:0,mz:-1,count:10},{x:-190,z:190,ry:0,mx:1,mz:0,count:4},{x:80,z:185,ry:Math.PI,mx:1,mz:0,count:3}],s=38;let o=new n["i"];for(let n=0;n<t.length;n++)for(let e=0;e<t[n].count;e++){const i=(new P).mesh;i.position.set(t[n].x+e*t[n].mx*s,210,t[n].z+e*t[n].mz*s),i.rotation.y=t[n].ry,i.updateMatrix(),o.merge(i.geometry,i.matrix)}const a=new n["p"](o,p.wood);a.name="fence-perimeter",a.castShadow=!0,a.receiveShadow=!0;const r=new b([1.2,2,1.2]).mesh;r.position.set(-140,200,140);const h=new S;h.mesh.position.set(100,200,-50),h.mesh.rotation.y+=Math.PI/16,this.windvane=h;const c=(new k).mesh;c.position.set(-158,200,-90),c.rotation.z=Math.PI/32;const m=[];for(let n=0;n<12;n++)m.push([250*Math.cos(n*Math.PI/24),0,-180*Math.sin(n*Math.PI/24)]);for(let n=0;n<8;n++)m.push([150*Math.cos(n*Math.PI/16)+10,0,-100*Math.sin(n*Math.PI/16)]);const w=new T(m).mesh;w.position.set(-210,200,170);const l=new n["i"],u=(new n["i"],[{type:"straight",position:[80,-475,125],rotation:[Math.PI/2,0,0]},{type:"connection",position:[80,-475,35],rotation:[Math.PI/2,0,0],options:{m:1}},{type:"arc",position:[80,-397.5,20],rotation:[-Math.PI/2,Math.PI/2,-Math.PI/2],options:{scale:1.1}},{type:"connection",position:[80,-300,-57.5],rotation:[0,0,0],options:{m:8}},{type:"straight",position:[-275,-75,80],rotation:[0,0,Math.PI/2]},{type:"connection",position:[-360,-75,80],rotation:[0,0,Math.PI/2],options:{m:1}},{type:"arc",position:[-370,0,80],rotation:[0,0,Math.PI/2],options:{scale:1.1}},{type:"connection",position:[-450,150,80],rotation:[0,0,0],options:{m:4}}]);for(let i=0;i<u.length;i++){let e;function x(e,t){e.position.set(t.position[0],t.position[1],t.position[2]),e.rotation.set(t.rotation[0],t.rotation[1],t.rotation[2]),e.updateMatrix()}switch(u[i].type){case"straight":e=new n["p"](new n["e"](35,35,150,8,1));break;case"connection":e=new y(u[i].options.m).mesh;break;case"arc":e=new g(!1,!1).mesh,e.scale.set(u[i].options.scale,u[i].options.scale,u[i].options.scale);break}x(e,u[i]),l.merge(e.geometry,e.matrix)}const M=new n["p"](l,p.lightMetal);M.castShadow=!0,M.receiveShadow=!0,this.mesh.add(a,r,h.mesh,c,w,...this.fans.map(e=>e.mesh),M)}}class j{constructor(e,t,s=5,o=8){this.radius=s;const i=new n["c"]([new n["z"](0,0,0),new n["z"](0,0,e),new n["z"](0,t,e+s)]),a=new n["w"];a.moveTo(this.radius*Math.cos(0),this.radius*Math.sin(0));for(let n=1;n<16;n++)a.lineTo(this.radius*Math.cos(n*(2*Math.PI)/16),this.radius*Math.sin(n*(2*Math.PI)/16));this.mesh=new n["p"](new n["h"](a,{curveSegments:8,steps:o,bevelEnabled:!1,extrudePath:i}))}}class E{constructor(){this.mesh=new n["r"],this.mesh.name="house";const e={x:140,y:50,z:140},t=new d([e.x,e.y,e.z],{x:0,y:e.y/2,z:-100},i.brick,"first-floor").mesh;t.castShadow=!0,t.receiveShadow=!0;const s=new d([e.x+10,e.y/10,e.z+10],{x:0,y:e.y/20,z:-100},i.darkMetal,"basement").mesh;s.castShadow=!0,s.receiveShadow=!0;const o=new n["r"],a=new n["p"](new n["e"](e.x-40,e.x-35,5,4,1),p.brick);a.position.y-=2.5,a.castShadow=!0,a.receiveShadow=!0;const r=new n["p"](new n["e"](20,20,5,4,1),p.brick);r.position.y+=122.5,r.castShadow=!0,r.receiveShadow=!0;const h=new n["p"](new n["e"](15,15,5,4,1),p.brick);h.position.y+=155,h.castShadow=!0,h.receiveShadow=!0,o.add(a,r,h),o.position.set(0,e.y,-100),o.rotation.y+=Math.PI/4;const c=new n["i"],m=[{y:20,rT:50,rB:100,height:40},{y:70,rT:20,rB:50,height:60},{y:110,rT:15,rB:20,height:20},{y:130,rT:30,rB:15,height:10},{y:145,rT:10,rB:30,height:20},{y:165,rT:1,rB:10,height:20}];for(let i=0;i<m.length;i++){const e=new n["p"](new n["e"](m[i].rT,m[i].rB,m[i].height,4,1));e.position.y+=m[i].y,e.updateMatrix(),c.merge(e.geometry,e.matrix)}const w=new n["p"](c,p.roof);w.castShadow=!0,w.receiveShadow=!0,o.add(w);const l=new n["i"],y=[{x:0,y:100,z:-70,width:30,height:50},{x:-10,y:120,z:-80,width:20,height:80}];for(let n=0;n<y.length;n++){const e=new j(y[n].width,y[n].height).mesh;e.position.set(y[n].x,y[n].y,y[n].z),e.updateMatrix(),l.merge(e.geometry,e.matrix)}const g=new n["p"](l,p.lightMetal);g.castShadow=!0,g.receiveShadow=!0;const u=new n["w"];u.moveTo(15,-15),u.lineTo(15,15);for(let n=0;n<8;n++)u.lineTo(15*Math.cos(n*Math.PI/8),10*Math.sin(n*Math.PI/8)+15);u.lineTo(-15,-15),u.moveTo(-15,15);const x={steps:2,depth:4,bevelEnabled:!1},M=new n["p"](new n["h"](u,x),p.wood);M.castShadow=!0,M.receiveShadow=!0,M.position.set(70,15,-125),M.rotation.y=Math.PI/2;const z=new n["w"];z.moveTo(0,0),z.absarc(0,0,15,0,2*Math.PI);const v=new n["s"];v.moveTo(0,0),v.absarc(0,0,12,0,2*Math.PI),z.holes.push(v);const f=new n["h"](z,{depth:4,steps:1,bevelEnabled:!1}),P=new d([1,30,4]),b=new d([30,1,4]);f.merge(P.geometry,P.matrix),f.merge(b.geometry,b.matrix);const I=new n["p"](f,p.wood);I.position.set(70,25,-65),I.rotation.y=Math.PI/2,I.scale.x=1.15,I.receiveShadow=!0,I.castShadow=!0,this.mesh.add(s,t,M,I,o,g)}}class O{constructor(){this.mesh=new n["r"],this.mesh.name="top-island",this.mesh.add(new d([400,400,400],{x:0,y:0,z:0},i.lightGreen).mesh),this.fans=[];const e=[{x:-100,y:100},{x:100,y:-100}];for(let n=0;n<e.length;n++){const t=new f;t.mesh.position.set(e[n].x,e[n].y,200),t.mesh.rotation.set(Math.PI/2,Math.PI,0),this.fans.push(t)}this.fans.map(e=>{this.mesh.add(e.mesh)});const t=(new E).mesh;t.position.x+=70,t.position.y+=200,t.position.z+=5,t.rotation.y-=Math.PI/16,this.mesh.add(t);let s=new n["i"];const o=[{x:190,z:187,ry:0,mx:-1,mz:0,count:10},{x:-187,z:185,ry:-Math.PI/2,mx:0,mz:-1,count:10},{x:-187,z:-187,ry:Math.PI,mx:1,mz:0,count:10},{x:190,z:118,ry:Math.PI/2,mx:0,mz:1,count:2},{x:187,z:-155,ry:-Math.PI/2,mx:0,mz:-1,count:1}],a=38;for(let n=0;n<o.length;n++)for(let e=0;e<o[n].count;e++){const t=(new P).mesh;t.position.set(o[n].x+e*o[n].mx*a,210,o[n].z+e*o[n].mz*a),t.rotation.y=o[n].ry,t.updateMatrix(),s.merge(t.geometry,t.matrix)}const r=new n["p"](s,p.wood);r.name="fence-perimeter",r.castShadow=!0,r.receiveShadow=!0,this.mesh.add(r);const h=[{x:120,y:200,z:140,sx:1,sy:1,sz:1},{x:15,y:200,z:140,sx:1,sy:1.2,sz:1},{x:-100,y:200,z:140,sx:1.1,sy:1.5,sz:1.1},{x:-90,y:200,z:-80,sx:1.6,sy:1.8,sz:1.6}];for(let n=0;n<h.length;n++){const e=new b([h[n].sx,h[n].sy,h[n].sz]).mesh;e.position.set(h[n].x,h[n].y,h[n].z),this.mesh.add(e)}const c=(new g).mesh;c.position.x-=60,c.position.y+=215,c.position.z+=40,this.mesh.add(c),this.mesh.position.set(-400,400,0)}}class q{constructor(){this.mesh=new n["r"],this.mesh.name="zeppelin-balloon";const e=200,t=12,s=[];for(let r=0;r<t;r++)s.push(new n["y"](e*Math.sin(r*(Math.PI/t)),e*Math.cos(r*(Math.PI/t))*2));const o=new n["p"](new n["k"](s),p.balloon);o.receiveShadow=!0;const i=new n["w"];i.moveTo(s[0].y,s[0].x);for(let n=1;n<s.length-1;n++)i.lineTo(s[n].y,s[n].x);i.moveTo(s[s.length]);const a=new n["p"](new n["h"](i,{steps:1,depth:20,bevelEnabled:!1}),p.lightMetal);a.rotation.z-=Math.PI/2,a.position.set(5,0,-10),a.castShadow=!0,a.receiveShadow=!0,this.mesh.add(o,a),this.mesh.rotation.x=Math.PI/2}}class B{constructor(e,t,s=15){this.radius=e;const o=new n["c"](t),i=new n["w"];i.moveTo(this.radius*Math.cos(0),this.radius*Math.sin(0));for(let n=1;n<16;n++)i.lineTo(this.radius*Math.cos(n*(2*Math.PI)/16),this.radius*Math.sin(n*(2*Math.PI)/16));this.mesh=new n["p"](new n["h"](i,{steps:s,bevelEnabled:!1,extrudePath:o})),this.mesh.name="hose"}}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class H{constructor(e=!0,t=!1){C(this,"rotate",e=>{this.propeller.rotation.y+=e}),this.mesh=new n["r"],this.mesh.name="zeppelin-fan";const s=40,o=new n["i"],i=new n["p"](new n["e"](s,s-5,2*s,16,1)),a=[];for(let d=0;d<16;d++)a.push(new n["y"](s*Math.cos(d*(Math.PI/32)),s*Math.sin(d*(Math.PI/32))/3));const r=new n["p"](new n["k"](a,8));r.position.y+=s,r.updateMatrix();const h=new n["p"](new n["e"](5,5,120,6,1));if(h.position.set(-60,0,0),h.rotation.z-=Math.PI/2,h.updateMatrix(),e){const e=new d([15,45,1]).mesh;e.position.set(35,5,15),e.updateMatrix();const i=e.clone();e.position.z-=30,e.updateMatrix(),o.merge(e.geometry,e.matrix),o.merge(i.geometry,i.matrix);for(let t=-2;t<4;t++){let e=new n["p"](new n["e"](4,4,30,3,1));e.rotation.set(Math.PI/2,Math.PI/3,0),e.position.set(s+t/2-2,8*t,0),e.updateMatrix(),o.merge(e.geometry,e.matrix)}let a=t?-1:1;const r=new B(4,[new n["z"](-10,28,35*a),new n["z"](0,5,50*a),new n["z"](10,-4,55*a),new n["z"](20,-8,50*a),new n["z"](24,-12,40*a),new n["z"](20,-16,25*a)]).mesh;o.merge(r.geometry,r.matrix)}const c=new n["p"](new n["e"](5,10,15,6,1,!0));c.position.y+=58,c.updateMatrix(),o.merge(i.geometry,i.matrix),o.merge(r.geometry,r.matrix),o.merge(h.geometry,h.matrix),o.merge(c.geometry,c.matrix);const m=new n["p"](o,p.lightMetal);m.castShadow=!0,m.receiveShadow=!0;const w=new n["i"],l=new n["p"](new n["e"](4,4,280,6,1));l.position.set(0,100,0),l.updateMatrix();const y=new n["p"](new n["e"](12,5,10,6,1));y.position.set(0,228,0),y.updateMatrix();const g=new n["i"],u=new n["w"];u.moveTo(0,-5);for(let n=-4;n<4;n++)u.lineTo(120+10*Math.cos(n*Math.PI/8),10*Math.sin(n*Math.PI/8));u.lineTo(0,5);for(let d=0;d<4;d++){let e=new n["p"](new n["h"](u,{curveSegments:8,steps:1,depth:2,bevelEnabled:!1}));e.rotation.z+=d*(Math.PI/2),e.updateMatrix(),g.merge(e.geometry,e.matrix)}const x=new n["p"](g,p.white);x.position.set(0,235,0),x.geometry.applyMatrix4((new n["o"]).makeRotationX(Math.PI/2)),x.updateMatrix(),w.merge(l.geometry,l.matrix),w.merge(y.geometry,y.matrix),w.merge(x.geometry,x.matrix),this.propeller=new n["p"](w,p.white),this.propeller.castShadow=!0,this.propeller.receiveShadow=!0,this.mesh.add(m,this.propeller)}}class N{constructor(){const e=new n["i"],t=new n["i"],s=30,o=new n["p"](new n["e"](s,s,70,16,1)),i=[];for(let d=0;d<16;d++)i.push(new n["y"](s*Math.cos(d*(Math.PI/32)),s*Math.sin(d*(Math.PI/32))/2));const a=new n["p"](new n["k"](i,12));a.position.y=35,a.updateMatrix();const r=a.clone();r.rotation.z+=Math.PI,r.position.y=-35,r.updateMatrix();const h=new n["p"](new n["e"](8,8,10,8,1));h.position.y+=50,h.updateMatrix(),t.merge(o.geometry,o.matrix),t.merge(a.geometry,a.matrix),t.merge(r.geometry,r.matrix),t.merge(h.geometry,h.matrix);const c=new n["p"](t);c.position.z+=35,c.updateMatrix();const m=c.clone();m.position.z-=70,m.updateMatrix();const w=new d([5,4,80]).mesh;w.position.y+=52,w.updateMatrix();const l=new n["p"](new n["e"](2,2,120,6,1));l.position.set(-60,52,0),l.rotation.z-=Math.PI/2,l.updateMatrix(),e.merge(c.geometry,c.matrix),e.merge(m.geometry,m.matrix),e.merge(w.geometry,w.matrix),e.merge(l.geometry,l.matrix),this.mesh=new n["p"](e,p.lightMetal),this.mesh.name="fuel-tanks",this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class G{constructor(){D(this,"rotate",e=>{this.propeller.rotation.z+=e}),this.mesh=new n["r"],this.mesh.name="turbine";const e=new n["i"],t=new n["w"];t.moveTo(0,0),t.absarc(0,0,60,0,2*Math.PI);const s=new n["s"];s.moveTo(0,0),s.absarc(0,0,55,0,2*Math.PI),t.holes.push(s);const o=new n["p"](new n["h"](t,{depth:80,steps:1,bevelEnabled:!1}));o.position.z-=40,o.updateMatrix();const i=new d([150,5,30],{x:-130,y:0,z:0}).mesh,a=new d([118,5,10]).mesh;a.rotation.z+=Math.PI/4,a.updateMatrix();const r=new n["p"](new n["e"](20,20,50,8,1));r.rotation.x+=Math.PI/2,r.updateMatrix(),e.merge(o.geometry,o.matrix),e.merge(i.geometry,i.matrix),e.merge(a.geometry,a.matrix),e.merge(r.geometry,r.matrix);const h=new n["p"](e,p.darkMetal);h.castShadow=!0,h.receiveShadow=!0;const c=new n["i"];for(let n=0;n<12;n++){const e=new d([50,2,1],{x:4*Math.cos(n*(Math.PI/6)),y:4*Math.sin(n*(Math.PI/6)),z:30}).mesh;e.geometry.translate(20,0,0),e.geometry.vertices[1].z-=8,e.geometry.vertices[1].y+=10,e.rotation.z+=n*Math.PI/6,e.updateMatrix(),c.merge(e.geometry,e.matrix)}const m=new n["p"](new n["e"](10,1,10,8,1));m.rotation.x-=Math.PI/2,m.position.z+=35,m.updateMatrix(),c.merge(m.geometry,m.matrix),this.propeller=new n["p"](c,p.lightMetal),this.propeller.castShadow=!0,this.propeller.receiveShadow=!0,this.mesh.add(h,this.propeller)}}class W{constructor(){this.mesh=new n["r"],this.mesh.name="cabine";const e=new n["p"](new n["e"](150,100,80,16,1),p.darkMetal);e.scale.x=.5,e.updateMatrix(),this.turbines=[];const t=[{x:200,y:-50,z:0,rx:0,ry:0,rz:0},{x:-200,y:-50,z:0,rx:Math.PI,ry:Math.PI,rz:Math.PI/4}];for(let s=0;s<t.length;s++){const e=new G;e.mesh.position.set(t[s].x,t[s].y,t[s].z),e.mesh.rotation.set(t[s].rx,t[s].ry,t[s].rz),e.mesh.rotation.z-=Math.PI/8,this.turbines.push(e)}this.mesh.add(e,...this.turbines.map(e=>e.mesh)),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class X{constructor(){this.mesh=new n["r"],this.mesh.name="zeppelin",this.mesh.position.set(-400,550,-900);const e=(new q).mesh;this.fans=[];const t=[{x:250,y:0,z:200,ry:0,full:!0,mirrored:!1},{x:240,y:0,z:-200,ry:0,full:!0,mirrored:!0},{x:-250,y:0,z:200,ry:Math.PI,full:!1,mirrored:!1},{x:-240,y:0,z:-200,ry:Math.PI,full:!1,mirrored:!1}];for(let n=0;n<t.length;n++){const e=new H(t[n].full,t[n].mirrored);e.mesh.position.set(t[n].x,t[n].y,t[n].z),e.mesh.rotation.y+=t[n].ry,this.fans.push(e)}const s=(new N).mesh;s.rotation.z-=Math.PI/8,s.position.set(220,-65,-50);const o=new n["i"],i=[[new n["z"](200,-110,-15),new n["z"](210,-150,20),new n["z"](195,-10,60),new n["z"](195,-50,100),new n["z"](220,0,160)],[new n["z"](200,-110,-85),new n["z"](210,-160,-140),new n["z"](220,20,-180)]];for(let n=0;n<i.length;n++){const e=new B(4,i[n],40).mesh;o.merge(e.geometry,e.matrix)}const a=new n["p"](o,p.lightMetal);a.castShadow=!0,a.receiveShadow=!0,this.cabine=new W,this.cabine.mesh.position.y-=210,this.mesh.add(this.cabine.mesh,e,...this.fans.map(e=>e.mesh),s,a)}}function Y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _{constructor(e=[new n["z"](0,0,0),new n["z"](1,1,1)],t=10){Y(this,"moveWaves",()=>{const e=this.mesh.geometry.vertices,t=e.length;for(let s=0;s<t;s++){const t=e[s],o=this.waves[s];t.x=o.x-Math.cos(o.ang)*o.amp,t.y=o.y+Math.sin(o.ang)*o.amp,o.ang+=o.speed}this.mesh.geometry.verticesNeedUpdate=!0});const s=new n["c"](e);var o={steps:t,bevelEnabled:!1,extrudePath:s};const i=new n["w"],a=36,r=16;i.moveTo(a*Math.cos(0),a*Math.sin(0));for(let n=1;n<r;n++)i.lineTo(a*Math.cos(n*(2*Math.PI)/r),a*Math.sin(n*(2*Math.PI)/r)/1.5);const h=new n["h"](i,o),c=p.water;h.mergeVertices();const m=h.vertices.length;this.waves=[];for(let n=0;n<m;n++){const e=h.vertices[n];this.waves.push({y:e.y,x:e.x,z:e.z,ang:Math.random()*Math.PI*2,amp:5+15*Math.random(),speed:.032+.064*Math.random()})}this.mesh=new n["p"](h,c),this.mesh.receiveShadow=!0,this.mesh.castShadow=!0}}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ${constructor(){F(this,"turnLights",e=>{e?(this.light.intensity=.95,this.light.distance=1e3,this.light.decay=2,this.light.castShadow=!0,this.light.shadow.mapSize.width=128,this.light.shadow.mapSize.height=128):(this.light.intensity=0,this.light.distance=1,this.light.decay=1,this.light.castShadow=!1,this.light.shadow.mapSize.width=8,this.light.shadow.mapSize.height=8)}),this.mesh=new n["r"],this.mesh.name="lamp-post";const e=new d([8,100,8]).mesh;e.geometry.vertices[2].x+=1,e.geometry.vertices[2].z+=1,e.geometry.vertices[3].x+=1,e.geometry.vertices[3].z-=1,e.geometry.vertices[6].x-=1,e.geometry.vertices[6].z-=1,e.geometry.vertices[7].x-=1,e.geometry.vertices[7].z+=1,e.updateMatrix();const t=new d([6,6,40],{x:0,y:45,z:12}).mesh,s=new d([4,4,20],{x:0,y:38,z:10}).mesh;s.rotation.x-=Math.PI/4,s.updateMatrix();const o=new n["i"];o.merge(e.geometry,e.matrix),o.merge(t.geometry,t.matrix),o.merge(s.geometry,s.matrix);const i=new n["p"](o,p.wood);i.castShadow=!0,i.receiveShadow=!0;const a=new n["p"](new n["e"](1,6,4,8),p.darkMetal);a.castShadow=!0,a.receiveShadow=!0,a.position.set(0,40,30),this.light=new n["u"](16636818,0,0,0),this.light.castShadow=!1,this.light.shadow.mapSize.width=16,this.light.shadow.mapSize.height=16,this.light.position.set(-10,30,30),this.mesh.add(i,a,this.light)}}const A={sunrise:{hemisphereLight:{intensity:.6},ambientLight:{intensity:.3},sunLight:{intensity:.75,position:[630,210,-110],color:16759431}},midday:{hemisphereLight:{intensity:.9},ambientLight:{intensity:.5},sunLight:{intensity:.75,position:[-280,695,350],color:16777215}},sunset:{hemisphereLight:{intensity:.6},ambientLight:{intensity:.3},sunLight:{intensity:.75,position:[-290,560,900],color:16759431}},midnight:{hemisphereLight:{intensity:.025},ambientLight:{intensity:.025},sunLight:{intensity:.025,position:[-420,800,370],color:15658734}}},R=[6,8,17,20];function J(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class U{constructor(){J(this,"get",(e,t)=>this.localData[this.lang][e][t]),this.lang=navigator.language.substring(0,2)||"en",this.localData={en:{weekday:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],month:["january","february","march","aril","may","june","july","august\t","september","october","november","december"]},ru:{weekday:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],month:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]}}}}function V(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Z{constructor(){V(this,"update",()=>{if(Date.now()-this.now>6e4){if(this.now=new Date,this.hours=("0"+this.now.getHours()).slice(-2),this.minutes=("0"+this.now.getMinutes()).slice(-2),this.date=this.now.getDate(),this.month=this.lang.get("month",this.now.getMonth()),this.day=this.lang.get("weekday",this.now.getDay()),!this.timeNode)return;this.timeNode.innerHTML=`${this.hours}:${this.minutes}`,this.dayNode.innerHTML=`${this.date} ${this.month}, ${this.day}`}}),V(this,"getHours",()=>this.hours),this.now=new Date(0),this.lang=new U,this.timeNode=document.getElementById("time"),this.dayNode=document.getElementById("day"),this.update()}}let K=()=>{let e=window.innerWidth,t=window.innerHeight;window.addEventListener("resize",()=>{e=window.innerWidth,t=window.innerHeight,m.setSize(e,t),c.aspect=e/t,c.updateProjectionMatrix()},!1);const s=document.getElementById("scene"),i=s.querySelector("canvas"),h=a(),c=r(e,t),m=w(i,e,t,!0),d=new n["j"](11184810,0,.9),y=new n["a"](4210752,.5),g=l();function u(e){d.intensity=A[e].hemisphereLight.intensity,y.intensity=A[e].ambientLight.intensity,g.intensity=A[e].sunLight.intensity,g.color.setHex(A[e].sunLight.color),g.position.set(...A[e].sunLight.position),"midnight"===e?(S.map(e=>e.turnLights(!0)),p.line.color.setHex(1118481)):(S.map(e=>e.turnLights()),p.line.color.setHex(14465972))}const x=new z,M=new L,v=new O,f=new X,P=new n["r"];P.name="islands",P.add(x.mesh,M.mesh,v.mesh);const b=[],I=[{points:[new n["z"](-450,690,40),new n["z"](-370,615,40),new n["z"](-195,600,40),new n["z"](-180,210,40),new n["z"](-60,210,50),new n["z"](-20,210,100),new n["z"](15,205,210),new n["z"](0,-180,230),new n["z"](0,-180,570)],steps:25},{points:[new n["z"](0,-250,665),new n["z"](0,-380,665)],steps:4},{points:[new n["z"](-450,90,80),new n["z"](-450,0,80)],steps:2}];for(let o=0;o<I.length;o++)b.push(new _(I[o].points,I[o].steps));b.map(e=>P.add(e.mesh));let S=[];const k=[{x:-215,y:650,z:-185,ry:0},{x:-215,y:650,z:185,ry:Math.PI},{x:180,y:250,z:-175,ry:-Math.PI/4},{x:170,y:-150,z:400,ry:-Math.PI/2}];for(let o=0;o<k.length;o++){const e=new $;e.mesh.position.set(k[o].x,k[o].y,k[o].z),e.mesh.rotation.y+=k[o].ry,S.push(e)}P.add(...S.map(e=>e.mesh)),h.add(d,y,g,P,f.mesh),h.rotation.x=Math.PI/4,h.rotation.y=-Math.PI/4;const T=new n["d"];let j;const E={x:e/2,y:t/2,nX:0,nY:0};document.addEventListener("mousemove",s=>{E.nX=s.clientX/e*2-1,E.nY=1-s.clientY/t*2});const q={x:0,y:0};window.addEventListener("deviceorientation",e=>{e.beta&&e.gamma&&(q.x=e.beta,q.y=e.gamma,q.x>90&&(q.x=90),q.x<-90&&(q.x=-90),q.y>45&&(q.y=45),q.y<-45&&(q.y=-45),E.nY=q.x/90*2-1,E.nX=1-q.y/45*2)},!0);const B=new Z;let C=+B.getHours();function H(e){e>=R[0]&&e<R[1]?(s.className="sunrise",u("sunrise")):e>=R[1]&&e<R[2]?(s.className="midday",u("midday")):e>=R[2]&&e<R[3]?(s.className="sunset",u("sunset")):(s.className="midnight",p.line.color.setHex(1118481),u("midnight"))}H(C);const N=M.windvane.vane;let D=.05,G=0,W=()=>{j=T.getDelta(),M.fans[0].rotate(5*j),M.fans[1].rotate(6*j),v.fans[0].rotate(-2*j),v.fans[1].rotate(-4*j),M.windvane.rotateFan(j),b[0].moveWaves(),b[1].moveWaves(),b[2].moveWaves(),f.fans[0].rotate(20*j),f.fans[1].rotate(21*j),f.fans[2].rotate(19*j),f.fans[3].rotate(22*j),f.cabine.turbines[0].rotate(.25*j),f.cabine.turbines[1].rotate(.25*j),f.mesh.position.y+=Math.sin(G*Math.PI),P.position.y+=Math.cos(G*Math.PI)/2,N.rotation.y+=Math.cos(G*Math.PI)*D/10,G+=.01,h.rotation.x+=(-E.nY*(Math.PI/10)+Math.PI/4-h.rotation.x)*D,h.rotation.y+=(E.nX*(Math.PI/8)-Math.PI/4-h.rotation.y)*D,m.render(h,c),B.update()},Y=null,F=()=>{Y=requestAnimationFrame(F),W()},J=()=>{F()},U=()=>{cancelAnimationFrame(Y)},V=new o["a"]({autoplace:!1,hideable:!1});V.closed=!0;const K=document.getElementById("gui");K.appendChild(V.domElement);let Q={cameraControls:!0,isOverride:!1,sunrise:()=>H(7),midday:()=>H(11),sunset:()=>H(19),midnight:()=>H(0)},ee=V.addFolder("daytime");return ee.add(Q,"sunrise"),ee.add(Q,"midday"),ee.add(Q,"sunset"),ee.add(Q,"midnight"),ee.open(),{draw:W,start:J,stop:U}};var Q=K;let{draw:ee,start:te,stop:se}=Q(),oe=(()=>{try{return window.self!==window.top}catch(e){return!0}})();if(oe){ee();let e=["http://localhost:8080","https://nextgtrgod.github.io"];window.addEventListener("message",t=>{if(e.includes(t.origin))switch(t.data){case"start":te();break;case"stop":se();break}})}else te();document.body.classList.add("loaded");let ne=!oe&&!1,ie=document.getElementById("gui");ne&&ie.classList.add("visible"),document.addEventListener("keyup",({keyCode:e})=>{72===e&&ie.classList.toggle("visible")}),console.log("press h to show controls")},fb98:function(e,t,s){}});
//# sourceMappingURL=app.bc7cbbdb.js.map