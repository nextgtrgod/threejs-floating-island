{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/clamp.js","webpack:///./src/modules/colors.js","webpack:///./src/modules/createScene.js","webpack:///./src/modules/createCamera.js","webpack:///./src/modules/createRenderer.js","webpack:///./src/modules/createSun.js","webpack:///./src/modules/Cube.js","webpack:///./src/modules/materials.js","webpack:///./src/scene/pipeConnection.js","webpack:///./src/scene/pipeCorner.js","webpack:///./src/scene/BottomIsland/chimney.js","webpack:///./src/scene/BottomIsland/fence.js","webpack:///./src/scene/BottomIsland/filter.js","webpack:///./src/scene/BottomIsland/BottomIsland.js","webpack:///./src/scene/fan.js","webpack:///./src/scene/fence.js","webpack:///./src/scene/pine.js","webpack:///./src/scene/MiddleIsland/Windvane.js","webpack:///./src/scene/MiddleIsland/Ladder.js","webpack:///./src/scene/stones.js","webpack:///./src/scene/MiddleIsland/MiddleIsland.js","webpack:///./src/scene/TopIsland/chimney.js","webpack:///./src/scene/TopIsland/House.js","webpack:///./src/scene/TopIsland/TopIsland.js","webpack:///./src/scene/Zeppelin/Balloon.js","webpack:///./src/scene/Zeppelin/hose.js","webpack:///./src/scene/Zeppelin/Fan.js","webpack:///./src/scene/Zeppelin/Tanks.js","webpack:///./src/scene/Zeppelin/Turbine.js","webpack:///./src/scene/Zeppelin/Cabine.js","webpack:///./src/scene/Zeppelin/Zeppelin.js","webpack:///./src/modules/Water.js","webpack:///./src/modules/LampPost.js","webpack:///./src/modules/lightParams.js","webpack:///./src/modules/daytimeParams.js","webpack:///./src/modules/Time.js","webpack:///./src/modules/init.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","clamp","min","val","max","Infinity","Math","colors","lightGreen","darkGreen","lightBrown","darkBronw","darkGrey","darkMetal","lightMetal","white","wood","brick","roof","sky","red","rust","water","balloon","glass","createScene","scene","Scene","createCamera","width","height","aspectRatio","fieldOfView","nearPlane","farPlane","camera","PerspectiveCamera","position","set","rotation","getContext","canvas","WEBGL","isWebGL2Available","createRenderer","W","H","dpi","devicePixelRatio","antialias","renderer","WebGLRenderer","context","alpha","powerPreference","setSize","setPixelRatio","shadowMap","enabled","createSun","sunLight","DirectionalLight","castShadow","shadow","left","right","top","bottom","near","far","mapSize","Cube","constructor","size","x","y","z","color","random","this","depth","geometry","BoxGeometry","material","MeshPhongMaterial","flatShading","mesh","Mesh","receiveShadow","updateMatrix","materials","green","specular","shininess","side","DoubleSide","transparent","opacity","line","LineBasicMaterial","linewidth","override","wireframe","PipeConnection","isFrontRing","isBackRing","radius","segmentsCount","needMaterial","Geometry","base","CylinderGeometry","PI","merge","matrix","frontRing","TorusGeometry","backRing","segmentGeometry","segment","cos","sin","PipeCorner","isBottomConnection","isTopConnection","Object3D","singleGeometry","arcGeometry","arc","topConnection","bottomConnection","pipeCorner","Chimney","arcShape","Shape","moveTo","absarc","holePath","Path","holes","extrudeSettings","curveSegments","steps","bevelEnabled","ExtrudeGeometry","Fence","isClosed","gridHeight","angle","atan","pillarsGeometry","pillar","anotherPillar","clone","bar","pillars","helixGeometry","vertices","Vector3","helix","Line","lineGeometry","step","diff","tan","grid","LineSegments","add","Filter","linesGeometry","lines","BottomIsland","chimneyCombinedGeometry","chimneysParams","scale","chimney","bigChimneyGeometry","chimneyInner","chimneyOuter","bigChimney","chimneyCombined","pipesParams","fenceParams","fence","filter","Fan","propeller","staticGroupGeometry","pipe","engine","staticGroup","hubGeometry","hub","blades","bladeGeometry","blade","translate","close","centerBoard","topBoard","bottomBoard","paling","Pine","trunkGeometry","trunk","branchesGeometry","R","branchesLevel","branches","Windvane","fan","standGeometry","pillarGeometry","shaft","beam","platform","stand","vaneSupportGeometry","bevel","anotherBevel","vaneSupport","vane","axle","tailShape","tailWidth","tailHeight","lineTo","tail","fanBladesGeometry","fanBlades","fanCenter","Ladder","ladderGeometry","stair","Stones","coordinates","stonesGeometry","stone","MiddleIsland","fans","fansParams","rx","rz","ry","mx","mz","count","fenceWidth","fenceGeometry","fencePerimeter","pine","windvane","ladder","stonesCoordinates","stones","pipesGeometry","type","options","setParams","el","params","pipes","map","spline","CatmullRomCurve3","pipeShape","extrudePath","House","firstFloor","basement","roofLow","roofMiddle","roofTop","roofCombinedGeometry","roofParams","rT","rB","roofPart","roofCombined","chimneyParams","doorShape","door","windowShape","windowGeometry","horizontalFrame","verticalFrame","houseWindow","TopIsland","house","pineParams","sx","sy","sz","Balloon","pointsCount","points","Vector2","LatheGeometry","frameShape","frame","Hose","shape","full","mirrored","engineRadius","engineGeometry","engineMain","engineTopPoints","engineTop","engineTier","sideLeft","sideRight","engineSegment","hose","engineHub","propellerGeometry","bladesHub","bladesGeometry","bladeShape","applyMatrix4","Matrix4","makeRotationX","Tanks","tanksGeometry","tankGeometry","tankRadius","tankCenter","tankTopPoints","tankTop","tankBottom","tankHub","tankLeft","tankRight","tier","Turbine","turbineGeometry","turbineOuterShape","turbineOuter","engineSupport","turbine","propellerHub","Cabine","cabine","turbines","turbineParams","Zeppelin","tanks","hosesGeometry","hosesParams","hoses","Water","verts","v","vprops","waves","ang","amp","speed","verticesNeedUpdate","circle","cirlceRadius","circleSegments","mergeVertices","LampPost","status","light","intensity","distance","decay","baseVertical","baseHorizontal","baseAngle","baseGeometry","lamp","PointLight","lightParams","sunrise","hemisphereLight","ambientLight","midday","sunset","midnight","breakpoints","Time","Date","now","hours","getHours","timeNode","document","getElementById","dayNode","update","init","innerWidth","innerHeight","addEventListener","aspect","updateProjectionMatrix","draw","container","querySelector","HemisphereLight","AmbientLight","setLights","dayTime","setHex","lampPosts","lampPost","turnLights","bottomIsland","middleIsland","topIsland","zeppelin","islands","river","riverParams","riverPart","lampPostParams","clock","Clock","delta","pointer","matchMedia","matches","clientX","clientY","gyroscope","checkOrientation","beta","gamma","initial","DeviceOrientationEvent","requestPermission","button","createElement","id","then","permissionState","classList","catch","console","log","body","appendChild","time","updateLights","className","easing","getDelta","rotate","rotateFan","moveWaves","render","rafId","requestAnimationFrame","start","stop","cancelAnimationFrame","gui","dat","autoplace","hideable","closed","guiContainer","domElement","cameraControls","isOverride","dayTimeGUI","addFolder","open","URL","location","searchParams","parseInt","isIframe","self","e","trusted","includes","origin","controls","process","keyCode","toggle"],"mappings":"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","file":"js/app.202e9505.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\nlet clamp = (min, val, max = Infinity) => Math.min(Math.max(min, val), max)\n\nexport default clamp\n","\nexport const colors = {\n\tlightGreen: 0x9db614,\n\tdarkGreen:\t0x59ac27,\n\n\tlightBrown:\t0xffdba9,\n\tdarkBronw:\t0xd0957f,\n\n\tdarkGrey:\t0x72636a,\n\tdarkMetal:\t0x72636a,\n\tlightMetal: 0xdcbbb4,\n\t\n\twhite: \t\t0xfdfcf7,\n\twood:\t\t0xa76e17,\n\tbrick:\t\t0xd6b48e,\n\troof:\t\t0x793156,\n\tsky:\t\t0x80b6dc,\n\n\tred:\t\t0xff0000,\n\trust:\t\t0xb98475,\n\n\twater:\t\t0x80b6dc,\n\n\tballoon:\t0xd9d9d9,\n\tglass:\t\t0xeeeeee\n}","import { Scene, Fog } from 'three';\n\nimport { colors } from './colors';\n\n\nexport default function createScene() {\n\n\tlet scene = new Scene();\n\t// scene.fog = new Fog(colors.sky, 0, 10000);\n\n\treturn scene;\n}","import { PerspectiveCamera } from 'three';\n\n\nexport default function createCamera(width, height) {\n\n\tlet aspectRatio = width / height;\n\tconst fieldOfView = 50;\n\tconst nearPlane = 1;\n\tconst farPlane = 3500;\n\n\tlet camera = new PerspectiveCamera(\n\t\tfieldOfView,\n\t\taspectRatio,\n\t\tnearPlane,\n\t\tfarPlane\n\t);\n\n\tcamera.position.set(0, -350, 2150);\n\tcamera.rotation.set(.20, .036, 0);\n\n\treturn camera;\n}","import { WebGLRenderer } from 'three'\nimport { WEBGL } from 'three/examples/jsm/WebGL.js'\n\nlet getContext = canvas => {\n\tif (WEBGL.isWebGL2Available()) return canvas.getContext('webgl2')\n\n\treturn canvas.getContext('webgl') || canvas.getContext('experimental-webgl')\n}\n\nlet createRenderer = ({\n\tcanvas,\n\tW,\n\tH,\n\tdpi = window.devicePixelRatio,\n\tantialias = true,\n}) => {\n\n\tlet renderer = new WebGLRenderer({\n\t\tcanvas,\n\t\tcontext: getContext(canvas),\n\t\tantialias: antialias,\n\t\talpha: true,\n\t\tpowerPreference: 'high-performance',\n\t})\n\trenderer.setSize(W, H)\n\trenderer.setPixelRatio(dpi)\n\n\trenderer.shadowMap.enabled = true\n\t// renderer.shadowMap.renderReverseSided = true\n\n\treturn renderer\n}\n\nexport default createRenderer\n","import { DirectionalLight } from 'three';\n\n\nexport default function createSun() {\n\n\tlet sunLight = new DirectionalLight(0xffffff, .75);\n\n\tsunLight.position.set(-280, 695, 350);\n\tsunLight.castShadow = true;\n\n\tsunLight.shadow.camera.left \t= -800;\n\tsunLight.shadow.camera.right \t= 800;\n\tsunLight.shadow.camera.top \t\t= 800;\n\tsunLight.shadow.camera.bottom \t= -800;\n\tsunLight.shadow.camera.near \t= 1;\n\tsunLight.shadow.camera.far \t\t= 1500;\n\n\tsunLight.shadow.mapSize.width \t= 512;\n\tsunLight.shadow.mapSize.height \t= 512;\n\n\treturn sunLight;\n}","import { Mesh, BoxGeometry, MeshPhongMaterial } from 'three';\n\nimport { colors } from './colors';\n\n\nexport default class Cube {\n\tconstructor(\n\t\tsize = [100, 100, 100],\n\t\tposition = { x: 0, y: 0, z: 0 },\n\t\tcolor = null, name = `cube-${~~(Math.random() * 1000)}`) {\n\n\t\tthis.width \t= size[0];\n\t\tthis.height = size[1];\n\t\tthis.depth \t= size[2];\n\n\t\tthis.color = color;\n\n\t\tthis.geometry = new BoxGeometry(this.width, this.height, this.depth);\n\n\t\tthis.material;\n\n\t\tif (this.color) {\n\t\t\tthis.material = new MeshPhongMaterial({\n\t\t\t\tcolor: this.color,\n\t\t\t\tflatShading: true,\n\t\t\t\t// transparent: true,\n\t\t\t\t// opacity: .6\n\t\t\t});\n\t\t} else {\n\t\t\tthis.material = null\n\t\t};\n\n\t\tthis.mesh = new Mesh(this.geometry, this.material);\n\t\tthis.mesh.castShadow = true;\n\t\tthis.mesh.receiveShadow = true;\n\n\t\tthis.mesh.position.x += position.x;\n\t\tthis.mesh.position.y += position.y;\n\t\tthis.mesh.position.z += position.z;\n\t\t\n\t\tthis.mesh.name = name;\n\n\t\tthis.mesh.updateMatrix();\n\t}\n}","import { MeshPhongMaterial, DoubleSide, LineBasicMaterial } from 'three'\nimport { colors } from './colors'\n\nexport const materials = {\n\twood:\t\tnew MeshPhongMaterial({ color: colors.wood, flatShading: true }),\n\tgreen:\t\tnew MeshPhongMaterial({ color: colors.darkGreen, flatShading: true }),\n\tdarkMetal:\tnew MeshPhongMaterial({ color: colors.darkMetal, specular: 0x050505, shininess: 100 }),\n\n\tlightMetal: new MeshPhongMaterial({\n\t\tcolor: colors.lightMetal,\n\t\tside: DoubleSide,\n\t\tspecular: 0x050505,\n\t\tshininess: 100,\n\t}),\n\n\tglass: new MeshPhongMaterial({\n\t\tcolor: colors.glass,\n\t\tside: DoubleSide,\n\t\ttransparent: true,\n\t\topacity: .5,\n\t\tspecular: 0x050505,\n\t\tshininess: 10000,\n\t}),\n\n\trust: new MeshPhongMaterial({\n\t\tcolor: colors.rust,\n\t\tside: DoubleSide,\n\t\tspecular: 0x050505,\n\t\tshininess: 100,\n\t}),\n\n\tbrick:\tnew MeshPhongMaterial({ color: colors.brick, flatShading: true }),\n\troof:\tnew MeshPhongMaterial({ color: colors.roof, flatShading: true, }),\n\twhite:\tnew MeshPhongMaterial({ color: colors.white, flatShading: true }),\n\tred:\tnew MeshPhongMaterial({ color: colors.red, flatShading: true }),\n\t\n\tballoon: new MeshPhongMaterial({\n\t\tcolor: colors.balloon,\n\t\tflatShading: true,\n\t\tside: DoubleSide,\n\t\t// shadowSide: DoubleSide,\n\t}),\n\n\tline: new LineBasicMaterial({ color: colors.lightMetal, linewidth: 1 }),\n\n\twater: new MeshPhongMaterial({\n\t\tcolor: colors.water,\n\t\tflatShading: true,\n\t\tspecular: 0x050505,\n\t\tshininess: 1000,\n\t\ttransparent: true,\n\t\topacity: .8\n\t}),\n\n\t// for debug\n\toverride: new MeshPhongMaterial({ color: 0xdcb780, wireframe: true })\n}","import {\n\tGeometry,\n\tMesh,\n\tCylinderGeometry,\n\tTorusGeometry\n} from 'three';\n\nimport { materials } from '../modules/materials';\n\n\nexport default class PipeConnection {\n\tconstructor(\n\t\tm = 1,\n\t\tisFrontRing = true,\n\t\tisBackRing = true,\n\t\tradius = 35,\n\t\tsegmentsCount = 16,\n\t\tneedMaterial = false) {\n\n\t\tconst geometry = new Geometry();\n\n\t\tthis.radius = radius;\n\t\tthis.segmentsCount = segmentsCount;\n\t\t\n\t\tconst material = (needMaterial) ? materials.lightMetal : null;\n\n\n\t\t// base\n\t\tconst base = new Mesh(\n\t\t\tnew CylinderGeometry( radius, radius, (24 * m), 16, 1, true )\n\t\t);\n\t\tbase.rotation.y = (2 * Math.PI / 80);\n\t\tbase.updateMatrix();\n\n\t\tgeometry.merge(base.geometry, base.matrix);\n\n\n\t\t// rings\n\t\tif (isFrontRing) {\n\t\t\tconst frontRing = new Mesh(\n\t\t\t\tnew TorusGeometry( radius, 6, 10, 16, (2 * Math.PI) )\n\t\t\t);\n\t\t\tfrontRing.position.y = 12 * m;\n\t\t\tfrontRing.rotation.x = Math.PI / 2;\n\t\t\tfrontRing.updateMatrix();\n\t\t\tgeometry.merge(frontRing.geometry, frontRing.matrix);\n\t\t};\n\n\t\tif (isBackRing) {\n\t\t\tconst backRing = new Mesh(\n\t\t\t\tnew TorusGeometry( radius, 6, 10, 16, (2 * Math.PI) )\n\t\t\t);\n\t\t\tbackRing.position.y = -12 * m;\n\t\t\tbackRing.rotation.x = Math.PI / 2;\n\t\t\tbackRing.updateMatrix();\n\t\t\tgeometry.merge(backRing.geometry, backRing.matrix);\n\t\t};\n\n\t\n\t\t// segments\n\t\tconst segmentGeometry = new CylinderGeometry( 2, 2, (24 * m), 3, 1, true );\n\t\t\n\t\tfor (let i = 0; i < this.segmentsCount; i++) {\n\n\t\t\tconst segment = new Mesh(segmentGeometry);\n\n\t\t\tsegment.position.set(\n\t\t\t\tradius * (Math.cos(i * (2 *Math.PI) / this.segmentsCount)),\n\t\t\t\t0,\n\t\t\t\tradius * (Math.sin(i * (2 * Math.PI) / this.segmentsCount))\n\t\t\t);\n\t\t\tsegment.updateMatrix();\n\n\t\t\tgeometry.merge(segment.geometry, segment.matrix);\n\t\t};\n\n\n\t\tthis.mesh = new Mesh(geometry, material);\n\t\tthis.mesh.name = 'pipe-connection';\n\t}\n}","import {\n\tGeometry,\n\tMesh,\n\tObject3D,\n\tCylinderGeometry,\n\tTorusGeometry\n} from 'three';\n\nimport { materials } from '../modules/materials';\n\nimport PipeConnection from './pipeConnection';\n\n\nexport default class PipeCorner {\n\tconstructor(isBottomConnection = true, isTopConnection = true) {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'pipe-corner';\n\n\t\tconst singleGeometry = new Geometry();\n\n\t\t// pipe radius\n\t\tconst radius = 35;\n\t\n\t\t// arc\n\t\tconst arcGeometry = new TorusGeometry((2 * radius), radius, 16, 16, (Math.PI / 2) );\n\t\tconst arc = new Mesh(arcGeometry);\n\t\tarc.rotation.z = Math.PI / 2;\n\t\tarc.updateMatrix();\n\n\t\tsingleGeometry.merge(arc.geometry, arc.matrix);\n\n\n\t\t// connections\n\t\tif (isTopConnection) {\n\t\t\tconst topConnection = (new PipeConnection()).mesh;\n\t\t\ttopConnection.rotation.z += Math.PI / 2;\n\t\t\ttopConnection.position.y += 2 * radius;\n\t\t\ttopConnection.updateMatrix();\n\n\t\t\tsingleGeometry.merge(topConnection.geometry, topConnection.matrix);\n\t\t};\n\n\t\tif (isBottomConnection) {\n\t\t\tconst bottomConnection = (new PipeConnection()).mesh;\n\t\t\tbottomConnection.position.x -= 2 * radius;\n\t\t\tbottomConnection.updateMatrix();\n\n\t\t\tsingleGeometry.merge(bottomConnection.geometry, bottomConnection.matrix);\n\t\t};\n\n\n\t\t// final mesh\n\t\tconst pipeCorner = new Mesh(singleGeometry, materials.lightMetal);\n\t\tpipeCorner.castShadow = true;\n\t\tpipeCorner.receiveShadow = true;\n\n\t\tthis.mesh = pipeCorner;\n\t}\n}","import { Mesh, Shape, Path, ExtrudeGeometry } from 'three';\n\n// import Cube from '../../modules/Cube';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Chimney {\n\tconstructor() {\n\n\t\tconst arcShape = new Shape();\n\t\tarcShape.moveTo(0, 0);\n\t\tarcShape.absarc(0, 0, 12, 0, Math.PI * 2);\n\n\t\tconst holePath = new Path();\n\t\tholePath.moveTo(0, 0);\n\t\tholePath.absarc(0, 0, 10, 0, Math.PI * 2);\n\t\tarcShape.holes.push( holePath );\n\n\n\t\tconst extrudeSettings = {\n\t\t\tcurveSegments: 8,\n\t\t\tsteps: 1,\n\t\t\tdepth: 1,\n\t\t\tbevelEnabled: false\n\t\t};\n\n\t\t\n\t\tconst geometry = new ExtrudeGeometry(arcShape, extrudeSettings);\n\t\t\n\t\tthis.mesh = new Mesh(geometry, materials.rust);\n\t\tthis.mesh.rotation.x += Math.PI / 2;\n\t\tthis.mesh.castShadow = true;\n\t\tthis.mesh.receiveShadow = true;\n\t\tthis.mesh.name = 'chimney';\n\t}\t\n}","import {\n\tObject3D,\n\tVector3,\n\tGeometry,\n\tLine,\n\tLineSegments,\n\tBoxGeometry,\n\tMesh\n} from 'three';\n\nimport { colors } from '../../modules/colors';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Fence {\n\tconstructor(isClosed = false) {\n\n\t\tthis.mesh = new Object3D;\n\t\tthis.mesh.name = 'fence';\n\n\t\tconst height = 90;\n\t\tconst width = (400 - 10) / 3;\n\n\t\tconst gridHeight = height - 20;\n\t\tconst angle = Math.atan(gridHeight / width);\n\n\n\t\t// pillars\n\t\tconst pillarsGeometry = new Geometry();\n\n\t\tconst pillar = new Mesh(new BoxGeometry(5, height, 5));\n\n\t\tpillarsGeometry.merge(pillar.geometry, pillar.matrix);\n\n\t\tif (isClosed) {\n\t\t\tconst anotherPillar = pillar.clone();\n\t\t\tanotherPillar.position.z += width\n\t\t\tanotherPillar.updateMatrix();\n\t\t\tpillarsGeometry.merge(anotherPillar.geometry, anotherPillar.matrix);\n\t\t};\n\n\t\tconst bar = new Mesh(new BoxGeometry(2, 2, width));\n\t\tbar.position.set(0, (gridHeight / 2) - 10, (width / 2));\n\t\tbar.updateMatrix();\n\n\t\tpillarsGeometry.merge(bar.geometry, bar.matrix);\n\n\t\tconst pillars = new Mesh(pillarsGeometry, materials.darkMetal);\n\t\tpillars.name = 'pillars';\n\t\tpillars.castShadow = true;\n\t\tpillars.receiveShadow = true;\n\n\n\t\t// helix\n\t\tconst helixGeometry = new Geometry();\n\n\t\tfor (let i = 0; i < (width / 2); i++) {\n\n\t\t\thelixGeometry.vertices.push(\n\t\t\t\tnew Vector3(\n\t\t\t\t\t10 * Math.cos(i),\n\t\t\t\t\t10 * Math.sin(i),\n\t\t\t\t\t2 * i\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\n\t\tconst helix = new Line(helixGeometry, materials.line);\n\t\thelix.name = 'helix';\n\n\t\thelix.castShadow = true;\n\t\thelix.receiveShadow = true;\n\t\thelix.position.set(-5, 40, 0);\n\n\n\t\t// mesh\n\t\tconst lineGeometry = new Geometry();\n\t\tconst step = width / 5;\n\n\t\tfor (let i = 0; i < width; i+=step) {\n\n\t\t\tconst diff = width - i;\n\n\t\t\tlineGeometry.vertices.push( new Vector3(0, 0, i) );\n\t\t\tlineGeometry.vertices.push( new Vector3(0, diff * Math.tan(angle), width) );\n\n\t\t};\n\n\t\tfor (let i = width; i > 0; i-=step) {\n\t\t\t\n\t\t\tconst diff = width - i;\n\n\t\t\tlineGeometry.vertices.push( new Vector3(0, gridHeight, diff) );\n\t\t\tlineGeometry.vertices.push( new Vector3(0, gridHeight - diff * Math.tan(angle), 0) );\n\n\t\t};\n\n\t\tfor (let i = 0; i < width; i+=step) {\n\t\t\t\n\t\t\tconst diff = width - i;\n\n\t\t\tlineGeometry.vertices.push( new Vector3(0, 0, diff) );\n\t\t\tlineGeometry.vertices.push( new Vector3(0, diff * Math.tan(angle), 0) );\n\n\t\t};\n\n\t\tfor (let i = 0; i < width; i+=step) {\n\t\t\t\n\t\t\tconst diff = width - i;\n\n\t\t\tlineGeometry.vertices.push( new Vector3(0, gridHeight, i) );\n\t\t\tlineGeometry.vertices.push( new Vector3(0, gridHeight - (diff * Math.tan(angle)), width) );\n\n\t\t};\n\n\t\tconst grid = new LineSegments(lineGeometry, materials.line);\n\t\tgrid.position.y -= (height / 2);\n\t\tgrid.castShadow = true;\n\t\tgrid.receiveShadow = true;\n\t\tgrid.name = 'grid';\n\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tpillars,\n\t\t\thelix,\n\t\t\tgrid\n\t\t);\n\t}\n}","import {\n\tObject3D,\n\tVector3,\n\tGeometry,\n\tLineSegments,\n\tBoxGeometry,\n\tMesh\n} from 'three';\n\n\nimport { materials } from '../../modules/materials';\n\n\nexport default class Filter {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'filter';\n\n\n\t\t// pillars\n\t\tconst pillarsGeometry = new Geometry();\n\n\t\tconst pillar = new Mesh(new BoxGeometry(5, 30, 390));\n\n\t\tconst anotherPillar = pillar.clone();\n\t\tanotherPillar.position.x -= 100;\n\t\tanotherPillar.updateMatrix();\n\n\t\tpillarsGeometry.merge(pillar.geometry, pillar.matrix);\n\t\tpillarsGeometry.merge(anotherPillar.geometry, anotherPillar.matrix);\n\n\t\tconst pillars = new Mesh(pillarsGeometry, materials.rust);\n\t\tpillars.castShadow = true;\n\t\tpillars.receiveShadow = true;\n\n\n\t\t// filter (lines)\n\t\tconst linesGeometry = new Geometry();\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\n\t\t\tlet y = i * 4;\n\n\t\t\tlinesGeometry.vertices.push( new Vector3(0, y, -40) );\n\t\t\tlinesGeometry.vertices.push( new Vector3(-100, y, -40 ) );\n\t\t};\n\n\t\tconst lines = new LineSegments(linesGeometry, materials.line);\n\t\tlines.castShadow = true;\n\t\tlines.receiveShadow = true;\n\n\n\t\tthis.mesh.add(\n\t\t\tpillars,\n\t\t\tlines\n\t\t);\n\t}\n}","import { Mesh, Object3D, Geometry, CylinderGeometry } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport { colors } from '../../modules/colors';\nimport { materials } from '../../modules/materials';\nimport PipeCorner from '../pipeCorner';\n\nimport Chimney from './chimney';\nimport Fence from './fence';\nimport Filter from './filter';\n\n\nexport default class BottomIsland {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'bottom-island';\n\n\t\t// big cube\n\t\tthis.mesh.add(\n\t\t\t(new Cube(\n\t\t\t\t[400, 400, 400],\n\t\t\t\t{x: 0, y: 0, z: 0},\n\t\t\t\tcolors.darkGrey)\n\t\t\t).mesh\n\t\t);\n\t\tthis.mesh.position.set(0, -400, 400);\n\n\n\t\t// chimney\n\t\tconst chimneyCombinedGeometry = new Geometry();\n\n\t\tconst chimneysParams = [\n\t\t\t{x: 120, y: 350, z: -120, scale: 150},\n\t\t\t{x: 135, y: 270, z: -90, scale: 70},\n\t\t\t{x: 95,  y: 245, z: -70, scale: 50},\n\t\t\t{x: 80,  y: 240, z: 70,  scale: 40},\n\t\t\t{x: 90,  y: 230, z: 100, scale: 30},\n\t\t\t{x: 120, y: 220, z: 80,  scale: 20},\n\t\t\t{x: -130, y: 320, z: -110, scale: 140},\n\t\t\t{x: -125, y: 270, z: -70, scale: 70},\n\t\t\t{x: -140, y: 500, z: 90, scale: 200}\n\t\t];\n\t\t\n\n\t\tfor (let i = 0; i < chimneysParams.length; i++) {\n\t\t\t\n\t\t\tconst chimney = (new Chimney()).mesh;\n\t\t\tchimney.position.set(\n\t\t\t\tchimneysParams[i].x,\n\t\t\t\tchimneysParams[i].y,\n\t\t\t\tchimneysParams[i].z,\n\t\t\t);\n\t\t\tchimney.scale.z = chimneysParams[i].scale;\n\t\t\tchimney.updateMatrix();\n\n\t\t\tchimneyCombinedGeometry.merge(chimney.geometry, chimney.matrix);\n\t\t};\n\n\n\t\t// big chimney!\n\t\tconst bigChimneyGeometry = new Geometry();\n\n\t\tconst chimneyInner = new Mesh(\n\t\t\tnew CylinderGeometry(40, 40, 70, 6, 1)\n\t\t);\n\t\tchimneyInner.position.set(0, -50, 0);\n\t\tchimneyInner.updateMatrix();\n\n\t\tconst chimneyOuter = (new Chimney()).mesh;\n\t\tchimneyOuter.scale.set(3.5, 3.5, 150); // XZY\n\t\tchimneyOuter.updateMatrix();\n\n\t\tbigChimneyGeometry.merge(chimneyInner.geometry, chimneyInner.matrix);\n\t\tbigChimneyGeometry.merge(chimneyOuter.geometry, chimneyOuter.matrix);\n\n\t\tconst bigChimney = new Mesh(bigChimneyGeometry, materials.rust);\n\n\t\tbigChimney.position.set(-125, 325, 90);\n\t\tbigChimney.updateMatrix();\n\n\t\t\n\t\tchimneyCombinedGeometry.merge(bigChimney.geometry, bigChimney.matrix);\n\n\t\tconst chimneyCombined = new Mesh(chimneyCombinedGeometry, materials.rust);\n\t\tchimneyCombined.castShadow = true;\n\t\tchimneyCombined.receiveShadow = true;\n\n\t\tthis.mesh.add(chimneyCombined);\n\n\n\n\t\t// pipe corners\n\t\tconst pipesParams = [\n\t\t\t{\n\t\t\t\tposition: { x: 0, y: 170, z: 195 },\n\t\t\t\trotation: { x: 0, y: (Math.PI / 2), z: 0 }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: 0, y: 0, z: 195 },\n\t\t\t\trotation: { x: 0, y: (Math.PI / 2), z: Math.PI }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: 215, y: -75, z: 10 },\n\t\t\t\trotation: { x: (Math.PI / 2), y: (Math.PI / 2), z: 0 }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: 215, y: -75, z: -20 },\n\t\t\t\trotation: { x: (Math.PI / 2), y: Math.PI, z: 0 }\n\t\t\t}\n\t\t];\n\n\t\tfor (let i = 0; i < pipesParams.length; i++) {\n\n\t\t\tconst pipeCorner = (new PipeCorner()).mesh;\n\t\t\t\n\t\t\tpipeCorner.position.set(\n\t\t\t\tpipesParams[i].position.x,\n\t\t\t\tpipesParams[i].position.y,\n\t\t\t\tpipesParams[i].position.z\n\t\t\t);\n\n\t\t\tpipeCorner.rotation.set(\n\t\t\t\tpipesParams[i].rotation.x,\n\t\t\t\tpipesParams[i].rotation.y,\n\t\t\t\tpipesParams[i].rotation.z,\n\t\t\t\t'ZYX'\n\t\t\t);\n\n\t\t\tthis.mesh.add(pipeCorner);\n\t\t};\n\n\n\t\t// fence\n\t\tconst fenceParams = [\n\t\t\t{\n\t\t\t\tposition: { x: 195, y: 245, z: -195 },\n\t\t\t\trotation: { x: 0, y: 0, z: 0 }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: 195, y: 245, z: (-195 + 130) },\n\t\t\t\trotation: { x: 0, y: 0, z: 0 }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: 195, y: 245, z: (-195 + 130 * 2) },\n\t\t\t\trotation: { x: 0, y: 0, z: 0 }\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tposition: { x: 195, y: 245, z: 195 },\n\t\t\t\trotation: { x: 0, y: (-Math.PI / 2), z: 0 },\n\t\t\t\tisClosed: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: (195 - 130 * 2), y: 245, z: 195 },\n\t\t\t\trotation: { x: 0, y: (-Math.PI / 2), z: 0 },\n\t\t\t\tisClosed: true\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tposition: { x: -195, y: 245, z: -195 },\n\t\t\t\trotation: { x: 0, y: 0, z: 0 }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: -195, y: 245, z: (-195 + 130) },\n\t\t\t\trotation: { x: 0, y: 0, z: 0 }\n\t\t\t},\n\t\t\t{\n\t\t\t\tposition: { x: -195, y: 245, z: (-195 + 130 * 2) },\n\t\t\t\trotation: { x: 0, y: 0, z: 0 }\n\t\t\t},\n\t\t];\n\n\t\tfor (let i = 0; i < fenceParams.length; i++) {\n\t\t\t\n\n\t\t\tconst fence = (new Fence(fenceParams[i].isClosed)).mesh;\n\n\t\t\tfence.position.set(\n\t\t\t\tfenceParams[i].position.x,\n\t\t\t\tfenceParams[i].position.y,\n\t\t\t\tfenceParams[i].position.z\n\t\t\t);\n\n\t\t\tfence.rotation.set(\n\t\t\t\tfenceParams[i].rotation.x,\n\t\t\t\tfenceParams[i].rotation.y,\n\t\t\t\tfenceParams[i].rotation.z\n\t\t\t);\n\n\t\t\tthis.mesh.add(fence);\n\t\t};\n\n\n\t\t// water filter\n\t\tconst filter = (new Filter()).mesh;\n\t\tfilter.position.set(50, 215, -5);\n\n\t\tthis.mesh.add(filter);\n\t}\n}","import { Geometry, Mesh, Object3D, CylinderGeometry, BoxGeometry } from 'three';\n\nimport { materials } from '../modules/materials';\n\n\nexport default class Fan {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'fan';\n\n\t\tconst staticGroupGeometry = new Geometry();\n\n\n\t\tconst base = new Mesh(\n\t\t\tnew CylinderGeometry(8, 8, 10, 6, 1)\n\t\t);\n\n\n\t\tconst pipe = new Mesh(\n\t\t\tnew CylinderGeometry(5, 5, 400, 6, 1)\n\t\t);\n\n\n\t\tconst engine = new Mesh(\n\t\t\tnew CylinderGeometry(25, 25, 50, 8, 1)\n\t\t);\n\t\tengine.rotation.x += Math.PI / 2;\n\t\tengine.position.y += 200;\n\t\tengine.updateMatrix();\n\n\n\t\tstaticGroupGeometry.merge(base.geometry, base.matrix);\n\t\tstaticGroupGeometry.merge(pipe.geometry, pipe.matrix);\n\t\tstaticGroupGeometry.merge(engine.geometry, engine.matrix);\n\n\t\tconst staticGroup = new Mesh(staticGroupGeometry, materials.darkMetal);\n\t\tstaticGroup.castShadow = true;\n\t\tstaticGroup.receiveShadow = true;\n\n\t\n\t\t// propeller\n\t\tconst propeller = new Object3D();\n\n\t\tconst hubGeometry = new CylinderGeometry(10, 10, 30, 6, 1);\n\t\tconst hub = new Mesh(hubGeometry, materials.darkMetal);\n\t\thub.receiveShadow = true;\n\t\thub.castShadow = true;\n\t\thub.position.z += 30;\n\t\thub.rotation.x = Math.PI / 2\n\n\t\t// blades\n\t\tlet blades = [];\n\t\tconst bladeGeometry = new BoxGeometry(20, 120, 2);\n\n\t\tfor (let i = 0; i < 3; i++) {\n\t\t\tconst blade = new Mesh(bladeGeometry, materials.white);\n\n\t\t\tblade.geometry.translate( 0, 120 / 6, 0 );\n\n\t\t\tblade.geometry.vertices[4].y += 5;\n\t\t\tblade.geometry.vertices[4].z -= 1;\n\t\t\tblade.geometry.vertices[5].y += 5;\n\t\t\tblade.geometry.vertices[5].z -= 1;\n\n\t\t\tblade.rotation.z = i * (2 * Math.PI / 3);\n\t\t\tblade.position.z += 40;\n\n\t\t\tblade.castShadow = true;\n\t\t\tblade.receiveShadow = true;\n\n\t\t\tblades.push(blade);\n\t\t};\n\n\n\t\tpropeller.position.y += 200;\n\t\tpropeller.add(hub, ...blades);\n\n\t\tthis.propeller = propeller; // global for animation\n\t\n\t\t// final\n\t\tthis.mesh.add(staticGroup, propeller);\n\t}\n\n\trotate = (value) => {\n\t\tthis.propeller.rotation.z += value;\n\t}\n}","import { Geometry, Mesh } from 'three';\n\nimport Cube from '../modules/Cube';\n\nimport { materials } from '../modules/materials';\n\n\nexport default class Fence {\n\tconstructor(close = false) {\n\n\t\tconst singleGeometry = new Geometry();\n\n\n\t\tconst centerBoard = new Cube(\n\t\t\t[10, 20, 4],\n\t\t\t{x: 0, y: 0, z: 0}\n\t\t);\n\t\tcenterBoard.mesh.updateMatrix();\n\n\t\tconst topBoard = new Cube(\n\t\t\t[28, 4, 2],\n\t\t\t{x: -((28 / 2) + (10 / 2)), y: (10 - 4 / 2), z: 0}\n\t\t);\n\t\ttopBoard.mesh.updateMatrix();\n\n\t\tconst bottomBoard = new Cube(\n\t\t\t[28, 4, 2],\n\t\t\t{x: -((28 / 2) + (10 / 2)), y: -3, z: 0}\n\t\t);\n\t\tbottomBoard.mesh.updateMatrix();\n\n\t\tconst paling = new Cube(\n\t\t\t[10, 6, 4],\n\t\t\t{x: 0, y: 13, z: 0}\n\t\t);\n\n\t\tpaling.mesh.geometry.vertices[0].x -= 5;\n\t\tpaling.mesh.geometry.vertices[1].x -= 5;\n\t\tpaling.mesh.geometry.vertices[4].x += 5;\n\t\tpaling.mesh.geometry.vertices[5].x += 5;\n\t\tpaling.mesh.updateMatrix();\n\n\t\tsingleGeometry.merge(bottomBoard.mesh.geometry, bottomBoard.mesh.matrix);\n\t\tsingleGeometry.merge(centerBoard.mesh.geometry, centerBoard.mesh.matrix);\n\t\tsingleGeometry.merge(topBoard.mesh.geometry, topBoard.mesh.matrix);\n\t\tsingleGeometry.merge(paling.mesh.geometry, paling.mesh.matrix);\n\n\n\t\tthis.width = 38;\n\n\t\tthis.mesh = new Mesh(\n\t\t\tsingleGeometry,\n\t\t\tmaterials.wood\n\t\t);\n\n\t\tthis.mesh.position.y += 10;\n\t}\n}","import { Geometry, Mesh, Object3D, CylinderGeometry  } from 'three';\n\nimport { materials } from '../modules/materials';\n\n\nexport default class Pine {\n\tconstructor(scale = [1, 1, 1], rotation = 0) {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'pine';\n\n\t\t// tree trunk\n\t\tconst trunkGeometry = new CylinderGeometry(8, 8, 15, 10, 1);\n\n\t\tconst trunk = new Mesh(trunkGeometry, materials.wood);\n\t\ttrunk.castShadow = true;\n\t\ttrunk.receiveShadow = true;\n\t\ttrunk.position.y += 7.5;\n\n\n\t\t// branches\n\t\tconst branchesGeometry = new Geometry();\n\n\t\tfor (let i = 1; i <= 7; i++) {\n\t\t\tlet R = 45 - (i * 5); \n\t\t\tconst branchesLevel = new Mesh(new CylinderGeometry((R - 10), R, 10, 6, 1));\n\n\t\t\tbranchesLevel.position.y += 10 + (i * 70) / 7;\n\n\t\t\tbranchesLevel.updateMatrix();\n\n\t\t\tbranchesGeometry.merge(branchesLevel.geometry, branchesLevel.matrix);\n\t\t};\n\t\tconst branches = new Mesh(branchesGeometry, materials.green);\n\t\tbranches.receiveShadow = true;\n\t\tbranches.castShadow = true;\n\n\n\t\tthis.mesh.scale.x = scale[0];\n\t\tthis.mesh.scale.y = scale[1];\n\t\tthis.mesh.scale.z = scale[2];\n\n\t\tthis.mesh.rotation.y = rotation;\n\n\t\tthis.mesh.add(\n\t\t\ttrunk,\n\t\t\tbranches\n\t\t);\n\n\t}\n}","import { Geometry, Mesh, Object3D, CylinderGeometry, Shape, ExtrudeGeometry } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Windvane {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'windwane';\n\n\n\t\tconst standGeometry = new Geometry();\n\n\n\t\tconst pillarGeometry = new Geometry();\n\t\n\t\t{\n\t\t\tconst shaft\t= new Cube(\n\t\t\t\t[20, 200, 15],\n\t\t\t\t{x: 0, y: 100, z: 0}\n\t\t\t).mesh;\n\t\n\t\t\tshaft.geometry.vertices[0].x -= 5;\n\t\t\tshaft.geometry.vertices[0].z -= 5;\n\t\t\tshaft.geometry.vertices[1].x -= 5;\n\t\t\tshaft.geometry.vertices[1].z += 5;\n\t\t\tshaft.geometry.vertices[4].x += 5;\n\t\t\tshaft.geometry.vertices[4].z += 5;\n\t\t\tshaft.geometry.vertices[5].x += 5;\n\t\t\tshaft.geometry.vertices[5].z -= 5;\n\n\t\t\tshaft.updateMatrix();\n\t\t\t\n\t\t\tpillarGeometry.merge(shaft.geometry, shaft.matrix);\n\t\n\t\t\t// beams\n\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\tconst beam = new Cube(\n\t\t\t\t\t[65, 10, 5],\n\t\t\t\t\t{\n\t\t\t\t\t\tx: -25,\n\t\t\t\t\t\ty: 30 + (j * 40),\n\t\t\t\t\t\tz: 0\n\t\t\t\t\t}\n\t\t\t\t).mesh;\n\t\n\t\t\t\tbeam.rotation.z += (Math.PI / 4) * ((j % 2 === 0) ? (-1) : 1);\n\t\t\t\tbeam.updateMatrix();\n\t\n\t\t\t\tpillarGeometry.merge(beam.geometry, beam.matrix);\n\t\t\t};\n\t\t};\n\n\t\tfor (let i = 0; i < 4; i++) {\n\n\t\t\tconst pillar = new Mesh(pillarGeometry, materials.wood);\n\t\t\tpillar.position.x += 40 * Math.cos(i * Math.PI / 2);\n\t\t\tpillar.position.z += 40 * Math.sin(i * Math.PI / 2);\n\n\t\t\tpillar.rotation.y += (Math.PI / 4) - i * (Math.PI / 2);\n\n\t\t\tpillar.updateMatrix();\n\n\t\t\tstandGeometry.merge(pillar.geometry, pillar.matrix);\n\t\t};\n\n\n\t\tconst platform = new Cube(\n\t\t\t[80, 10, 80],\n\t\t\t{x: 0, y: 200, z: 0},\n\t\t).mesh;\n\t\tplatform.rotation.y -= Math.PI / 4;\n\t\tplatform.updateMatrix();\n\n\t\tstandGeometry.merge(platform.geometry, platform.matrix);\n\n\n\t\t// \n\t\tconst stand = new Mesh(standGeometry, materials.wood);\n\t\tstand.name = 'stand';\n\t\tstand.castShadow = true;\n\t\tstand.receiveShadow = true;\n\t\tstand.rotation.y += Math.PI / 4;\n\n\n\t\t// \n\t\tconst vaneSupportGeometry = new Geometry();\n\n\t\t{\n\t\t\tconst bevel = new Mesh(new CylinderGeometry(2, 2, 60, 6, 1));\n\t\t\tbevel.rotation.z = Math.PI / 6;\n\t\t\tbevel.position.set(15, 230, 0);\n\t\t\tbevel.updateMatrix();\n\n\t\t\tconst anotherBevel = bevel.clone();\n\t\t\tanotherBevel.rotation.z = -Math.PI / 6;\n\t\t\tanotherBevel.position.x = -15;\n\t\t\tanotherBevel.updateMatrix();\n\n\t\t\tconst hub = new Mesh(new CylinderGeometry(4, 4, 6, 6, 1));\n\t\t\thub.position.set(0, 255, 0);\n\t\t\thub.updateMatrix();\n\n\t\t\tvaneSupportGeometry.merge(bevel.geometry, bevel.matrix);\n\t\t\tvaneSupportGeometry.merge(anotherBevel.geometry, anotherBevel.matrix);\n\t\t\tvaneSupportGeometry.merge(hub.geometry, hub.matrix);\n\t\t};\n\n\t\tconst vaneSupport = new Mesh(vaneSupportGeometry, materials.lightMetal);\n\t\tvaneSupport.castShadow = true;\n\t\tvaneSupport.receiveShadow = true;\n\n\n\t\tconst vane = new Object3D();\n\n\t\t{\n\t\t\t// axle\n\t\t\tconst axle = new Mesh(new CylinderGeometry(2, 2, 100, 6, 1), materials.lightMetal);\n\t\t\taxle.position.set(0, 260, 0);\n\t\t\taxle.rotation.x += Math.PI / 2;\n\t\t\taxle.receiveShadow = true;\n\t\t\taxle.castShadow = true;\n\n\n\t\t\t// hub\n\t\t\tconst hub = new Mesh(new CylinderGeometry(3, 3, 5, 6, 1), materials.lightMetal);\n\t\t\thub.position.set(0, 260, 0);\n\t\t\thub.receiveShadow = true;\n\t\t\thub.castShadow = true;\n\n\n\t\t\t// tail\n\t\t\tconst tailShape = new Shape();\n\t\t\tconst tailWidth = 36;\n\t\t\tconst tailHeight = 16;\n\t\t\ttailShape.moveTo(0, tailHeight / 2);\n\t\t\ttailShape.lineTo(tailWidth / 4, tailHeight);\n\t\t\ttailShape.lineTo(tailWidth, tailHeight);\n\t\t\ttailShape.lineTo(tailWidth - tailWidth / 4, tailHeight / 2);\n\t\t\ttailShape.lineTo(tailWidth, 0);\n\t\t\ttailShape.lineTo(tailWidth / 4, 0);\n\t\t\ttailShape.moveTo(0, tailHeight / 2);\n\n\t\t\tconst extrudeSettings = {\n\t\t\t\tsteps: 2,\n\t\t\t\tdepth: 4,\n\t\t\t\tbevelEnabled: false\n\t\t\t};\n\n\t\t\tconst tail = new Mesh(\n\t\t\t\tnew ExtrudeGeometry(tailShape, extrudeSettings),\n\t\t\t\tmaterials.red\n\t\t\t);\n\t\t\ttail.castShadow = true;\n\t\t\ttail.receiveShadow = true;\n\n\t\t\ttail.position.set(-2, 260 - (tailHeight / 2), -25);\n\t\t\ttail.rotation.y = Math.PI / 2;\n\n\n\t\t\t// windvane fan\n\t\t\tconst fan = new Object3D();\n\n\n\t\t\tconst fanBladesGeometry = new Geometry();\n\n\t\t\tfor (let i = 0; i < 12; i++) {\n\t\t\t\tconst blade = new Cube(\n\t\t\t\t\t[45, 2, 1],\n\t\t\t\t\t{\n\t\t\t\t\t\tx: 4 * Math.cos(i * (Math.PI / 6)),\n\t\t\t\t\t\ty: 4 * Math.sin(i * (Math.PI / 6)),\n\t\t\t\t\t\tz: 0\n\t\t\t\t\t}\n\t\t\t\t).mesh;\n\t\t\t\tblade.geometry.translate(20, 0, 0);\n\n\t\t\t\tblade.geometry.vertices[1].z -= 4;\n\t\t\t\tblade.geometry.vertices[1].y += 10;\n\n\t\t\t\tblade.rotation.z += i * Math.PI / 6;\n\t\t\t\tblade.updateMatrix();\n\n\t\t\t\tfanBladesGeometry.merge(blade.geometry, blade.matrix);\n\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  // temp material\n\t\t\tconst fanBlades = new Mesh(fanBladesGeometry, materials.lightMetal);\n\t\t\tfanBlades.castShadow = true;\n\t\t\tfanBlades.receiveShadow = true;\n\n\n\t\t\t// fan center\n\t\t\tconst fanCenter = new Mesh(\n\t\t\t\tnew CylinderGeometry(4, 4, 4, 6, 1),\n\t\t\t\tmaterials.darkMetal\n\t\t\t);\n\t\t\tfanCenter.rotation.x = Math.PI / 2;\n\t\t\tfanCenter.castShadow = true;\n\t\t\tfanCenter.receiveShadow = true;\n\n\n\t\t\tfan.add(fanBlades, fanCenter);\n\t\t\tfan.position.set(0, 260, 45);\n\t\t\tthis.fan = fan;\n\n\t\t\t// final\n\t\t\tvane.add(axle, hub, tail, fan);\n\t\t};\n\n\t\tthis.vane = vane;\n\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tstand,\n\t\t\tvaneSupport,\n\t\t\tvane\n\t\t);\n\t}\n\n\trotateFan = (value) => {\n\t\tthis.fan.rotation.z += value;\n\t}\n}","import { Geometry, Mesh } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Ladder {\n\tconstructor() {\n\n\t\tconst ladderGeometry = new Geometry();\n\n\t\tconst pillar = new Cube(\n\t\t\t\t[5, 410, 5],\n\t\t\t\t{x: 0, y: 205, z: 0}\n\t\t).mesh;\n\n\t\tladderGeometry.merge(pillar.geometry, pillar.matrix);\n\n\t\tconst anotherPillar = pillar.clone();\n\t\tanotherPillar.position.z -= 30;\n\t\tanotherPillar.updateMatrix();\n\n\t\tladderGeometry.merge(anotherPillar.geometry, anotherPillar.matrix);\n\n\n\t\t// stairs\n\t\tfor (let i = 0; i < 40; i++) {\n\t\t\tconst stair = new Cube(\n\t\t\t\t[2, 2, 30],\n\t\t\t\t{x: 0, y: (i * 10) + 10, z: -15}\n\t\t\t).mesh;\n\n\t\t\tladderGeometry.merge(stair.geometry, stair.matrix);\n\t\t};\n\n\n\t\tthis.mesh = new Mesh(ladderGeometry, materials.wood);\n\t\tthis.mesh.castShadow = true;\n\t\tthis.mesh.receiveShadow = true;\n\n\t}\n};","import { Geometry, Mesh } from 'three';\n\nimport Cube from '../modules/Cube';\nimport { materials } from '../modules/materials';\n\n\nexport default class Stones {\n\tconstructor(coordinates = [ [0, 0, 0] ] ) {\n\n\t\tconst stonesGeometry = new Geometry();\n\n\t\tfor (let i = 0; i < coordinates.length; i++) {\n\t\t\tconst stone = new Cube(\n\t\t\t\t[30, 40, 30],\n\t\t\t\t{\n\t\t\t\t\tx: coordinates[i][0],\n\t\t\t\t\ty: coordinates[i][1],\n\t\t\t\t\tz: coordinates[i][2]\n\t\t\t\t}\n\t\t\t).mesh;\n\n\t\t\tstone.rotation.set(\n\t\t\t\tMath.random() * (2 * Math.PI),\n\t\t\t\tMath.random() * (2 * Math.PI),\n\t\t\t\tMath.random() * (2 * Math.PI)\n\t\t\t);\n\t\t\tstone.updateMatrix();\n\n\t\t\tstonesGeometry.merge(stone.geometry, stone.matrix);\n\t\t};\n\n\n\t\tthis.mesh = new Mesh(\n\t\t\tstonesGeometry,\n\t\t\tmaterials.lightMetal\n\t\t);\n\n\t\tthis.mesh.castShadow = true;\n\t\tthis.mesh.receiveShadow = true;\n\t}\n};","import { Object3D, Geometry, Mesh, CylinderGeometry } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport Fan from '../fan';\nimport Fence from '../fence';\nimport Pine from '../pine';\nimport Windvane from './Windvane';\nimport Ladder from './Ladder';\nimport Stones from '../stones';\n\nimport PipeCorner from '../pipeCorner';\nimport PipeConnection from '../pipeConnection';\n\nimport { colors } from '../../modules/colors';\nimport { materials } from '../../modules/materials';\n\n\nexport default class MiddleIsland {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'middle-island';\n\n\n\t\t// big cube\n\t\tthis.mesh.add(\n\t\t\t(new Cube(\n\t\t\t\t[400, 400, 400],\n\t\t\t\t{x: 0, y: 0, z: 0},\n\t\t\t\tcolors.lightBrown,\n\t\t\t\t'middle-cube-basement')\n\t\t\t).mesh\n\t\t);\n\n\n\t\t// fans\n\t\tthis.fans = [];\n\n\t\tconst fansParams = [\n\t\t\t{x: 200, y: 100, z: -100, rx: -Math.PI / 2, rz: -Math.PI / 2},\n\t\t\t{x: 200, y: -50, z: 100, rx: -Math.PI / 2, rz: -Math.PI / 2}\n\t\t];\n\n\t\tfor (let i = 0; i < fansParams.length; i++) {\n\t\t\tconst fan = new Fan();\n\t\t\tfan.mesh.position.set(\n\t\t\t\tfansParams[i].x,\n\t\t\t\tfansParams[i].y,\n\t\t\t\tfansParams[i].z\n\t\t\t);\n\t\t\tfan.mesh.rotation.set(\n\t\t\t\tfansParams[i].rx,\n\t\t\t\t0,\n\t\t\t\tfansParams[i].rz\n\t\t\t);\n\n\t\t\tthis.fans.push(fan);\n\t\t};\n\n\n\t\t// fence perimeter\n\t\tconst fenceParams = [\n\t\t\t{x: 190, z: -190, ry: 0, mx: -1, mz: 0, count: 11},\n\t\t\t{x: 190, z: 185, ry: -Math.PI / 2, mx: 0, mz: -1, count: 10},\n\t\t\t{x: -190, z: 190, ry: 0, mx: 1, mz: 0, count: 4},\n\t\t\t{x: 80, z: 185, ry: Math.PI, mx: 1, mz: 0, count: 3},\n\t\t];\n\t\tconst fenceWidth = 38;\n\t\tlet fenceGeometry = new Geometry();\n\n\t\tfor (let i = 0; i < fenceParams.length; i++) {\n\n\t\t\tfor(let j = 0; j < fenceParams[i].count; j++) {\n\n\t\t\t\tconst fence = (new Fence()).mesh;\n\t\t\t\tfence.position.set(\n\t\t\t\t\tfenceParams[i].x + (j * fenceParams[i].mx * fenceWidth),\n\t\t\t\t\t210,\n\t\t\t\t\tfenceParams[i].z + (j * fenceParams[i].mz * fenceWidth)\n\t\t\t\t);\n\t\t\t\tfence.rotation.y = fenceParams[i].ry;\n\t\t\t\tfence.updateMatrix();\n\n\t\t\t\tfenceGeometry.merge(fence.geometry, fence.matrix);\n\t\t\t};\n\n\t\t};\n\n\t\tconst fencePerimeter = new Mesh(fenceGeometry, materials.wood);\n\t\tfencePerimeter.name = 'fence-perimeter';\n\t\tfencePerimeter.castShadow = true;\n\t\tfencePerimeter.receiveShadow = true;\n\n\n\t\t// pine\n\t\tconst pine = new Pine([1.2, 2, 1.2]).mesh;\n\t\tpine.position.set(-140, 200, 140);\n\n\n\t\t// windvane\n\t\tconst windvane = new Windvane();\n\t\twindvane.mesh.position.set(100, 200, -50);\n\t\twindvane.mesh.rotation.y += Math.PI / 16;\n\n\t\tthis.windvane = windvane;\n\n\n\t\t// ladder\n\t\tconst ladder = new Ladder().mesh;\n\t\tladder.position.set(-158, 200, -90);\n\t\tladder.rotation.z = Math.PI / 32;\n\n\n\t\t// stones\n\t\tconst stonesCoordinates = [];\n\n\t\tfor (let i = 0; i < 12; i++) {\n\t\t\tstonesCoordinates.push(\n\t\t\t\t[\n\t\t\t\t\t250 * Math.cos(i * Math.PI / 24),\n\t\t\t\t\t0,\n\t\t\t\t\t-180 * Math.sin(i * Math.PI / 24),\n\t\t\t\t]\n\t\t\t);\n\t\t};\n\n\t\tfor (let i = 0; i < 8; i++) {\n\t\t\tstonesCoordinates.push(\n\t\t\t\t[\n\t\t\t\t\t150 * Math.cos(i * Math.PI / 16) + 10,\n\t\t\t\t\t0,\n\t\t\t\t\t-100 * Math.sin(i * Math.PI / 16),\n\t\t\t\t]\n\t\t\t);\n\t\t};\n\n\t\tconst stones = new Stones(stonesCoordinates).mesh;\n\t\tstones.position.set(-210, 200, 170);\n\n\n\t\t// back side pipes\n\t\tconst pipesGeometry = new Geometry();\n\t\tconst glassGeometry = new Geometry();\n\n\t\tconst pipesParams = [\n\t\t\t{\n\t\t\t\ttype: 'straight',\n\t\t\t\tposition: [80, -475, 125],\n\t\t\t\trotation: [(Math.PI / 2), 0, 0]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'connection',\n\t\t\t\tposition: [80, -475, 35],\n\t\t\t\trotation: [(Math.PI / 2), 0, 0],\n\t\t\t\toptions: {\n\t\t\t\t\tm: 1\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'arc',\n\t\t\t\tposition: [80, -397.5, 20],\n\t\t\t\trotation: [-(Math.PI / 2), (Math.PI / 2), -(Math.PI / 2)],\n\t\t\t\toptions: {\n\t\t\t\t\tscale: 1.1\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'connection',\n\t\t\t\tposition: [80, -300, -57.5],\n\t\t\t\trotation: [0, 0, 0],\n\t\t\t\toptions: {\n\t\t\t\t\tm: 8\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'straight',\n\t\t\t\tposition: [-275, -75, 80],\n\t\t\t\trotation: [0, 0, (Math.PI / 2)]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'connection',\n\t\t\t\tposition: [-360, -75, 80],\n\t\t\t\trotation: [0, 0, (Math.PI / 2)],\n\t\t\t\toptions: {\n\t\t\t\t\tm: 1\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'arc',\n\t\t\t\tposition: [-370, 0, 80],\n\t\t\t\trotation: [0, 0, (Math.PI / 2)],\n\t\t\t\toptions: {\n\t\t\t\t\tscale: 1.1\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'connection',\n\t\t\t\tposition: [-450, 150, 80],\n\t\t\t\trotation: [0, 0, 0],\n\t\t\t\toptions: {\n\t\t\t\t\tm: 4\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\tfor (let i = 0; i < pipesParams.length; i++) {\n\n\t\t\tlet pipe;\n\t\t\t\n\t\t\t// \n\t\t\tfunction setParams(el, params) {\n\t\t\t\tel.position.set(\n\t\t\t\t\tparams.position[0],\n\t\t\t\t\tparams.position[1],\n\t\t\t\t\tparams.position[2],\n\t\t\t\t);\n\t\t\t\tel.rotation.set(\n\t\t\t\t\tparams.rotation[0],\n\t\t\t\t\tparams.rotation[1],\n\t\t\t\t\tparams.rotation[2],\n\t\t\t\t);\n\t\t\t\tel.updateMatrix();\n\t\t\t};\n\n\t\t\tswitch (pipesParams[i].type) {\n\t\t\t\tcase 'straight':\n\t\t\t\t\tpipe = new Mesh(\n\t\t\t\t\t\tnew CylinderGeometry(35, 35, 150, 8, 1)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'connection':\n\t\t\t\t\tpipe = (new PipeConnection(pipesParams[i].options.m)).mesh;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'arc':\n\t\t\t\t\tpipe = (new PipeCorner(false, false)).mesh;\n\t\t\t\t\tpipe.scale.set(\n\t\t\t\t\t\tpipesParams[i].options.scale,\n\t\t\t\t\t\tpipesParams[i].options.scale,\n\t\t\t\t\t\tpipesParams[i].options.scale\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t};\n\t\t\tsetParams(pipe, pipesParams[i]);\n\n\t\t\tpipesGeometry.merge(pipe.geometry, pipe.matrix);\n\n\t\t};\n\n\t\tconst pipes = new Mesh(pipesGeometry, materials.lightMetal);\n\t\tpipes.castShadow = true;\n\t\tpipes.receiveShadow = true;\n\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tfencePerimeter,\n\t\t\tpine,\n\t\t\twindvane.mesh,\n\t\t\tladder,\n\t\t\tstones,\n\t\t\t...(this.fans.map(fan => fan.mesh)),\n\t\t\tpipes\n\t\t);\n\t\t\n\t}\n}","import {\n\tShape,\n\tCatmullRomCurve3,\n\tVector3,\n\tMesh,\n\tCylinderGeometry,\n\tExtrudeGeometry } from 'three';\n\n\nexport default class Chimney {\n\tconstructor(width, height, radius = 5, steps = 8) {\n\n\t\tthis.radius = radius;\n\n\t\tconst spline = new CatmullRomCurve3([\n\t\t\tnew Vector3(0, 0, 0),\n\t\t\tnew Vector3(0, 0, width),\n\t\t\tnew Vector3(0, height, width + radius),\n\t\t]\n\t\t);\n\t\t\n\t\tconst pipeShape = new Shape();\n\t\t\n\t\tpipeShape.moveTo(\n\t\t\tthis.radius * Math.cos(0),\n\t\t\tthis.radius * Math.sin(0)\n\t\t);\n\n\t\tfor (let i = 1; i < 16; i++) {\n\t\t\tpipeShape.lineTo(\n\t\t\t\tthis.radius * Math.cos(i * (2 * Math.PI) / 16),\n\t\t\t\tthis.radius * Math.sin(i * (2 * Math.PI) / 16)\n\t\t\t);\n\t\t};\n\n\t\tthis.mesh = new Mesh(\n\t\t\tnew ExtrudeGeometry(\n\t\t\t\tpipeShape,\n\t\t\t\t{\n\t\t\t\t\tcurveSegments \t: 8,\n\t\t\t\t\tsteps\t\t\t: steps,\n\t\t\t\t\tbevelEnabled\t: false,\n\t\t\t\t\textrudePath\t\t: spline\n\t\t\t\t}\n\t\t\t),\n\t\t);\n\t}\n}","import {\n\tGeometry,\n\tMesh,\n\tObject3D,\n\tCylinderGeometry,\n\tExtrudeGeometry,\n\tShape,\n\tPath\n} from 'three';\n\nimport Cube from '../../modules/Cube';\nimport Chimney from './chimney';\n\nimport { colors } from '../../modules/colors';\n\nimport { materials } from '../../modules/materials';\n\n\nexport default class House {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'house';\n\n\t\t// stage\n\t\tconst size = {\n\t\t\tx: 140,\n\t\t\ty: 50,\n\t\t\tz: 140\n\t\t};\n\n\t\t// first floor\n\t\tconst firstFloor = new Cube(\n\t\t\t[size.x, size.y, size.z],\n\t\t\t{x: 0, y: (size.y / 2), z: -100},\n\t\t\tcolors.brick,\n\t\t\t'first-floor'\n\t\t).mesh;\n\t\tfirstFloor.castShadow = true;\n\t\tfirstFloor.receiveShadow = true;\n\n\t\t// basement\n\t\tconst basement = new Cube(\n\t\t\t[size.x + 10, size.y / 10, size.z + 10],\n\t\t\t{x: 0, y: (size.y / 20), z: -100},\n\t\t\tcolors.darkMetal,\n\t\t\t'basement'\n\t\t).mesh;\n\t\tbasement.castShadow = true;\n\t\tbasement.receiveShadow = true;\n\n\t\t// roof\n\t\tconst roof = new Object3D();\n\n\t\tconst roofLow = new Mesh(\n\t\t\tnew CylinderGeometry( (size.x - 40), (size.x - 35), 5, 4, 1 ),\n\t\t\tmaterials.brick\n\t\t);\n\t\troofLow.position.y -= 2.5;\n\t\troofLow.castShadow = true;\n\t\troofLow.receiveShadow = true;\n\n\t\tconst roofMiddle = new Mesh(\n\t\t\tnew CylinderGeometry( 20, 20, 5, 4, 1 ),\n\t\t\tmaterials.brick\n\t\t);\n\t\troofMiddle.position.y += 122.5;\n\t\troofMiddle.castShadow = true;\n\t\troofMiddle.receiveShadow = true;\n\n\t\tconst roofTop = new Mesh(\n\t\t\tnew CylinderGeometry( 15, 15, 5, 4, 1 ),\n\t\t\tmaterials.brick\n\t\t);\n\t\troofTop.position.y += 155;\n\t\troofTop.castShadow = true;\n\t\troofTop.receiveShadow = true;\n\n\n\n\t\troof.add(\n\t\t\troofLow,\n\t\t\troofMiddle,\n\t\t\troofTop\n\t\t);\n\t\troof.position.set(0, size.y, -100),\n\t\troof.rotation.y += Math.PI / 4;\n\n\t\t\n\t\t// roof parts\n\t\tconst roofCombinedGeometry = new Geometry();\n\n\t\tconst roofParams = [\n\t\t\t{ y: 20,  rT: 50, rB: 100, height: 40 },\n\t\t\t{ y: 70,  rT: 20, rB: 50,  height: 60 },\n\t\t\t{ y: 110, rT: 15, rB: 20,  height: 20 },\n\t\t\t{ y: 130, rT: 30, rB: 15,  height: 10 },\n\t\t\t{ y: 145, rT: 10, rB: 30,  height: 20 },\n\t\t\t{ y: 165, rT: 1,  rB: 10,  height: 20 },\n\t\t];\n\n\t\tfor (let i = 0; i < roofParams.length; i++) {\n\t\t\tconst roofPart = new Mesh(\n\t\t\t\tnew CylinderGeometry(\n\t\t\t\t\troofParams[i].rT,\n\t\t\t\t\troofParams[i].rB,\n\t\t\t\t\troofParams[i].height,\n\t\t\t\t\t4, 1\n\t\t\t\t),\n\t\t\t);\n\t\t\troofPart.position.y += roofParams[i].y;\n\t\t\troofPart.updateMatrix();\n\t\t\troofCombinedGeometry.merge(roofPart.geometry, roofPart.matrix);\n\t\t};\n\n\t\tconst roofCombined = new Mesh(roofCombinedGeometry, materials.roof);\n\t\troofCombined.castShadow = true;\n\t\troofCombined.receiveShadow = true;\n\n\t\troof.add(roofCombined);\n\n\t\t\n\t\t// chimneys\n\t\tconst chimneyCombinedGeometry = new Geometry();\n\n\t\tconst chimneyParams = [\n\t\t\t{ x: 0, y: 100, z: -70, width: 30, height: 50 },\n\t\t\t{ x: -10, y: 120, z: -80, width: 20, height: 80 }\n\t\t];\n\n\t\tfor (let i = 0; i < chimneyParams.length; i++) {\n\t\t\tconst chimney = (new Chimney(\n\t\t\t\tchimneyParams[i].width,\n\t\t\t\tchimneyParams[i].height\n\t\t\t)).mesh;\n\t\t\tchimney.position.set(\n\t\t\t\tchimneyParams[i].x,\n\t\t\t\tchimneyParams[i].y,\n\t\t\t\tchimneyParams[i].z\n\t\t\t);\n\t\t\tchimney.updateMatrix();\n\t\n\t\t\tchimneyCombinedGeometry.merge(chimney.geometry, chimney.matrix);\n\t\t};\n\n\t\tconst chimneyCombined = new Mesh(\n\t\t\tchimneyCombinedGeometry, materials.lightMetal\n\t\t);\n\t\tchimneyCombined.castShadow = true;\n\t\tchimneyCombined.receiveShadow = true;\n\n\n\t\t// door\n\t\tconst doorShape = new Shape();\n\n\t\tdoorShape.moveTo(15, -15);\n\t\tdoorShape.lineTo(15, 15);\n\n\t\tfor (let i = 0; i < 8; i++) {\n\t\t\tdoorShape.lineTo(\n\t\t\t\t15 * Math.cos( i * Math.PI / 8 ),\n\t\t\t\t10 * Math.sin( i * Math.PI / 8 ) + 15\n\t\t\t);\n\t\t};\n\n\t\tdoorShape.lineTo(-15, -15);\n\t\tdoorShape.moveTo(-15, 15);\n\n\t\tconst extrudeSettings = {\n\t\t\tsteps: 2,\n\t\t\tdepth: 4,\n\t\t\tbevelEnabled: false\n\t\t};\n\n\t\tconst door = new Mesh(\n\t\t\tnew ExtrudeGeometry(doorShape, extrudeSettings),\n\t\t\tmaterials.wood\n\t\t);\n\t\tdoor.castShadow = true;\n\t\tdoor.receiveShadow = true;\n\n\t\tdoor.position.set(70, 15, -125);\n\t\tdoor.rotation.y = Math.PI / 2;\n\n\n\t\t// window\n\t\tconst windowShape = new Shape();\n\t\twindowShape.moveTo(0, 0);\n\t\twindowShape.absarc(0, 0, 15, 0, Math.PI * 2);\n\n\t\tconst holePath = new Path();\n\t\tholePath.moveTo(0, 0);\n\t\tholePath.absarc(0, 0, 12, 0, Math.PI * 2);\n\t\twindowShape.holes.push( holePath );\n\n\t\tconst windowGeometry = new ExtrudeGeometry(\n\t\t\twindowShape,\n\t\t\t{\n\t\t\t\tdepth: 4,\n\t\t\t\tsteps: 1,\n\t\t\t\tbevelEnabled: false\n\t\t\t}\n\t\t);\n\n\t\tconst horizontalFrame = new Cube([1, 30, 4]);\n\t\tconst verticalFrame = new Cube([30, 1, 4]);\n\n\t\twindowGeometry.merge(horizontalFrame.geometry, horizontalFrame.matrix);\n\t\twindowGeometry.merge(verticalFrame.geometry, verticalFrame.matrix);\n\t\t\n\t\tconst houseWindow = new Mesh(windowGeometry, materials.wood);\n\t\thouseWindow.position.set(70, 25, -65);\n\t\thouseWindow.rotation.y = Math.PI / 2;\n\t\thouseWindow.scale.x = 1.15\n\n\t\thouseWindow.receiveShadow = true;\n\t\thouseWindow.castShadow = true;\n\n\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tbasement,\n\t\t\tfirstFloor,\n\t\t\tdoor,\n\t\t\thouseWindow,\n\t\t\troof,\n\t\t\tchimneyCombined\n\t\t);\n\t}\n}","import { Object3D, Mesh, Geometry, MeshPhongMaterial } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport Fence from '../fence';\nimport Fan from '../fan';\nimport Pine from '../pine';\nimport PipeCorner from '../pipeCorner';\nimport House from './House';\n\nimport { colors } from '../../modules/colors';\nimport { materials } from '../../modules/materials';\n\n\nexport default class TopIsland {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'top-island';\n\n\t\t// big cube\n\t\tthis.mesh.add(\n\t\t\t(new Cube(\n\t\t\t\t[400, 400, 400],\n\t\t\t\t{ x: 0, y: 0, z: 0 },\n\t\t\t\tcolors.lightGreen)\n\t\t\t).mesh\n\t\t);\n\n\n\t\t// fans\n\t\tthis.fans = [];\n\n\t\tconst fansParams = [\n\t\t\t{ x: -100, y: 100 },\n\t\t\t{ x: 100, y: -100 }\n\t\t];\n\n\t\tfor (let i = 0; i < fansParams.length; i++) {\t\n\t\t\tconst fan = new Fan();\n\t\t\tfan.mesh.position.set(\n\t\t\t\tfansParams[i].x,\n\t\t\t\tfansParams[i].y,\n\t\t\t\t200\n\t\t\t);\n\t\t\tfan.mesh.rotation.set(\n\t\t\t\tMath.PI / 2,\n\t\t\t\tMath.PI,\n\t\t\t\t0\n\t\t\t);\n\t\t\tthis.fans.push(fan);\n\t\t};\n\n\t\tthis.fans.map(fan => {\n\t\t\tthis.mesh.add(fan.mesh)\n\t\t});\n\n\n\t\t// house\n\t\tconst house = (new House()).mesh;\n\t\thouse.position.x += 70;\n\t\thouse.position.y += 200;\n\t\thouse.position.z += 5;\n\t\thouse.rotation.y -= Math.PI / 16;\n\n\t\tthis.mesh.add(\n\t\t\thouse\n\t\t);\n\n\n\t\t// fence perimeter\n\t\tlet fenceGeometry = new Geometry();\n\n\t\tconst fenceParams = [\n\t\t\t{x: 190, z: 187, ry: 0, mx: -1, mz: 0, count: 10},\n\t\t\t{x: -187, z: 185, ry: -Math.PI / 2, mx: 0, mz: -1, count: 10},\n\t\t\t{x: -187, z: -187, ry: Math.PI, mx: 1, mz: 0, count: 10},\n\t\t\t{x: 190, z: 118, ry: Math.PI / 2, mx: 0, mz: 1, count: 2},\n\t\t\t{x: 187, z: -155, ry: -Math.PI / 2, mx: 0, mz: -1, count: 1},\n\t\t];\n\t\tconst fenceWidth = 38;\n\n\t\tfor (let i = 0; i < fenceParams.length; i++) {\n\n\t\t\tfor(let j = 0; j < fenceParams[i].count; j++) {\n\n\t\t\t\tconst fence = (new Fence()).mesh;\n\t\t\t\tfence.position.set(\n\t\t\t\t\tfenceParams[i].x + (j * fenceParams[i].mx * fenceWidth),\n\t\t\t\t\t210,\n\t\t\t\t\tfenceParams[i].z + (j * fenceParams[i].mz * fenceWidth)\n\t\t\t\t);\n\t\t\t\tfence.rotation.y = fenceParams[i].ry;\n\t\t\t\tfence.updateMatrix();\n\n\t\t\t\tfenceGeometry.merge(fence.geometry, fence.matrix);\n\t\t\t};\n\n\t\t};\n\n\t\tconst fencePerimeter = new Mesh(fenceGeometry, materials.wood);\n\t\tfencePerimeter.name = 'fence-perimeter';\n\t\tfencePerimeter.castShadow = true;\n\t\tfencePerimeter.receiveShadow = true;\n\n\t\tthis.mesh.add(\n\t\t\tfencePerimeter\n\t\t);\n\n\n\t\t// pines\n\t\tconst pineParams = [\n\t\t\t{ x: 120, y: 200, z: 140, sx: 1, sy: 1, sz: 1 },\n\t\t\t{ x: 15, y: 200, z: 140, sx: 1, sy: 1.2, sz: 1 },\n\t\t\t{ x: -100, y: 200, z: 140, sx: 1.1, sy: 1.5, sz: 1.1 },\n\t\t\t{ x: -90, y: 200, z: -80, sx: 1.6, sy: 1.8, sz: 1.6 },\n\t\t];\n\n\t\tfor (let i = 0; i < pineParams.length; i++) {\n\t\t\tconst pine = (new Pine([\n\t\t\t\tpineParams[i].sx,\n\t\t\t\tpineParams[i].sy,\n\t\t\t\tpineParams[i].sz\n\t\t\t])).mesh;\n\t\t\tpine.position.set(\n\t\t\t\tpineParams[i].x,\n\t\t\t\tpineParams[i].y,\n\t\t\t\tpineParams[i].z\n\t\t\t);\n\n\t\t\tthis.mesh.add(pine);\n\t\t};\n\n\n\t\t// pipe corner\n\t\tconst pipeCorner = (new PipeCorner()).mesh;\n\t\tpipeCorner.position.x -= 60;\n\t\tpipeCorner.position.y += 215;\n\t\tpipeCorner.position.z += 40;\n\n\t\tthis.mesh.add(pipeCorner);\n\n\t\tthis.mesh.position.set(-400, 400, 0);\n\t}\n}","import {\n\tVector2,\n\tMesh,\n\tGeometry,\n\tExtrudeGeometry,\n\tLatheGeometry,\n\tShape,\n\tObject3D,\n\tEdgesGeometry,\n\tLineBasicMaterial,\nLineSegments } from 'three';\n\nimport { materials } from '../../modules/materials';\n\n\nexport default class Balloon {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'zeppelin-balloon';\n\n\t\tconst radius = 200;\n\t\tconst pointsCount = 12;\n\n\n\t\t// points\n\t\tconst points = [];\n\t\tfor (let i = 0; i < pointsCount; i++) {\n\t\t\tpoints.push(\n\t\t\t\tnew Vector2(\n\t\t\t\t\tradius * Math.sin( i * (Math.PI / pointsCount) ),\n\t\t\t\t\tradius * Math.cos( i * (Math.PI / pointsCount) ) * 2\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\n\n\t\n\t\t// balloon\n\t\tconst balloon = new Mesh(\n\t\t\tnew LatheGeometry( points ),\n\t\t\tmaterials.balloon\n\t\t);\n\t\t// balloon.castShadow = true;\n\t\tballoon.receiveShadow = true;\n\n\n\n\t\t// frame\n\t\tconst frameShape = new Shape();\n\t\tframeShape.moveTo( points[0].y, points[0].x );\n\n\t\tfor (let i = 1; i < (points.length - 1); i++) {\n\t\n\t\t\tframeShape.lineTo( points[i].y, points[i].x );\n\t\n\t\t};\n\t\tframeShape.moveTo( points[points.length] );\n\n\t\tconst frame = new Mesh(\n\t\t\tnew ExtrudeGeometry(\n\t\t\t\tframeShape,\n\t\t\t\t{\n\t\t\t\t\tsteps: 1,\n\t\t\t\t\tdepth: 20,\n\t\t\t\t\tbevelEnabled: false\n\t\t\t\t}\n\t\t\t),\n\t\t\tmaterials.lightMetal\n\t\t);\n\t\t// frame.rotation.y += Math.PI / 6;\n\t\tframe.rotation.z -= Math.PI / 2;\n\t\tframe.position.set(5, 0, -10);\n\n\t\tframe.castShadow = true;\n\t\tframe.receiveShadow = true;\n\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tballoon,\n\t\t\tframe\n\t\t);\n\n\t\tthis.mesh.rotation.x = Math.PI / 2;\n\n\t}\n}","import {\n\tShape,\n\tCatmullRomCurve3,\n\tMesh,\n\tExtrudeGeometry } from 'three';\n\n\nexport default class Hose {\n\tconstructor(radius, points, steps = 15) {\n\n\t\tthis.radius = radius;\n\t\t\n\t\tconst spline = new CatmullRomCurve3( points );\n\t\t\n\t\tconst shape = new Shape();\n\t\t\n\t\tshape.moveTo(\n\t\t\tthis.radius * Math.cos(0),\n\t\t\tthis.radius * Math.sin(0)\n\t\t);\n\n\t\tfor (let i = 1; i < 16; i++) {\n\t\t\tshape.lineTo(\n\t\t\t\tthis.radius * Math.cos(i * (2 * Math.PI) / 16),\n\t\t\t\tthis.radius * Math.sin(i * (2 * Math.PI) / 16)\n\t\t\t);\n\t\t};\n\n\t\tthis.mesh = new Mesh(\n\t\t\tnew ExtrudeGeometry(\n\t\t\t\tshape,\n\t\t\t\t{\n\t\t\t\t\tsteps\t\t\t: steps,\n\t\t\t\t\tbevelEnabled\t: false,\n\t\t\t\t\textrudePath\t\t: spline\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tthis.mesh.name = 'hose';\n\t}\n}","import {\n\tObject3D,\n\tMesh,\n\tGeometry,\n\tCylinderGeometry,\n\tLatheGeometry,\n\tVector2,\n\tVector3,\n\tShape,\n\tExtrudeGeometry,\n\tMatrix4 } from 'three';\n\nimport Hose from './hose';\nimport Cube from '../../modules/Cube';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Fan {\n\tconstructor(full = true, mirrored = false) {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'zeppelin-fan';\n\n\n\t\t\n\t\t// engine\n\t\tconst engineRadius = 40;\n\t\tconst engineGeometry = new Geometry();\n\t\t\n\t\tconst engineMain = new Mesh(\n\t\t\tnew CylinderGeometry(engineRadius, engineRadius - 5, (engineRadius * 2), 16, 1)\n\t\t);\n\n\t\tconst engineTopPoints = [];\n\n\t\tfor (let i = 0; i < 16; i++) {\n\t\t\tengineTopPoints.push(\n\t\t\t\tnew Vector2(\n\t\t\t\t\tengineRadius * Math.cos( i * (Math.PI / 32) ),\n\t\t\t\t\tengineRadius * Math.sin( i * (Math.PI / 32) ) / 3\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\n\t\tconst engineTop = new Mesh(\n\t\t\tnew LatheGeometry( engineTopPoints, 8 ),\n\t\t);\n\t\tengineTop.position.y += engineRadius;\n\t\tengineTop.updateMatrix();\n\n\n\t\tconst engineTier = new Mesh(\n\t\t\tnew CylinderGeometry(5, 5, 120, 6, 1)\n\t\t);\n\t\tengineTier.position.set( -60, 0, 0 )\n\t\tengineTier.rotation.z -= Math.PI / 2;\n\t\tengineTier.updateMatrix();\n\n\n\t\tif (full) {\n\t\t\t// engine air flow grid\n\t\t\tconst sideLeft = (new Cube( [15, 45, 1] )).mesh;\n\t\t\tsideLeft.position.set(35, 5, 15);\n\t\t\tsideLeft.updateMatrix();\n\n\t\t\tconst sideRight = sideLeft.clone();\n\t\t\tsideLeft.position.z -= 30;\n\t\t\tsideLeft.updateMatrix();\n\n\t\t\tengineGeometry.merge(sideLeft.geometry, sideLeft.matrix);\n\t\t\tengineGeometry.merge(sideRight.geometry, sideRight.matrix);\n\n\t\t\tfor (let i = -2; i < 4; i++) {\n\t\t\t\tlet engineSegment = new Mesh(\n\t\t\t\t\tnew CylinderGeometry(4, 4, 30, 3, 1)\n\t\t\t\t);\n\t\t\t\tengineSegment.rotation.set(Math.PI / 2, Math.PI / 3, 0);\n\t\t\t\tengineSegment.position.set(\n\t\t\t\t\t(engineRadius + i / 2 - 2),\n\t\t\t\t\t(i * 8),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t\tengineSegment.updateMatrix();\n\t\n\t\t\t\tengineGeometry.merge(engineSegment.geometry, engineSegment.matrix);\n\t\t\t};\n\n\t\t\t// hose\n\t\t\tlet m = (mirrored) ? (-1) : 1;\n\t\t\t\n\t\t\tconst hose = new Hose(4, [\n\t\t\t\tnew Vector3(-10, 28, m * 35),\n\t\t\t\tnew Vector3(0, 5, m * 50),\n\t\t\t\tnew Vector3(10, -4, m * 55),\n\t\t\t\tnew Vector3(20, -8, m * 50),\n\t\t\t\tnew Vector3(24, -12, m * 40),\n\t\t\t\tnew Vector3(20, -16, m * 25),\n\t\t\t]).mesh;\n\n\t\t\tengineGeometry.merge(hose.geometry, hose.matrix);\n\t\t};\n\n\t\tconst engineHub = new Mesh(\n\t\t\tnew CylinderGeometry(5, 10, 15, 6, 1, true)\n\t\t);\n\t\tengineHub.position.y += 58;\n\t\tengineHub.updateMatrix();\n\n\n\t\tengineGeometry.merge(engineMain.geometry, engineMain.matrix);\n\t\tengineGeometry.merge(engineTop.geometry, engineTop.matrix);\n\t\tengineGeometry.merge(engineTier.geometry, engineTier.matrix);\n\t\tengineGeometry.merge(engineHub.geometry, engineHub.matrix);\n\n\t\tconst engine = new Mesh(engineGeometry, materials.lightMetal);\n\t\tengine.castShadow = true;\n\t\tengine.receiveShadow = true;\n\n\n\n\t\t// propeller\n\t\tconst propellerGeometry = new Geometry();\n\n\t\tconst pipe = new Mesh(\n\t\t\tnew CylinderGeometry(4, 4, 280, 6, 1)\n\t\t);\n\t\tpipe.position.set(0, 100, 0);\n\t\tpipe.updateMatrix();\n\n\n\t\tconst bladesHub = new Mesh(\n\t\t\tnew CylinderGeometry(12, 5, 10, 6, 1)\n\t\t);\n\t\tbladesHub.position.set(0, 228, 0);\n\t\tbladesHub.updateMatrix();\n\n\n\t\tconst bladesGeometry = new Geometry();\n\n\t\tconst bladeShape = new Shape();\n\n\t\tbladeShape.moveTo(0, -5);\n\t\tfor (let i = -4; i < 4; i++) {\n\t\t\tbladeShape.lineTo(\n\t\t\t\t120 + 10 * Math.cos(i * Math.PI / 8),\n\t\t\t\t10 * Math.sin(i * Math.PI / 8)\n\t\t\t);\n\t\t};\n\t\tbladeShape.lineTo(0, 5);\n\n\t\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tlet blade = new Mesh(\n\t\t\t\tnew ExtrudeGeometry(\n\t\t\t\t\tbladeShape,\n\t\t\t\t\t{\n\t\t\t\t\t\tcurveSegments: 8,\n\t\t\t\t\t\tsteps: 1,\n\t\t\t\t\t\tdepth: 2,\n\t\t\t\t\t\tbevelEnabled: false\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t\tblade.rotation.z += i * (Math.PI / 2);\n\t\t\tblade.updateMatrix();\n\n\t\t\tbladesGeometry.merge(blade.geometry, blade.matrix);\n\t\t}\n\n\t\tconst blades = new Mesh(bladesGeometry, materials.white);\n\t\tblades.position.set(0, 235, 0);\n\t\tblades.geometry.applyMatrix4( new Matrix4().makeRotationX( Math.PI / 2 ) );\n\t\tblades.updateMatrix();\n\n\n\n\t\tpropellerGeometry.merge(pipe.geometry, pipe.matrix);\n\t\tpropellerGeometry.merge(bladesHub.geometry, bladesHub.matrix);\n\t\tpropellerGeometry.merge(blades.geometry, blades.matrix);\n\n\t\tthis.propeller = new Mesh(propellerGeometry, materials.white);\n\t\tthis.propeller.castShadow = true;\n\t\tthis.propeller.receiveShadow = true;\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tengine,\n\t\t\tthis.propeller\n\t\t);\n\t}\n\n\trotate = (value) => {\n\t\tthis.propeller.rotation.y += value\n\t}\n}","import {\n\tMesh,\n\tGeometry,\n\tCylinderGeometry,\n\tLatheGeometry,\n\tVector2 } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Tanks {\n\tconstructor() {\n\n\t\tconst tanksGeometry = new Geometry();\n\n\n\t\t// single tank\n\t\tconst tankGeometry = new Geometry();\n\t\tconst tankRadius = 30;\n\n\n\t\tconst tankCenter = new Mesh(\n\t\t\tnew CylinderGeometry(tankRadius, tankRadius, 70, 16, 1)\n\t\t);\n\n\t\tconst tankTopPoints = [];\n\n\t\tfor (let i = 0; i < 16; i++) {\n\t\t\ttankTopPoints.push(\n\t\t\t\tnew Vector2(\n\t\t\t\t\ttankRadius * Math.cos( i * (Math.PI / 32) ),\n\t\t\t\t\ttankRadius * Math.sin( i * (Math.PI / 32) ) / 2\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\n\t\tconst tankTop = new Mesh(\n\t\t\tnew LatheGeometry( tankTopPoints, 12 ),\n\t\t);\n\t\ttankTop.position.y = 35;\n\t\ttankTop.updateMatrix();\n\n\t\tconst tankBottom = tankTop.clone();\n\t\ttankBottom.rotation.z += Math.PI;\n\t\ttankBottom.position.y = -35;\n\t\ttankBottom.updateMatrix();\n\n\t\tconst tankHub = new Mesh(new CylinderGeometry(8, 8, 10, 8, 1));\n\t\ttankHub.position.y += 50;\n\t\ttankHub.updateMatrix();\n\n\t\ttankGeometry.merge(tankCenter.geometry, tankCenter.matrix);\n\t\ttankGeometry.merge(tankTop.geometry, tankTop.matrix);\n\t\ttankGeometry.merge(tankBottom.geometry, tankBottom.matrix);\n\t\ttankGeometry.merge(tankHub.geometry, tankHub.matrix);\n\n\n\t\t// tank merge\n\t\tconst tankLeft = new Mesh(tankGeometry);\n\t\ttankLeft.position.z += 35;\n\t\ttankLeft.updateMatrix();\n\n\t\tconst tankRight = tankLeft.clone();\n\t\ttankRight.position.z -= 70;\n\t\ttankRight.updateMatrix();\n\n\n\t\t// frame\n\t\tconst frame = (new Cube( [5, 4, 80] )).mesh;\n\t\tframe.position.y += 52;\n\t\tframe.updateMatrix();\n\n\n\t\t// tier\n\t\tconst tier = new Mesh(\n\t\t\tnew CylinderGeometry(2, 2, 120, 6, 1)\n\t\t);\n\t\ttier.position.set( -60, 52, 0 )\n\t\ttier.rotation.z -= Math.PI / 2;\n\t\ttier.updateMatrix();\n\n\n\t\ttanksGeometry.merge(tankLeft.geometry, tankLeft.matrix);\n\t\ttanksGeometry.merge(tankRight.geometry, tankRight.matrix);\n\t\ttanksGeometry.merge(frame.geometry, frame.matrix);\n\t\ttanksGeometry.merge(tier.geometry, tier.matrix);\n\t\t\n\t\tthis.mesh = new Mesh(tanksGeometry, materials.lightMetal);\n\t\tthis.mesh.name = 'fuel-tanks';\n\t\tthis.mesh.castShadow = true;\n\t\tthis.mesh.receiveShadow = true;\n\t}\n}","import {\n\tGeometry,\n\tExtrudeGeometry,\n\tCylinderGeometry,\n\tMesh,\n\tObject3D,\n\tShape,\n\tPath } from 'three';\n\nimport Cube from '../../modules/Cube';\nimport { materials } from '../../modules/materials';\n\n\nexport default class Turbine {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'turbine';\n\n\t\tconst turbineGeometry = new Geometry();\n\n\t\n\t\tconst turbineOuterShape = new Shape();\n\t\tturbineOuterShape.moveTo(0, 0);\n\t\tturbineOuterShape.absarc(0, 0, 60, 0, Math.PI * 2);\n\n\t\tconst holePath = new Path();\n\t\tholePath.moveTo(0, 0);\n\t\tholePath.absarc(0, 0, 55, 0, Math.PI * 2);\n\t\tturbineOuterShape.holes.push( holePath );\n\n\t\tconst turbineOuter = new Mesh(\n\t\t\tnew ExtrudeGeometry(\n\t\t\t\tturbineOuterShape,\n\t\t\t\t{\n\t\t\t\t\tdepth: 80,\n\t\t\t\t\tsteps: 1,\n\t\t\t\t\tbevelEnabled: false\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tturbineOuter.position.z -= 40\n\t\tturbineOuter.updateMatrix();\n\n\n\t\t// pipe\n\t\tconst pipe = (new Cube(\n\t\t\t[150, 5, 30],\n\t\t\t{x: -130, y: 0, z: 0}\n\t\t)).mesh;\n\n\n\t\t// engine support\n\t\tconst engineSupport = (new Cube(\n\t\t\t[118, 5, 10]\n\t\t)).mesh;\n\t\tengineSupport.rotation.z += Math.PI / 4;\n\t\tengineSupport.updateMatrix();\n\n\n\t\tconst engine = new Mesh(\n\t\t\tnew CylinderGeometry(20, 20, 50, 8, 1)\n\t\t);\n\t\tengine.rotation.x += Math.PI / 2;\n\t\tengine.updateMatrix();\n\n\n\n\t\tturbineGeometry.merge(turbineOuter.geometry, turbineOuter.matrix);\n\t\tturbineGeometry.merge(pipe.geometry, pipe.matrix);\n\t\tturbineGeometry.merge(engineSupport.geometry, engineSupport.matrix);\n\t\tturbineGeometry.merge(engine.geometry, engine.matrix);\n\n\t\tconst turbine = new Mesh(turbineGeometry, materials.darkMetal);\n\t\tturbine.castShadow = true;\n\t\tturbine.receiveShadow = true;\n\n\n\t\t// propeller\n\t\tconst propellerGeometry = new Geometry();\n\n\t\tfor (let i = 0; i < 12; i++) {\n\t\t\tconst blade = new Cube(\n\t\t\t\t[50, 2, 1],\n\t\t\t\t{\n\t\t\t\t\tx: 4 * Math.cos(i * (Math.PI / 6)),\n\t\t\t\t\ty: 4 * Math.sin(i * (Math.PI / 6)),\n\t\t\t\t\tz: 30\n\t\t\t\t}\n\t\t\t).mesh;\n\t\t\tblade.geometry.translate(20, 0, 0);\n\n\t\t\tblade.geometry.vertices[1].z -= 8;\n\t\t\tblade.geometry.vertices[1].y += 10;\n\n\t\t\tblade.rotation.z += i * Math.PI / 6;\n\t\t\tblade.updateMatrix();\n\n\t\t\tpropellerGeometry.merge(blade.geometry, blade.matrix);\n\t\t};\n\n\t\t// hub\n\t\tconst propellerHub = new Mesh(\n\t\t\tnew CylinderGeometry(10, 1, 10, 8, 1)\n\t\t);\n\t\tpropellerHub.rotation.x -= Math.PI / 2;\n\t\tpropellerHub.position.z += 35;\n\t\tpropellerHub.updateMatrix();\n\t\tpropellerGeometry.merge(propellerHub.geometry, propellerHub.matrix);\n\n\n\t\t// full propeller\n\t\tthis.propeller = new Mesh(propellerGeometry, materials.lightMetal);\n\t\tthis.propeller.castShadow = true;\n\t\tthis.propeller.receiveShadow = true;\n\n\n\t\tthis.mesh.add(\n\t\t\tturbine,\n\t\t\tthis.propeller\n\t\t);\n\t}\n\n\trotate = (value) => {\n\t\tthis.propeller.rotation.z += value;\n\t}\n}","import {\n\tMesh,\n\tCylinderGeometry,\n\tObject3D } from 'three';\n\nimport { materials } from '../../modules/materials';\n\nimport Turbine from './Turbine';\n\n\nexport default class Cabine {\n\tconstructor() {\n\t\t\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'cabine';\n\n\n\t\t// this\n\t\tconst cabine = new Mesh(\n\t\t\tnew CylinderGeometry(150, 100, 80, 16, 1),\n\t\t\tmaterials.darkMetal\n\t\t);\n\t\tcabine.scale.x = .5;\n\t\tcabine.updateMatrix();\n\n\n\t\t// turbine\n\t\tthis.turbines = [];\n\n\t\tconst turbineParams = [\n\t\t\t{x: 200, y: -50, z: 0, rx: 0, ry: 0, rz: 0},\n\t\t\t{x: -200, y: -50, z: 0, rx: Math.PI, ry: Math.PI, rz: Math.PI / 4},\n\t\t];\n\n\t\tfor (let i = 0; i < turbineParams.length; i++) {\n\t\t\tconst turbine = new Turbine();\n\t\t\tturbine.mesh.position.set(\n\t\t\t\tturbineParams[i].x,\n\t\t\t\tturbineParams[i].y,\n\t\t\t\tturbineParams[i].z\n\t\t\t);\n\n\t\t\tturbine.mesh.rotation.set(\n\t\t\t\tturbineParams[i].rx,\n\t\t\t\tturbineParams[i].ry,\n\t\t\t\tturbineParams[i].rz\n\t\t\t);\n\n\t\t\tturbine.mesh.rotation.z -= Math.PI / 8;\n\n\t\t\tthis.turbines.push(turbine);\n\t\t};\n\n\n\n\t\t// final\n\t\tthis.mesh.add(\n\t\t\tcabine,\n\t\t\t...(this.turbines.map(turbine => turbine.mesh))\n\t\t);\n\t\tthis.mesh.castShadow = true;\n\t\tthis.mesh.receiveShadow = true;\n\t}\n}","import { Object3D, ExtrudeGeometry, Geometry, Mesh, Vector3 } from 'three';\n\nimport { materials } from '../../modules/materials';\n\nimport Balloon from './Balloon';\nimport Fan from './Fan';\nimport Tanks from './Tanks';\nimport Cabine from './Cabine';\nimport Hose from './hose';\n\n\nexport default class Zeppelin {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'zeppelin';\n\n\t\tthis.mesh.position.set(-400, 550, -900);\n\n\n\t\tconst balloon = (new Balloon()).mesh;\n\t\t\n\t\t\n\t\t// fans\n\t\tthis.fans = [];\n\n\t\tconst fansParams = [\n\t\t\t{x: 250, y: 0, z: 200, ry: 0, full: true, mirrored: false},\n\t\t\t{x: 240, y: 0, z: -200, ry: 0, full: true, mirrored: true},\n\t\t\t{x: -250, y: 0, z: 200, ry: Math.PI, full: false, mirrored: false},\n\t\t\t{x: -240, y: 0, z: -200, ry: Math.PI, full: false, mirrored: false}\n\t\t];\n\n\t\tfor (let i = 0; i < fansParams.length; i++) {\n\t\t\tconst fan = new Fan(fansParams[i].full, fansParams[i].mirrored);\n\t\t\tfan.mesh.position.set(\n\t\t\t\tfansParams[i].x,\n\t\t\t\tfansParams[i].y,\n\t\t\t\tfansParams[i].z\n\t\t\t);\n\t\t\tfan.mesh.rotation.y += fansParams[i].ry;\n\t\t\t// fan.mesh.rotation.x += Math.PI;\n\t\t\tthis.fans.push(fan);\n\t\t};\n\n\n\t\t// fuel tanks\n\t\tconst tanks = (new Tanks()).mesh;\n\t\ttanks.rotation.z -= Math.PI / 8;\n\t\ttanks.position.set(220, -65, -50);\n\n\n\t\t// hoses\n\t\tconst hosesGeometry = new Geometry();\n\n\t\tconst hosesParams = [\n\t\t\t[\n\t\t\t\tnew Vector3(200, -110, -15),\n\t\t\t\tnew Vector3(210, -150, 20),\n\t\t\t\tnew Vector3(195, -10, 60),\n\t\t\t\tnew Vector3(195, -50, 100),\n\t\t\t\tnew Vector3(220, 0, 160)\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Vector3(200, -110, -85),\n\t\t\t\tnew Vector3(210, -160, -140),\n\t\t\t\tnew Vector3(220, 20, -180)\n\t\t\t]\n\t\t];\n\n\t\tfor (let i = 0; i < hosesParams.length; i++) {\n\t\t\tconst hose = (new Hose( 4, hosesParams[i], 40 )).mesh;\n\n\t\t\thosesGeometry.merge(hose.geometry, hose.matrix);\n\t\t};\n\n\t\tconst hoses = new Mesh(hosesGeometry, materials.lightMetal);\n\t\thoses.castShadow = true;\n\t\thoses.receiveShadow = true;\n\n\n\t\t// cabine\n\t\tthis.cabine = new Cabine();\n\t\tthis.cabine.mesh.position.y -= 210;\n\n\n\t\tthis.mesh.add(\n\t\t\tthis.cabine.mesh,\n\t\t\tballoon,\n\t\t\t...(this.fans.map(fan => fan.mesh)),\n\t\t\ttanks,\n\t\t\thoses\n\t\t);\n\n\t\t// this.mesh.rotation.z = Math.PI;\n\t}\n}","import { Shape, Mesh, Vector3, ExtrudeGeometry, CatmullRomCurve3 } from 'three';\n\nimport { materials } from './materials';\n\n\nexport default class Water {\n\tconstructor(points = [new Vector3(0, 0, 0), new Vector3(1, 1, 1)], steps = 10) {\n\n\t\t// river path\n\t\tconst spline = new CatmullRomCurve3(points);\n\n\t\tvar extrudeSettings = {\n\t\t\tsteps\t\t\t: steps,\n\t\t\tbevelEnabled\t: false,\n\t\t\textrudePath\t\t: spline\n\t\t};\n\n\t\tconst circle = new Shape();\n\t\tconst cirlceRadius = 36;\n\t\tconst circleSegments = 16;\n\n\t\tcircle.moveTo(cirlceRadius * Math.cos(0), cirlceRadius * Math.sin(0));\n\n\t\tfor (let i = 1; i < circleSegments; i++) {\n\t\t\tcircle.lineTo(\n\t\t\t\tcirlceRadius * Math.cos(i * (2 * Math.PI) / circleSegments),\n\t\t\t\tcirlceRadius * Math.sin(i * (2 * Math.PI) / circleSegments) / 1.5\n\t\t\t);\n\t\t};\n\n        const geometry = new ExtrudeGeometry(circle, extrudeSettings);\n        const material = materials.water;\n\n\n\t\t// animation prepare\n        geometry.mergeVertices();\n\n\t\tconst l = geometry.vertices.length;\n\t\n        this.waves = [];\n\n        for (let i = 0; i < l; i++) {\n\n\t\t\tconst v = geometry.vertices[i];\n\n\t\t\tthis.waves.push({\n\t\t\t\ty: v.y,\n\t\t\t\tx: v.x,\n\t\t\t\tz: v.z,\n\t\t\t\tang: Math.random() * Math.PI * 2,\n\t\t\t\tamp: 5 + Math.random() * 15,\n\t\t\t\tspeed: 0.032 + Math.random() * 0.064\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.mesh = new Mesh(geometry, material);\n\t\tthis.mesh.receiveShadow = true;\n\t\tthis.mesh.castShadow = true;\n\t}\n\n\tmoveWaves = () => {\n\n\t\tconst verts = this.mesh.geometry.vertices;\n\t\tconst l = verts.length;\n\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\t\n\t\t\tconst v = verts[i];\n\n\t\t\t// get the data associated to it\n\t\t\tconst vprops = this.waves[i];\n\n\t\t\t// update the position of the vertex\n\t\t\tv.x = vprops.x - Math.cos(vprops.ang) * vprops.amp;\n\t\t\tv.y = vprops.y + Math.sin(vprops.ang) * vprops.amp;\n\n\t\t\t// increment the angle for the next frame\n\t\t\tvprops.ang += vprops.speed;\n\n\t\t}\n\n\t\tthis.mesh.geometry.verticesNeedUpdate = true;\n\t}\n}","import {\n\tObject3D,\n\tGeometry,\n\tCylinderGeometry,\n\tMesh,\n\tPointLight } from 'three';\n\nimport Cube from './Cube';\n\nimport { materials } from './materials';\n\n\nexport default class LampPost {\n\tconstructor() {\n\n\t\tthis.mesh = new Object3D();\n\t\tthis.mesh.name = 'lamp-post';\n\n\t\t// base\n\t\tconst baseVertical = (new Cube(\n\t\t\t[8, 100, 8]\n\t\t)).mesh;\n\t\tbaseVertical.geometry.vertices[2].x += 1;\n\t\tbaseVertical.geometry.vertices[2].z += 1;\n\t\tbaseVertical.geometry.vertices[3].x += 1;\n\t\tbaseVertical.geometry.vertices[3].z -= 1;\n\t\tbaseVertical.geometry.vertices[6].x -= 1;\n\t\tbaseVertical.geometry.vertices[6].z -= 1;\n\t\tbaseVertical.geometry.vertices[7].x -= 1;\n\t\tbaseVertical.geometry.vertices[7].z += 1;\n\t\tbaseVertical.updateMatrix();\n\n\t\tconst baseHorizontal = (new Cube(\n\t\t\t[6, 6, 40],\n\t\t\t{x: 0, y: 45, z: 12}\n\t\t)).mesh;\n\n\t\tconst baseAngle = (new Cube(\n\t\t\t[4, 4, 20],\n\t\t\t{x: 0, y: 38, z: 10}\n\t\t)).mesh;\n\t\tbaseAngle.rotation.x -= Math.PI / 4;\n\t\tbaseAngle.updateMatrix();\n\n\n\t\tconst baseGeometry = new Geometry();\n\t\tbaseGeometry.merge(baseVertical.geometry, baseVertical.matrix);\n\t\tbaseGeometry.merge(baseHorizontal.geometry, baseHorizontal.matrix);\n\t\tbaseGeometry.merge(baseAngle.geometry, baseAngle.matrix);\n\n\t\tconst base = new Mesh(baseGeometry, materials.wood);\n\t\tbase.castShadow = true;\n\t\tbase.receiveShadow = true;\n\n\n\t\t// lamp\n\t\tconst lamp = new Mesh(\n\t\t\tnew CylinderGeometry(1, 6, 4, 8),\n\t\t\tmaterials.darkMetal\n\t\t);\n\t\tlamp.castShadow = true;\n\t\tlamp.receiveShadow = true;\n\t\tlamp.position.set(0, 40, 30);\n\n\n\t\t// light\n\t\tthis.light = new PointLight(0xfddb92, 0, 0, 0);\n\n\t\tthis.light.castShadow = false;\n\t\tthis.light.shadow.mapSize.width = 16;\n\t\tthis.light.shadow.mapSize.height = 16;\n\n\t\tthis.light.position.set(-10, 30, 30);\n\n\n\t\tthis.mesh.add(\n\t\t\tbase,\n\t\t\tlamp,\n\t\t\tthis.light\n\t\t);\n\t}\n\n\tturnLights = (status) => {\n\t\tif (status) {\n\t\t\tthis.light.intensity = .95;\n\t\t\tthis.light.distance = 1000;\n\t\t\tthis.light.decay = 2;\n\t\t\tthis.light.castShadow = true;\n\t\t\tthis.light.shadow.mapSize.width = 128;\n\t\t\tthis.light.shadow.mapSize.height = 128;\n\t\t} else {\n\t\t\tthis.light.intensity = 0;\n\t\t\tthis.light.distance = 1;\n\t\t\tthis.light.decay = 1;\n\t\t\tthis.light.castShadow = false;\n\t\t\tthis.light.shadow.mapSize.width = 8;\n\t\t\tthis.light.shadow.mapSize.height = 8;\n\t\t};\n\t}\n}","\nexport const lightParams = {\n\n\tsunrise: {\n\t\themisphereLight: {\n\t\t\tintensity: .6\n\t\t},\n\t\tambientLight: {\n\t\t\tintensity: .3\n\t\t},\n\t\tsunLight: {\n\t\t\tintensity: .75,\n\t\t\tposition: [630, 210, -110],\n\t\t\tcolor: 0xffba87\n\t\t}\n\t},\n\n\tmidday: {\n\t\themisphereLight: {\n\t\t\tintensity: .9\n\t\t},\n\t\tambientLight: {\n\t\t\tintensity: .5\n\t\t},\n\t\tsunLight: {\n\t\t\tintensity: .75,\n\t\t\tposition: [-280, 695, 350],\n\t\t\tcolor: 0xffffff\n\t\t}\n\t},\n\n\tsunset: {\n\t\themisphereLight: {\n\t\t\tintensity: .6\n\t\t},\n\t\tambientLight: {\n\t\t\tintensity: .3\n\t\t},\n\t\tsunLight: {\n\t\t\tintensity: .75,\n\t\t\tposition: [-290, 560, 900],\n\t\t\tcolor: 0xffba87\n\t\t}\n\t},\n\n\tmidnight: {\n\t\themisphereLight: {\n\t\t\tintensity: .025\n\t\t},\n\t\tambientLight: {\n\t\t\tintensity: .025\n\t\t},\n\t\tsunLight: {\n\t\t\tintensity: .025,\n\t\t\tposition: [-420, 800, 370],\n\t\t\tcolor: 0xeeeeee\n\t\t}\n\t}\n\n}","\nexport const breakpoints = [6, 8, 17, 20];","\nexport default class Time {\n\tconstructor() {\n\t\tthis.now = new Date(0)\n\n\t\tthis.timeNode = document.getElementById('time')\n\t\tthis.dayNode = document.getElementById('day')\n\n\t\tthis.update()\n\t}\n\n\tupdate = () => {\n\t\tif ((Date.now() - this.now) > 60000) {\n\t\t\t\n\t\t\tthis.now = new Date()\n\n\t\t\tthis.hours = ('0' + this.now.getHours()).slice(-2)\n\t\t}\n\t}\n\n\tgetHours = () => this.hours\n}","import * as dat from 'dat.gui'\nimport {\n\tHemisphereLight,\n\tAmbientLight,\n\tObject3D,\n\tVector3,\n\tClock,\n\tDirectionalLightHelper,\n} from 'three'\n\nimport clamp from '@/utils/clamp'\n\nimport createScene from './createScene'\nimport createCamera from './createCamera'\nimport createRenderer from './createRenderer'\nimport createSun from './createSun'\n\nimport BottomIsland from '@/scene/BottomIsland/BottomIsland'\nimport MiddleIsland from '@/scene/MiddleIsland/MiddleIsland'\nimport TopIsland from '@/scene/TopIsland/TopIsland'\nimport Zeppelin from '@/scene/Zeppelin/Zeppelin'\n\nimport Water from './Water'\nimport LampPost from './LampPost'\n\n// temp\nimport { materials } from './materials'\n\nimport { lightParams } from './lightParams'\nimport { breakpoints } from './daytimeParams'\n\nimport Time from './Time'\n\n\nlet init = ({ dpi, antialias }) => {\n\n\tlet W = window.innerWidth\n\tlet H = window.innerHeight\n\n\twindow.addEventListener('resize', () => {\n\t\tW = window.innerWidth\n\t\tH = window.innerHeight\n\n\t\trenderer.setSize(W, H)\n\t\tcamera.aspect = W / H\n\t\tcamera.updateProjectionMatrix()\n\n\t\tdraw() // safari fix\n\t}, false)\n\n\n\tconst container = document.getElementById('scene')\n\tconst canvas = container.querySelector('canvas')\n\n\t// main\n\tconst scene = createScene()\n\tconst camera = createCamera(W, H)\n\tconst renderer = createRenderer({ canvas, W, H, dpi, antialias })\n\n\n\t// lights (default params)\n\tconst hemisphereLight = new HemisphereLight(0xaaaaaa, 0x000000, .9)\n\tconst ambientLight = new AmbientLight(0x404040, .5)\n\tconst sunLight = createSun()\n\n\n\tlet setLights = dayTime => {\n\n\t\themisphereLight.intensity = lightParams[dayTime].hemisphereLight.intensity\n\n\t\tambientLight.intensity = lightParams[dayTime].ambientLight.intensity\n\n\t\tsunLight.intensity = lightParams[dayTime].sunLight.intensity\n\t\tsunLight.color.setHex(lightParams[dayTime].sunLight.color)\n\t\tsunLight.position.set(...lightParams[dayTime].sunLight.position)\n\n\t\tif (dayTime === 'midnight') {\n\t\t\tlampPosts.map(lampPost => lampPost.turnLights(true) )\n\t\t\tmaterials.line.color.setHex( 0x111111 );\n\t\t} else {\n\t\t\tlampPosts.map(lampPost => lampPost.turnLights() )\n\t\t\tmaterials.line.color.setHex( 0xdcbbb4 )\n\t\t}\n\t}\n\n\t// orbit controls\n\t// const controls = new OrbitControls(camera);\n\t// controls.enabled = false;\n\n\tconst bottomIsland = new BottomIsland()\n\tconst middleIsland = new MiddleIsland()\n\tconst topIsland = new TopIsland()\n\tconst zeppelin = new Zeppelin()\n\n\tconst islands = new Object3D()\n\tislands.name = 'islands'\n\n\tislands.add(\n\t\tbottomIsland.mesh,\n\t\tmiddleIsland.mesh,\n\t\ttopIsland.mesh,\n\t)\n\n\n\t// river parts\n\tconst river = []\n\n\tconst riverParams = [\n\t\t{\n\t\t\tpoints: [\n\t\t\t\tnew Vector3(-450, 690, 40),\n\t\t\t\tnew Vector3(-370, 615, 40),\n\t\t\t\tnew Vector3(-195, 600, 40),\n\t\t\t\tnew Vector3(-180, 210, 40),\n\t\t\t\tnew Vector3(-60, 210, 50),\n\t\t\t\tnew Vector3(-20, 210, 100),\n\t\t\t\tnew Vector3(15, 205, 210),\n\t\t\t\tnew Vector3(0, -180, 230),\n\t\t\t\tnew Vector3(0, -180, 570),\n\t\t\t],\n\t\t\tsteps: 25,\n\t\t},\n\t\t{\n\t\t\tpoints: [\n\t\t\t\tnew Vector3(0, -250, 665),\n\t\t\t\tnew Vector3(0, -380, 665),\n\t\t\t],\n\t\t\tsteps: 4,\n\t\t},\n\t\t{\n\t\t\tpoints: [\n\t\t\t\tnew Vector3(-450, 90, 80),\n\t\t\t\tnew Vector3(-450, 0, 80),\n\t\t\t],\n\t\t\tsteps: 2,\n\t\t},\n\t]\n\n\tfor (let i = 0; i < riverParams.length; i++) {\n\t\triver.push( new Water(riverParams[i].points, riverParams[i].steps) )\n\t}\n\n\triver.map(riverPart => islands.add(riverPart.mesh))\n\n\n\t// lamp posts\n\tlet lampPosts = []\n\n\tconst lampPostParams = [\n\t\t{ x: -215, y: 650, z: -185, ry: 0 },\n\t\t{ x: -215, y: 650, z: 185, ry: Math.PI },\n\t\t{ x: 180, y: 250, z: -175, ry: -Math.PI / 4 },\n\t\t{ x: 170, y: -150, z: 400, ry: -Math.PI / 2 },\n\t]\n\n\tfor (let i = 0; i < lampPostParams.length; i++) {\n\t\tconst lampPost = new LampPost();\n\n\t\tlampPost.mesh.position.set(\n\t\t\tlampPostParams[i].x,\n\t\t\tlampPostParams[i].y,\n\t\t\tlampPostParams[i].z,\n\t\t)\n\n\t\tlampPost.mesh.rotation.y += lampPostParams[i].ry\n\n\t\tlampPosts.push( lampPost )\n\t}\n\n\tislands.add(\n\t\t...(lampPosts.map( lampPost => lampPost.mesh ))\n\t)\n\n\n\t// final\n\tscene.add(\n\t\themisphereLight,\n\t\tambientLight,\n\t\tsunLight,\n\t\t// sunLightHelper, // temp\n\t\tislands,\n\t\tzeppelin.mesh,\n\t)\n\t// isometric view\n\tscene.rotation.x = Math.PI / 4\n\tscene.rotation.y = - Math.PI / 4\n\n\n\t// animation\n\tconst clock = new Clock()\n\tlet delta\n\n\n\t// pointer position\n\tconst pointer = {\n\t\tx: 0, // -1..1\n\t\ty: 0,\n\t}\n\n\tif (window.matchMedia('(hover)').matches) {\n\n\t\tdocument.addEventListener('mousemove', ({ clientX, clientY }) => {\n\t\t\tpointer.x = -1 + (clientX / W) * 2\n\t\t\tpointer.y = 1 - (clientY / H) * 2\n\t\t})\n\t}\n\n\t// mobile gyroscope\n\tlet gyroscope = {\n\t\tx: 0,\n\t\ty: 0,\n\t}\n\tlet checkOrientation = ({ beta, gamma }) => {\n\t\tif (!gyroscope.initial) {\n\t\t\treturn gyroscope.initial = {\n\t\t\t\tx: beta,\n\t\t\t\ty: gamma,\n\t\t\t}\n\t\t}\n\n\t\tgyroscope.x = clamp(-90, (beta - gyroscope.initial.x), 90) || 0\n\t\tgyroscope.y = clamp(-45, (gamma - gyroscope.initial.y), 45) || 0\n\n\t\tpointer.y = -gyroscope.x / 90\n\t\tpointer.x = -gyroscope.y / 45\n\t}\n\n\tif (window.DeviceOrientationEvent && typeof window.DeviceOrientationEvent.requestPermission === 'function') {\n\t\tlet button = document.createElement('button')\n\t\tbutton.id = 'gyroscope'\n\n\t\tbutton.addEventListener('click', () => {\n\t\t\tDeviceOrientationEvent.requestPermission()\n\t\t\t\t.then(permissionState => {\n\t\t\t\t\tif (permissionState === 'granted')\n\t\t\t\t\t\twindow.addEventListener('deviceorientation', checkOrientation)\n\t\t\t\t\t\tbutton.classList.add('hidden')\n\t\t\t\t\t})\n\t\t\t\t.catch(console.log)\n\t\t})\n\t\tdocument.body.appendChild(button)\n\n\t} else window.addEventListener('deviceorientation', checkOrientation)\n\n\n\tconst time = new Time()\n\tlet hours = +time.getHours()\n\n\tlet updateLights = hours => {\n\t\tif (hours >= breakpoints[0] && hours < breakpoints[1]) {\n\t\t\tcontainer.className = 'sunrise'\n\t\t\tsetLights('sunrise')\n\t\n\t\t} else if (hours >= breakpoints[1] && hours < breakpoints[2]) {\n\t\t\tcontainer.className = 'midday'\n\t\t\tsetLights('midday')\n\t\n\t\t} else if (hours >= breakpoints[2] && hours < breakpoints[3]) {\n\t\t\tcontainer.className = 'sunset'\n\t\t\tsetLights('sunset')\n\n\t\t} else {\n\t\t\tcontainer.className = 'midnight'\n\t\t\tmaterials.line.color.setHex(0x111111)\n\t\t\tsetLights('midnight')\n\t\t}\n\t}\n\tupdateLights(hours)\n\n\n\t// vane\n\tconst vane = middleIsland.windvane.vane\n\n\t// animation\n\tlet easing = .05\n\tlet i = 0\n\n\tlet draw = () => {\n\n\t\tdelta = clock.getDelta()\n\n\t\t// fans\n\t\tmiddleIsland.fans[0].rotate(5 * delta)\n\t\tmiddleIsland.fans[1].rotate(6 * delta)\n\n\t\ttopIsland.fans[0].rotate(-2 * delta)\n\t\ttopIsland.fans[1].rotate(-4 * delta)\n\n\n\t\t// windvane\n\t\tmiddleIsland.windvane.rotateFan(delta)\n\n\n\t\t// waves\n\t\triver[0].moveWaves()\n\t\triver[1].moveWaves()\n\t\triver[2].moveWaves()\n\n\t\tzeppelin.fans[0].rotate(20 * delta)\n\t\tzeppelin.fans[1].rotate(21 * delta)\n\t\tzeppelin.fans[2].rotate(19 * delta)\n\t\tzeppelin.fans[3].rotate(22 * delta)\n\t\tzeppelin.cabine.turbines[0].rotate(.25 * delta)\n\t\tzeppelin.cabine.turbines[1].rotate(.25 * delta)\n\n\t\tzeppelin.mesh.position.y += Math.sin(i * Math.PI)\n\t\tislands.position.y += Math.cos(i * Math.PI) / 2\n\n\t\tvane.rotation.y += Math.cos(i * Math.PI) * easing / 10\n\t\t\n\t\ti += .01\n\n\t\tscene.rotation.x += (-pointer.y * (Math.PI / 10) + (Math.PI / 4) - scene.rotation.x) * easing\n\t\tscene.rotation.y += (pointer.x * (Math.PI / 8) - (Math.PI / 4) - scene.rotation.y) * easing\n\n\t\trenderer.render(scene, camera)\n\t}\n\n\tlet rafId = null\n\tlet update = () => {\n\t\trafId = requestAnimationFrame(update)\n\t\tdraw()\n\t}\n\n\tlet start = () => {\n\t\tupdate()\n\t}\n\n\tlet stop = () => {\n\t\tcancelAnimationFrame(rafId)\n\t}\n\n\t// dat.GUI\n\tlet gui = new dat.GUI({\n\t\tautoplace: false,\n\t\thideable: false,\n\t})\n\tgui.closed = true\n\n\tconst guiContainer = document.getElementById('gui')\n\tguiContainer.appendChild(gui.domElement)\n\n\t// let directionalLight = gui.addFolder('scene light');\n\t// directionalLight.add(scene.children[2].position, 'x', (- 1000), 1000);\n\t// directionalLight.add(scene.children[2].position, 'y', (- 1000), 1000);\n\t// directionalLight.add(scene.children[2].position, 'z', (- 1000), 1000);\n\t// directionalLight.open();\n\n\tlet params = {\n\t\tcameraControls: true,\n\t\tisOverride: false,\n\t\tsunrise: \t() => updateLights(7),\n\t\tmidday: \t() => updateLights(11),\n\t\tsunset: \t() => updateLights(19),\n\t\tmidnight: \t() => updateLights(0),\n\t}\n\n\t// gui.add(params, 'cameraControls').onChange(() => {\n\t// \tcontrols.enabled = (params.cameraControls) ? true : false\n\t// }).name('camera controls');\n\n\t// gui.add(params, 'isOverride').onChange(() => {\n\t// \tscene.overrideMaterial = (params.isOverride) ? materials.override : false;\n\t// }).name('wireframe');\n\t\n\tlet dayTimeGUI = gui.addFolder('daytime')\n\tdayTimeGUI.add(params, 'sunrise')\n\tdayTimeGUI.add(params, 'midday')\n\tdayTimeGUI.add(params, 'sunset')\n\tdayTimeGUI.add(params, 'midnight')\n\tdayTimeGUI.open()\n\n\t// console.log(scene);\n\t// console.log(renderer.info);\n\n\t// export scene\n\tif (process.env.NODE_ENV === 'development') {\n\n\t\tconsole.log('press s to save scene to json')\n\n\t\tdocument.addEventListener('keypress', ({ keyCode }) => {\n\t\t\tif (keyCode === 115) {\n\t\t\t\tlet json = JSON.stringify(scene.toJSON())\n\n\t\t\t\tlet blob = new Blob([json], { type: 'application/json' })\n\n\t\t\t\tlet url  = URL.createObjectURL(blob)\n\t\t\n\t\t\t\tlet a = document.createElement('a')\n\t\t\t\ta.download = 'scene.json'\n\t\t\t\ta.href = url\n\t\t\t\ta.textContent = 'Download scene.json'\n\t\t\n\t\t\t\ta.click()\n\t\t\t}\n\t\t})\n\t}\n\n\treturn { draw, start, stop }\n}\n\nexport default init","import styles from '@/styles/main.scss'\n\nlet options = (new URL(document.location)).searchParams\nlet dpi = parseInt(options.get('dpi')) || window.devicePixelRatio\nlet antialias = options.get('antialias') === 'false' ? false : true\n\nimport init from '@/modules/init'\nlet { draw, start, stop } = init({ dpi, antialias })\n\nlet isIframe = (() => {\n\ttry {\n\t\treturn window.self !== window.top\n\t} catch (e) {\n\t\treturn true\n\t}\n})()\n\nif (isIframe) {\n\tdocument.body.classList.add('is-iframe')\n\n\tdraw()\n\n\tlet trusted = [\n\t\t'http://localhost:8080',\n\t\t'https://nextgtrgod.github.io',\n\t]\n\n\twindow.addEventListener('message', e => {\n\t\tif (!trusted.includes(e.origin)) return\n\n\t\tswitch (e.data) {\n\t\t\tcase 'start':\n\t\t\t\tstart()\n\t\t\t\tbreak;\n\t\t\tcase 'stop':\n\t\t\t\tstop()\n\t\t\t\tbreak;\n\t\t}\n\t})\n} else {\n\tstart()\n\n\tlet controls = process.env.NODE_ENV === 'development'\n\tlet gui = document.getElementById('gui')\n\n\tif (controls) gui.classList.add('visible')\n\t\n\tdocument.addEventListener('keyup', ({ keyCode }) => {\n\t\tif (keyCode !== 72) return\n\t\tgui.classList.toggle('visible')\n\t})\n\tconsole.log('press h to show controls')\n}\n\ndocument.body.classList.add('loaded')\n"],"sourceRoot":""}