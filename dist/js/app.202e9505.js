(function(e){function t(t){for(var s,a,r=t[0],h=t[1],c=t[2],w=0,l=[];w<r.length;w++)a=r[w],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&l.push(n[a][0]),n[a]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e[s]=h[s]);m&&m(t);while(l.length)l.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],s=!0,r=1;r<o.length;r++){var h=o[r];0!==n[h]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=o[0]))}return e}var s={},n={app:0},i=[];function a(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=s,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(o,s,function(t){return e[t]}.bind(null,s));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],h=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var m=h;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("fb98");var s=o("8992"),n=o("5a89");let i=(e,t,o=1/0)=>Math.min(Math.max(e,t),o);var a=i;const r={lightGreen:10335764,darkGreen:5876775,lightBrown:16767913,darkBronw:13669759,darkGrey:7496554,darkMetal:7496554,lightMetal:14465972,white:16645367,wood:10972695,brick:14070926,roof:7942486,sky:8435420,red:16711680,rust:12158069,water:8435420,balloon:14277081,glass:15658734};function h(){let e=new n["v"];return e}function c(e,t){let o=e/t;const s=50,i=1,a=3500;let r=new n["t"](s,o,i,a);return r.position.set(0,-350,2150),r.rotation.set(.2,.036,0),r}var m=o("113e");let w=e=>m["a"].isWebGL2Available()?e.getContext("webgl2"):e.getContext("webgl")||e.getContext("experimental-webgl"),l=({canvas:e,W:t,H:o,dpi:s=window.devicePixelRatio,antialias:i=!0})=>{let a=new n["A"]({canvas:e,context:w(e),antialias:i,alpha:!0,powerPreference:"high-performance"});return a.setSize(t,o),a.setPixelRatio(s),a.shadowMap.enabled=!0,a};var d=l;function p(){let e=new n["f"](16777215,.75);return e.position.set(-280,695,350),e.castShadow=!0,e.shadow.camera.left=-800,e.shadow.camera.right=800,e.shadow.camera.top=800,e.shadow.camera.bottom=-800,e.shadow.camera.near=1,e.shadow.camera.far=1500,e.shadow.mapSize.width=512,e.shadow.mapSize.height=512,e}class y{constructor(e=[100,100,100],t={x:0,y:0,z:0},o=null,s="cube-"+~~(1e3*Math.random())){this.width=e[0],this.height=e[1],this.depth=e[2],this.color=o,this.geometry=new n["b"](this.width,this.height,this.depth),this.material,this.color?this.material=new n["q"]({color:this.color,flatShading:!0}):this.material=null,this.mesh=new n["p"](this.geometry,this.material),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.position.x+=t.x,this.mesh.position.y+=t.y,this.mesh.position.z+=t.z,this.mesh.name=s,this.mesh.updateMatrix()}}const g={wood:new n["q"]({color:r.wood,flatShading:!0}),green:new n["q"]({color:r.darkGreen,flatShading:!0}),darkMetal:new n["q"]({color:r.darkMetal,specular:328965,shininess:100}),lightMetal:new n["q"]({color:r.lightMetal,side:n["g"],specular:328965,shininess:100}),glass:new n["q"]({color:r.glass,side:n["g"],transparent:!0,opacity:.5,specular:328965,shininess:1e4}),rust:new n["q"]({color:r.rust,side:n["g"],specular:328965,shininess:100}),brick:new n["q"]({color:r.brick,flatShading:!0}),roof:new n["q"]({color:r.roof,flatShading:!0}),white:new n["q"]({color:r.white,flatShading:!0}),red:new n["q"]({color:r.red,flatShading:!0}),balloon:new n["q"]({color:r.balloon,flatShading:!0,side:n["g"]}),line:new n["m"]({color:r.lightMetal,linewidth:1}),water:new n["q"]({color:r.water,flatShading:!0,specular:328965,shininess:1e3,transparent:!0,opacity:.8}),override:new n["q"]({color:14464896,wireframe:!0})};class x{constructor(e=1,t=!0,o=!0,s=35,i=16,a=!1){const r=new n["i"];this.radius=s,this.segmentsCount=i;const h=a?g.lightMetal:null,c=new n["p"](new n["e"](s,s,24*e,16,1,!0));if(c.rotation.y=2*Math.PI/80,c.updateMatrix(),r.merge(c.geometry,c.matrix),t){const t=new n["p"](new n["x"](s,6,10,16,2*Math.PI));t.position.y=12*e,t.rotation.x=Math.PI/2,t.updateMatrix(),r.merge(t.geometry,t.matrix)}if(o){const t=new n["p"](new n["x"](s,6,10,16,2*Math.PI));t.position.y=-12*e,t.rotation.x=Math.PI/2,t.updateMatrix(),r.merge(t.geometry,t.matrix)}const m=new n["e"](2,2,24*e,3,1,!0);for(let w=0;w<this.segmentsCount;w++){const e=new n["p"](m);e.position.set(s*Math.cos(w*(2*Math.PI)/this.segmentsCount),0,s*Math.sin(w*(2*Math.PI)/this.segmentsCount)),e.updateMatrix(),r.merge(e.geometry,e.matrix)}this.mesh=new n["p"](r,h),this.mesh.name="pipe-connection"}}class u{constructor(e=!0,t=!0){this.mesh=new n["r"],this.mesh.name="pipe-corner";const o=new n["i"],s=35,i=new n["x"](2*s,s,16,16,Math.PI/2),a=new n["p"](i);if(a.rotation.z=Math.PI/2,a.updateMatrix(),o.merge(a.geometry,a.matrix),t){const e=(new x).mesh;e.rotation.z+=Math.PI/2,e.position.y+=2*s,e.updateMatrix(),o.merge(e.geometry,e.matrix)}if(e){const e=(new x).mesh;e.position.x-=2*s,e.updateMatrix(),o.merge(e.geometry,e.matrix)}const r=new n["p"](o,g.lightMetal);r.castShadow=!0,r.receiveShadow=!0,this.mesh=r}}class M{constructor(){const e=new n["w"];e.moveTo(0,0),e.absarc(0,0,12,0,2*Math.PI);const t=new n["s"];t.moveTo(0,0),t.absarc(0,0,10,0,2*Math.PI),e.holes.push(t);const o={curveSegments:8,steps:1,depth:1,bevelEnabled:!1},s=new n["h"](e,o);this.mesh=new n["p"](s,g.rust),this.mesh.rotation.x+=Math.PI/2,this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.name="chimney"}}class z{constructor(e=!1){this.mesh=new n["r"],this.mesh.name="fence";const t=90,o=130,s=t-20,i=Math.atan(s/o),a=new n["i"],r=new n["p"](new n["b"](5,t,5));if(a.merge(r.geometry,r.matrix),e){const e=r.clone();e.position.z+=o,e.updateMatrix(),a.merge(e.geometry,e.matrix)}const h=new n["p"](new n["b"](2,2,o));h.position.set(0,s/2-10,o/2),h.updateMatrix(),a.merge(h.geometry,h.matrix);const c=new n["p"](a,g.darkMetal);c.name="pillars",c.castShadow=!0,c.receiveShadow=!0;const m=new n["i"];for(let y=0;y<o/2;y++)m.vertices.push(new n["z"](10*Math.cos(y),10*Math.sin(y),2*y));const w=new n["l"](m,g.line);w.name="helix",w.castShadow=!0,w.receiveShadow=!0,w.position.set(-5,40,0);const l=new n["i"],d=o/5;for(let y=0;y<o;y+=d){const e=o-y;l.vertices.push(new n["z"](0,0,y)),l.vertices.push(new n["z"](0,e*Math.tan(i),o))}for(let y=o;y>0;y-=d){const e=o-y;l.vertices.push(new n["z"](0,s,e)),l.vertices.push(new n["z"](0,s-e*Math.tan(i),0))}for(let y=0;y<o;y+=d){const e=o-y;l.vertices.push(new n["z"](0,0,e)),l.vertices.push(new n["z"](0,e*Math.tan(i),0))}for(let y=0;y<o;y+=d){const e=o-y;l.vertices.push(new n["z"](0,s,y)),l.vertices.push(new n["z"](0,s-e*Math.tan(i),o))}const p=new n["n"](l,g.line);p.position.y-=t/2,p.castShadow=!0,p.receiveShadow=!0,p.name="grid",this.mesh.add(c,w,p)}}class v{constructor(){this.mesh=new n["r"],this.mesh.name="filter";const e=new n["i"],t=new n["p"](new n["b"](5,30,390)),o=t.clone();o.position.x-=100,o.updateMatrix(),e.merge(t.geometry,t.matrix),e.merge(o.geometry,o.matrix);const s=new n["p"](e,g.rust);s.castShadow=!0,s.receiveShadow=!0;const i=new n["i"];for(let r=0;r<4;r++){let e=4*r;i.vertices.push(new n["z"](0,e,-40)),i.vertices.push(new n["z"](-100,e,-40))}const a=new n["n"](i,g.line);a.castShadow=!0,a.receiveShadow=!0,this.mesh.add(s,a)}}class f{constructor(){this.mesh=new n["r"],this.mesh.name="bottom-island",this.mesh.add(new y([400,400,400],{x:0,y:0,z:0},r.darkGrey).mesh),this.mesh.position.set(0,-400,400);const e=new n["i"],t=[{x:120,y:350,z:-120,scale:150},{x:135,y:270,z:-90,scale:70},{x:95,y:245,z:-70,scale:50},{x:80,y:240,z:70,scale:40},{x:90,y:230,z:100,scale:30},{x:120,y:220,z:80,scale:20},{x:-130,y:320,z:-110,scale:140},{x:-125,y:270,z:-70,scale:70},{x:-140,y:500,z:90,scale:200}];for(let n=0;n<t.length;n++){const o=(new M).mesh;o.position.set(t[n].x,t[n].y,t[n].z),o.scale.z=t[n].scale,o.updateMatrix(),e.merge(o.geometry,o.matrix)}const o=new n["i"],s=new n["p"](new n["e"](40,40,70,6,1));s.position.set(0,-50,0),s.updateMatrix();const i=(new M).mesh;i.scale.set(3.5,3.5,150),i.updateMatrix(),o.merge(s.geometry,s.matrix),o.merge(i.geometry,i.matrix);const a=new n["p"](o,g.rust);a.position.set(-125,325,90),a.updateMatrix(),e.merge(a.geometry,a.matrix);const h=new n["p"](e,g.rust);h.castShadow=!0,h.receiveShadow=!0,this.mesh.add(h);const c=[{position:{x:0,y:170,z:195},rotation:{x:0,y:Math.PI/2,z:0}},{position:{x:0,y:0,z:195},rotation:{x:0,y:Math.PI/2,z:Math.PI}},{position:{x:215,y:-75,z:10},rotation:{x:Math.PI/2,y:Math.PI/2,z:0}},{position:{x:215,y:-75,z:-20},rotation:{x:Math.PI/2,y:Math.PI,z:0}}];for(let n=0;n<c.length;n++){const e=(new u).mesh;e.position.set(c[n].position.x,c[n].position.y,c[n].position.z),e.rotation.set(c[n].rotation.x,c[n].rotation.y,c[n].rotation.z,"ZYX"),this.mesh.add(e)}const m=[{position:{x:195,y:245,z:-195},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:-65},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:65},rotation:{x:0,y:0,z:0}},{position:{x:195,y:245,z:195},rotation:{x:0,y:-Math.PI/2,z:0},isClosed:!0},{position:{x:-65,y:245,z:195},rotation:{x:0,y:-Math.PI/2,z:0},isClosed:!0},{position:{x:-195,y:245,z:-195},rotation:{x:0,y:0,z:0}},{position:{x:-195,y:245,z:-65},rotation:{x:0,y:0,z:0}},{position:{x:-195,y:245,z:65},rotation:{x:0,y:0,z:0}}];for(let n=0;n<m.length;n++){const e=new z(m[n].isClosed).mesh;e.position.set(m[n].position.x,m[n].position.y,m[n].position.z),e.rotation.set(m[n].rotation.x,m[n].rotation.y,m[n].rotation.z),this.mesh.add(e)}const w=(new v).mesh;w.position.set(50,215,-5),this.mesh.add(w)}}function P(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class I{constructor(){P(this,"rotate",e=>{this.propeller.rotation.z+=e}),this.mesh=new n["r"],this.mesh.name="fan";const e=new n["i"],t=new n["p"](new n["e"](8,8,10,6,1)),o=new n["p"](new n["e"](5,5,400,6,1)),s=new n["p"](new n["e"](25,25,50,8,1));s.rotation.x+=Math.PI/2,s.position.y+=200,s.updateMatrix(),e.merge(t.geometry,t.matrix),e.merge(o.geometry,o.matrix),e.merge(s.geometry,s.matrix);const i=new n["p"](e,g.darkMetal);i.castShadow=!0,i.receiveShadow=!0;const a=new n["r"],r=new n["e"](10,10,30,6,1),h=new n["p"](r,g.darkMetal);h.receiveShadow=!0,h.castShadow=!0,h.position.z+=30,h.rotation.x=Math.PI/2;let c=[];const m=new n["b"](20,120,2);for(let w=0;w<3;w++){const e=new n["p"](m,g.white);e.geometry.translate(0,20,0),e.geometry.vertices[4].y+=5,e.geometry.vertices[4].z-=1,e.geometry.vertices[5].y+=5,e.geometry.vertices[5].z-=1,e.rotation.z=w*(2*Math.PI/3),e.position.z+=40,e.castShadow=!0,e.receiveShadow=!0,c.push(e)}a.position.y+=200,a.add(h,...c),this.propeller=a,this.mesh.add(i,a)}}class b{constructor(e=!1){const t=new n["i"],o=new y([10,20,4],{x:0,y:0,z:0});o.mesh.updateMatrix();const s=new y([28,4,2],{x:-19,y:8,z:0});s.mesh.updateMatrix();const i=new y([28,4,2],{x:-19,y:-3,z:0});i.mesh.updateMatrix();const a=new y([10,6,4],{x:0,y:13,z:0});a.mesh.geometry.vertices[0].x-=5,a.mesh.geometry.vertices[1].x-=5,a.mesh.geometry.vertices[4].x+=5,a.mesh.geometry.vertices[5].x+=5,a.mesh.updateMatrix(),t.merge(i.mesh.geometry,i.mesh.matrix),t.merge(o.mesh.geometry,o.mesh.matrix),t.merge(s.mesh.geometry,s.mesh.matrix),t.merge(a.mesh.geometry,a.mesh.matrix),this.width=38,this.mesh=new n["p"](t,g.wood),this.mesh.position.y+=10}}class S{constructor(e=[1,1,1],t=0){this.mesh=new n["r"],this.mesh.name="pine";const o=new n["e"](8,8,15,10,1),s=new n["p"](o,g.wood);s.castShadow=!0,s.receiveShadow=!0,s.position.y+=7.5;const i=new n["i"];for(let r=1;r<=7;r++){let e=45-5*r;const t=new n["p"](new n["e"](e-10,e,10,6,1));t.position.y+=10+70*r/7,t.updateMatrix(),i.merge(t.geometry,t.matrix)}const a=new n["p"](i,g.green);a.receiveShadow=!0,a.castShadow=!0,this.mesh.scale.x=e[0],this.mesh.scale.y=e[1],this.mesh.scale.z=e[2],this.mesh.rotation.y=t,this.mesh.add(s,a)}}function k(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class T{constructor(){k(this,"rotateFan",e=>{this.fan.rotation.z+=e}),this.mesh=new n["r"],this.mesh.name="windwane";const e=new n["i"],t=new n["i"];{const e=new y([20,200,15],{x:0,y:100,z:0}).mesh;e.geometry.vertices[0].x-=5,e.geometry.vertices[0].z-=5,e.geometry.vertices[1].x-=5,e.geometry.vertices[1].z+=5,e.geometry.vertices[4].x+=5,e.geometry.vertices[4].z+=5,e.geometry.vertices[5].x+=5,e.geometry.vertices[5].z-=5,e.updateMatrix(),t.merge(e.geometry,e.matrix);for(let o=0;o<4;o++){const e=new y([65,10,5],{x:-25,y:30+40*o,z:0}).mesh;e.rotation.z+=Math.PI/4*(o%2===0?-1:1),e.updateMatrix(),t.merge(e.geometry,e.matrix)}}for(let h=0;h<4;h++){const o=new n["p"](t,g.wood);o.position.x+=40*Math.cos(h*Math.PI/2),o.position.z+=40*Math.sin(h*Math.PI/2),o.rotation.y+=Math.PI/4-h*(Math.PI/2),o.updateMatrix(),e.merge(o.geometry,o.matrix)}const o=new y([80,10,80],{x:0,y:200,z:0}).mesh;o.rotation.y-=Math.PI/4,o.updateMatrix(),e.merge(o.geometry,o.matrix);const s=new n["p"](e,g.wood);s.name="stand",s.castShadow=!0,s.receiveShadow=!0,s.rotation.y+=Math.PI/4;const i=new n["i"];{const e=new n["p"](new n["e"](2,2,60,6,1));e.rotation.z=Math.PI/6,e.position.set(15,230,0),e.updateMatrix();const t=e.clone();t.rotation.z=-Math.PI/6,t.position.x=-15,t.updateMatrix();const o=new n["p"](new n["e"](4,4,6,6,1));o.position.set(0,255,0),o.updateMatrix(),i.merge(e.geometry,e.matrix),i.merge(t.geometry,t.matrix),i.merge(o.geometry,o.matrix)}const a=new n["p"](i,g.lightMetal);a.castShadow=!0,a.receiveShadow=!0;const r=new n["r"];{const e=new n["p"](new n["e"](2,2,100,6,1),g.lightMetal);e.position.set(0,260,0),e.rotation.x+=Math.PI/2,e.receiveShadow=!0,e.castShadow=!0;const t=new n["p"](new n["e"](3,3,5,6,1),g.lightMetal);t.position.set(0,260,0),t.receiveShadow=!0,t.castShadow=!0;const o=new n["w"],s=36,i=16;o.moveTo(0,i/2),o.lineTo(s/4,i),o.lineTo(s,i),o.lineTo(s-s/4,i/2),o.lineTo(s,0),o.lineTo(s/4,0),o.moveTo(0,i/2);const a={steps:2,depth:4,bevelEnabled:!1},h=new n["p"](new n["h"](o,a),g.red);h.castShadow=!0,h.receiveShadow=!0,h.position.set(-2,260-i/2,-25),h.rotation.y=Math.PI/2;const c=new n["r"],m=new n["i"];for(let n=0;n<12;n++){const e=new y([45,2,1],{x:4*Math.cos(n*(Math.PI/6)),y:4*Math.sin(n*(Math.PI/6)),z:0}).mesh;e.geometry.translate(20,0,0),e.geometry.vertices[1].z-=4,e.geometry.vertices[1].y+=10,e.rotation.z+=n*Math.PI/6,e.updateMatrix(),m.merge(e.geometry,e.matrix)}const w=new n["p"](m,g.lightMetal);w.castShadow=!0,w.receiveShadow=!0;const l=new n["p"](new n["e"](4,4,4,6,1),g.darkMetal);l.rotation.x=Math.PI/2,l.castShadow=!0,l.receiveShadow=!0,c.add(w,l),c.position.set(0,260,45),this.fan=c,r.add(e,t,h,c)}this.vane=r,this.mesh.add(s,a,r)}}class L{constructor(){const e=new n["i"],t=new y([5,410,5],{x:0,y:205,z:0}).mesh;e.merge(t.geometry,t.matrix);const o=t.clone();o.position.z-=30,o.updateMatrix(),e.merge(o.geometry,o.matrix);for(let s=0;s<40;s++){const t=new y([2,2,30],{x:0,y:10*s+10,z:-15}).mesh;e.merge(t.geometry,t.matrix)}this.mesh=new n["p"](e,g.wood),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class E{constructor(e=[[0,0,0]]){const t=new n["i"];for(let o=0;o<e.length;o++){const s=new y([30,40,30],{x:e[o][0],y:e[o][1],z:e[o][2]}).mesh;s.rotation.set(Math.random()*(2*Math.PI),Math.random()*(2*Math.PI),Math.random()*(2*Math.PI)),s.updateMatrix(),t.merge(s.geometry,s.matrix)}this.mesh=new n["p"](t,g.lightMetal),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class O{constructor(){this.mesh=new n["r"],this.mesh.name="middle-island",this.mesh.add(new y([400,400,400],{x:0,y:0,z:0},r.lightBrown,"middle-cube-basement").mesh),this.fans=[];const e=[{x:200,y:100,z:-100,rx:-Math.PI/2,rz:-Math.PI/2},{x:200,y:-50,z:100,rx:-Math.PI/2,rz:-Math.PI/2}];for(let n=0;n<e.length;n++){const t=new I;t.mesh.position.set(e[n].x,e[n].y,e[n].z),t.mesh.rotation.set(e[n].rx,0,e[n].rz),this.fans.push(t)}const t=[{x:190,z:-190,ry:0,mx:-1,mz:0,count:11},{x:190,z:185,ry:-Math.PI/2,mx:0,mz:-1,count:10},{x:-190,z:190,ry:0,mx:1,mz:0,count:4},{x:80,z:185,ry:Math.PI,mx:1,mz:0,count:3}],o=38;let s=new n["i"];for(let n=0;n<t.length;n++)for(let e=0;e<t[n].count;e++){const i=(new b).mesh;i.position.set(t[n].x+e*t[n].mx*o,210,t[n].z+e*t[n].mz*o),i.rotation.y=t[n].ry,i.updateMatrix(),s.merge(i.geometry,i.matrix)}const i=new n["p"](s,g.wood);i.name="fence-perimeter",i.castShadow=!0,i.receiveShadow=!0;const a=new S([1.2,2,1.2]).mesh;a.position.set(-140,200,140);const h=new T;h.mesh.position.set(100,200,-50),h.mesh.rotation.y+=Math.PI/16,this.windvane=h;const c=(new L).mesh;c.position.set(-158,200,-90),c.rotation.z=Math.PI/32;const m=[];for(let n=0;n<12;n++)m.push([250*Math.cos(n*Math.PI/24),0,-180*Math.sin(n*Math.PI/24)]);for(let n=0;n<8;n++)m.push([150*Math.cos(n*Math.PI/16)+10,0,-100*Math.sin(n*Math.PI/16)]);const w=new E(m).mesh;w.position.set(-210,200,170);const l=new n["i"],d=(new n["i"],[{type:"straight",position:[80,-475,125],rotation:[Math.PI/2,0,0]},{type:"connection",position:[80,-475,35],rotation:[Math.PI/2,0,0],options:{m:1}},{type:"arc",position:[80,-397.5,20],rotation:[-Math.PI/2,Math.PI/2,-Math.PI/2],options:{scale:1.1}},{type:"connection",position:[80,-300,-57.5],rotation:[0,0,0],options:{m:8}},{type:"straight",position:[-275,-75,80],rotation:[0,0,Math.PI/2]},{type:"connection",position:[-360,-75,80],rotation:[0,0,Math.PI/2],options:{m:1}},{type:"arc",position:[-370,0,80],rotation:[0,0,Math.PI/2],options:{scale:1.1}},{type:"connection",position:[-450,150,80],rotation:[0,0,0],options:{m:4}}]);for(let r=0;r<d.length;r++){let e;function p(e,t){e.position.set(t.position[0],t.position[1],t.position[2]),e.rotation.set(t.rotation[0],t.rotation[1],t.rotation[2]),e.updateMatrix()}switch(d[r].type){case"straight":e=new n["p"](new n["e"](35,35,150,8,1));break;case"connection":e=new x(d[r].options.m).mesh;break;case"arc":e=new u(!1,!1).mesh,e.scale.set(d[r].options.scale,d[r].options.scale,d[r].options.scale);break}p(e,d[r]),l.merge(e.geometry,e.matrix)}const M=new n["p"](l,g.lightMetal);M.castShadow=!0,M.receiveShadow=!0,this.mesh.add(i,a,h.mesh,c,w,...this.fans.map(e=>e.mesh),M)}}class j{constructor(e,t,o=5,s=8){this.radius=o;const i=new n["c"]([new n["z"](0,0,0),new n["z"](0,0,e),new n["z"](0,t,e+o)]),a=new n["w"];a.moveTo(this.radius*Math.cos(0),this.radius*Math.sin(0));for(let n=1;n<16;n++)a.lineTo(this.radius*Math.cos(n*(2*Math.PI)/16),this.radius*Math.sin(n*(2*Math.PI)/16));this.mesh=new n["p"](new n["h"](a,{curveSegments:8,steps:s,bevelEnabled:!1,extrudePath:i}))}}class q{constructor(){this.mesh=new n["r"],this.mesh.name="house";const e={x:140,y:50,z:140},t=new y([e.x,e.y,e.z],{x:0,y:e.y/2,z:-100},r.brick,"first-floor").mesh;t.castShadow=!0,t.receiveShadow=!0;const o=new y([e.x+10,e.y/10,e.z+10],{x:0,y:e.y/20,z:-100},r.darkMetal,"basement").mesh;o.castShadow=!0,o.receiveShadow=!0;const s=new n["r"],i=new n["p"](new n["e"](e.x-40,e.x-35,5,4,1),g.brick);i.position.y-=2.5,i.castShadow=!0,i.receiveShadow=!0;const a=new n["p"](new n["e"](20,20,5,4,1),g.brick);a.position.y+=122.5,a.castShadow=!0,a.receiveShadow=!0;const h=new n["p"](new n["e"](15,15,5,4,1),g.brick);h.position.y+=155,h.castShadow=!0,h.receiveShadow=!0,s.add(i,a,h),s.position.set(0,e.y,-100),s.rotation.y+=Math.PI/4;const c=new n["i"],m=[{y:20,rT:50,rB:100,height:40},{y:70,rT:20,rB:50,height:60},{y:110,rT:15,rB:20,height:20},{y:130,rT:30,rB:15,height:10},{y:145,rT:10,rB:30,height:20},{y:165,rT:1,rB:10,height:20}];for(let r=0;r<m.length;r++){const e=new n["p"](new n["e"](m[r].rT,m[r].rB,m[r].height,4,1));e.position.y+=m[r].y,e.updateMatrix(),c.merge(e.geometry,e.matrix)}const w=new n["p"](c,g.roof);w.castShadow=!0,w.receiveShadow=!0,s.add(w);const l=new n["i"],d=[{x:0,y:100,z:-70,width:30,height:50},{x:-10,y:120,z:-80,width:20,height:80}];for(let n=0;n<d.length;n++){const e=new j(d[n].width,d[n].height).mesh;e.position.set(d[n].x,d[n].y,d[n].z),e.updateMatrix(),l.merge(e.geometry,e.matrix)}const p=new n["p"](l,g.lightMetal);p.castShadow=!0,p.receiveShadow=!0;const x=new n["w"];x.moveTo(15,-15),x.lineTo(15,15);for(let n=0;n<8;n++)x.lineTo(15*Math.cos(n*Math.PI/8),10*Math.sin(n*Math.PI/8)+15);x.lineTo(-15,-15),x.moveTo(-15,15);const u={steps:2,depth:4,bevelEnabled:!1},M=new n["p"](new n["h"](x,u),g.wood);M.castShadow=!0,M.receiveShadow=!0,M.position.set(70,15,-125),M.rotation.y=Math.PI/2;const z=new n["w"];z.moveTo(0,0),z.absarc(0,0,15,0,2*Math.PI);const v=new n["s"];v.moveTo(0,0),v.absarc(0,0,12,0,2*Math.PI),z.holes.push(v);const f=new n["h"](z,{depth:4,steps:1,bevelEnabled:!1}),P=new y([1,30,4]),I=new y([30,1,4]);f.merge(P.geometry,P.matrix),f.merge(I.geometry,I.matrix);const b=new n["p"](f,g.wood);b.position.set(70,25,-65),b.rotation.y=Math.PI/2,b.scale.x=1.15,b.receiveShadow=!0,b.castShadow=!0,this.mesh.add(o,t,M,b,s,p)}}class B{constructor(){this.mesh=new n["r"],this.mesh.name="top-island",this.mesh.add(new y([400,400,400],{x:0,y:0,z:0},r.lightGreen).mesh),this.fans=[];const e=[{x:-100,y:100},{x:100,y:-100}];for(let n=0;n<e.length;n++){const t=new I;t.mesh.position.set(e[n].x,e[n].y,200),t.mesh.rotation.set(Math.PI/2,Math.PI,0),this.fans.push(t)}this.fans.map(e=>{this.mesh.add(e.mesh)});const t=(new q).mesh;t.position.x+=70,t.position.y+=200,t.position.z+=5,t.rotation.y-=Math.PI/16,this.mesh.add(t);let o=new n["i"];const s=[{x:190,z:187,ry:0,mx:-1,mz:0,count:10},{x:-187,z:185,ry:-Math.PI/2,mx:0,mz:-1,count:10},{x:-187,z:-187,ry:Math.PI,mx:1,mz:0,count:10},{x:190,z:118,ry:Math.PI/2,mx:0,mz:1,count:2},{x:187,z:-155,ry:-Math.PI/2,mx:0,mz:-1,count:1}],i=38;for(let n=0;n<s.length;n++)for(let e=0;e<s[n].count;e++){const t=(new b).mesh;t.position.set(s[n].x+e*s[n].mx*i,210,s[n].z+e*s[n].mz*i),t.rotation.y=s[n].ry,t.updateMatrix(),o.merge(t.geometry,t.matrix)}const a=new n["p"](o,g.wood);a.name="fence-perimeter",a.castShadow=!0,a.receiveShadow=!0,this.mesh.add(a);const h=[{x:120,y:200,z:140,sx:1,sy:1,sz:1},{x:15,y:200,z:140,sx:1,sy:1.2,sz:1},{x:-100,y:200,z:140,sx:1.1,sy:1.5,sz:1.1},{x:-90,y:200,z:-80,sx:1.6,sy:1.8,sz:1.6}];for(let n=0;n<h.length;n++){const e=new S([h[n].sx,h[n].sy,h[n].sz]).mesh;e.position.set(h[n].x,h[n].y,h[n].z),this.mesh.add(e)}const c=(new u).mesh;c.position.x-=60,c.position.y+=215,c.position.z+=40,this.mesh.add(c),this.mesh.position.set(-400,400,0)}}class C{constructor(){this.mesh=new n["r"],this.mesh.name="zeppelin-balloon";const e=200,t=12,o=[];for(let r=0;r<t;r++)o.push(new n["y"](e*Math.sin(r*(Math.PI/t)),e*Math.cos(r*(Math.PI/t))*2));const s=new n["p"](new n["k"](o),g.balloon);s.receiveShadow=!0;const i=new n["w"];i.moveTo(o[0].y,o[0].x);for(let n=1;n<o.length-1;n++)i.lineTo(o[n].y,o[n].x);i.moveTo(o[o.length]);const a=new n["p"](new n["h"](i,{steps:1,depth:20,bevelEnabled:!1}),g.lightMetal);a.rotation.z-=Math.PI/2,a.position.set(5,0,-10),a.castShadow=!0,a.receiveShadow=!0,this.mesh.add(s,a),this.mesh.rotation.x=Math.PI/2}}class H{constructor(e,t,o=15){this.radius=e;const s=new n["c"](t),i=new n["w"];i.moveTo(this.radius*Math.cos(0),this.radius*Math.sin(0));for(let n=1;n<16;n++)i.lineTo(this.radius*Math.cos(n*(2*Math.PI)/16),this.radius*Math.sin(n*(2*Math.PI)/16));this.mesh=new n["p"](new n["h"](i,{steps:o,bevelEnabled:!1,extrudePath:s})),this.mesh.name="hose"}}function W(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class D{constructor(e=!0,t=!1){W(this,"rotate",e=>{this.propeller.rotation.y+=e}),this.mesh=new n["r"],this.mesh.name="zeppelin-fan";const o=40,s=new n["i"],i=new n["p"](new n["e"](o,o-5,2*o,16,1)),a=[];for(let y=0;y<16;y++)a.push(new n["y"](o*Math.cos(y*(Math.PI/32)),o*Math.sin(y*(Math.PI/32))/3));const r=new n["p"](new n["k"](a,8));r.position.y+=o,r.updateMatrix();const h=new n["p"](new n["e"](5,5,120,6,1));if(h.position.set(-60,0,0),h.rotation.z-=Math.PI/2,h.updateMatrix(),e){const e=new y([15,45,1]).mesh;e.position.set(35,5,15),e.updateMatrix();const i=e.clone();e.position.z-=30,e.updateMatrix(),s.merge(e.geometry,e.matrix),s.merge(i.geometry,i.matrix);for(let t=-2;t<4;t++){let e=new n["p"](new n["e"](4,4,30,3,1));e.rotation.set(Math.PI/2,Math.PI/3,0),e.position.set(o+t/2-2,8*t,0),e.updateMatrix(),s.merge(e.geometry,e.matrix)}let a=t?-1:1;const r=new H(4,[new n["z"](-10,28,35*a),new n["z"](0,5,50*a),new n["z"](10,-4,55*a),new n["z"](20,-8,50*a),new n["z"](24,-12,40*a),new n["z"](20,-16,25*a)]).mesh;s.merge(r.geometry,r.matrix)}const c=new n["p"](new n["e"](5,10,15,6,1,!0));c.position.y+=58,c.updateMatrix(),s.merge(i.geometry,i.matrix),s.merge(r.geometry,r.matrix),s.merge(h.geometry,h.matrix),s.merge(c.geometry,c.matrix);const m=new n["p"](s,g.lightMetal);m.castShadow=!0,m.receiveShadow=!0;const w=new n["i"],l=new n["p"](new n["e"](4,4,280,6,1));l.position.set(0,100,0),l.updateMatrix();const d=new n["p"](new n["e"](12,5,10,6,1));d.position.set(0,228,0),d.updateMatrix();const p=new n["i"],x=new n["w"];x.moveTo(0,-5);for(let n=-4;n<4;n++)x.lineTo(120+10*Math.cos(n*Math.PI/8),10*Math.sin(n*Math.PI/8));x.lineTo(0,5);for(let y=0;y<4;y++){let e=new n["p"](new n["h"](x,{curveSegments:8,steps:1,depth:2,bevelEnabled:!1}));e.rotation.z+=y*(Math.PI/2),e.updateMatrix(),p.merge(e.geometry,e.matrix)}const u=new n["p"](p,g.white);u.position.set(0,235,0),u.geometry.applyMatrix4((new n["o"]).makeRotationX(Math.PI/2)),u.updateMatrix(),w.merge(l.geometry,l.matrix),w.merge(d.geometry,d.matrix),w.merge(u.geometry,u.matrix),this.propeller=new n["p"](w,g.white),this.propeller.castShadow=!0,this.propeller.receiveShadow=!0,this.mesh.add(m,this.propeller)}}class G{constructor(){const e=new n["i"],t=new n["i"],o=30,s=new n["p"](new n["e"](o,o,70,16,1)),i=[];for(let d=0;d<16;d++)i.push(new n["y"](o*Math.cos(d*(Math.PI/32)),o*Math.sin(d*(Math.PI/32))/2));const a=new n["p"](new n["k"](i,12));a.position.y=35,a.updateMatrix();const r=a.clone();r.rotation.z+=Math.PI,r.position.y=-35,r.updateMatrix();const h=new n["p"](new n["e"](8,8,10,8,1));h.position.y+=50,h.updateMatrix(),t.merge(s.geometry,s.matrix),t.merge(a.geometry,a.matrix),t.merge(r.geometry,r.matrix),t.merge(h.geometry,h.matrix);const c=new n["p"](t);c.position.z+=35,c.updateMatrix();const m=c.clone();m.position.z-=70,m.updateMatrix();const w=new y([5,4,80]).mesh;w.position.y+=52,w.updateMatrix();const l=new n["p"](new n["e"](2,2,120,6,1));l.position.set(-60,52,0),l.rotation.z-=Math.PI/2,l.updateMatrix(),e.merge(c.geometry,c.matrix),e.merge(m.geometry,m.matrix),e.merge(w.geometry,w.matrix),e.merge(l.geometry,l.matrix),this.mesh=new n["p"](e,g.lightMetal),this.mesh.name="fuel-tanks",this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}function N(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class _{constructor(){N(this,"rotate",e=>{this.propeller.rotation.z+=e}),this.mesh=new n["r"],this.mesh.name="turbine";const e=new n["i"],t=new n["w"];t.moveTo(0,0),t.absarc(0,0,60,0,2*Math.PI);const o=new n["s"];o.moveTo(0,0),o.absarc(0,0,55,0,2*Math.PI),t.holes.push(o);const s=new n["p"](new n["h"](t,{depth:80,steps:1,bevelEnabled:!1}));s.position.z-=40,s.updateMatrix();const i=new y([150,5,30],{x:-130,y:0,z:0}).mesh,a=new y([118,5,10]).mesh;a.rotation.z+=Math.PI/4,a.updateMatrix();const r=new n["p"](new n["e"](20,20,50,8,1));r.rotation.x+=Math.PI/2,r.updateMatrix(),e.merge(s.geometry,s.matrix),e.merge(i.geometry,i.matrix),e.merge(a.geometry,a.matrix),e.merge(r.geometry,r.matrix);const h=new n["p"](e,g.darkMetal);h.castShadow=!0,h.receiveShadow=!0;const c=new n["i"];for(let n=0;n<12;n++){const e=new y([50,2,1],{x:4*Math.cos(n*(Math.PI/6)),y:4*Math.sin(n*(Math.PI/6)),z:30}).mesh;e.geometry.translate(20,0,0),e.geometry.vertices[1].z-=8,e.geometry.vertices[1].y+=10,e.rotation.z+=n*Math.PI/6,e.updateMatrix(),c.merge(e.geometry,e.matrix)}const m=new n["p"](new n["e"](10,1,10,8,1));m.rotation.x-=Math.PI/2,m.position.z+=35,m.updateMatrix(),c.merge(m.geometry,m.matrix),this.propeller=new n["p"](c,g.lightMetal),this.propeller.castShadow=!0,this.propeller.receiveShadow=!0,this.mesh.add(h,this.propeller)}}class F{constructor(){this.mesh=new n["r"],this.mesh.name="cabine";const e=new n["p"](new n["e"](150,100,80,16,1),g.darkMetal);e.scale.x=.5,e.updateMatrix(),this.turbines=[];const t=[{x:200,y:-50,z:0,rx:0,ry:0,rz:0},{x:-200,y:-50,z:0,rx:Math.PI,ry:Math.PI,rz:Math.PI/4}];for(let o=0;o<t.length;o++){const e=new _;e.mesh.position.set(t[o].x,t[o].y,t[o].z),e.mesh.rotation.set(t[o].rx,t[o].ry,t[o].rz),e.mesh.rotation.z-=Math.PI/8,this.turbines.push(e)}this.mesh.add(e,...this.turbines.map(e=>e.mesh)),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}}class R{constructor(){this.mesh=new n["r"],this.mesh.name="zeppelin",this.mesh.position.set(-400,550,-900);const e=(new C).mesh;this.fans=[];const t=[{x:250,y:0,z:200,ry:0,full:!0,mirrored:!1},{x:240,y:0,z:-200,ry:0,full:!0,mirrored:!0},{x:-250,y:0,z:200,ry:Math.PI,full:!1,mirrored:!1},{x:-240,y:0,z:-200,ry:Math.PI,full:!1,mirrored:!1}];for(let n=0;n<t.length;n++){const e=new D(t[n].full,t[n].mirrored);e.mesh.position.set(t[n].x,t[n].y,t[n].z),e.mesh.rotation.y+=t[n].ry,this.fans.push(e)}const o=(new G).mesh;o.rotation.z-=Math.PI/8,o.position.set(220,-65,-50);const s=new n["i"],i=[[new n["z"](200,-110,-15),new n["z"](210,-150,20),new n["z"](195,-10,60),new n["z"](195,-50,100),new n["z"](220,0,160)],[new n["z"](200,-110,-85),new n["z"](210,-160,-140),new n["z"](220,20,-180)]];for(let n=0;n<i.length;n++){const e=new H(4,i[n],40).mesh;s.merge(e.geometry,e.matrix)}const a=new n["p"](s,g.lightMetal);a.castShadow=!0,a.receiveShadow=!0,this.cabine=new F,this.cabine.mesh.position.y-=210,this.mesh.add(this.cabine.mesh,e,...this.fans.map(e=>e.mesh),o,a)}}function A(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class X{constructor(e=[new n["z"](0,0,0),new n["z"](1,1,1)],t=10){A(this,"moveWaves",()=>{const e=this.mesh.geometry.vertices,t=e.length;for(let o=0;o<t;o++){const t=e[o],s=this.waves[o];t.x=s.x-Math.cos(s.ang)*s.amp,t.y=s.y+Math.sin(s.ang)*s.amp,s.ang+=s.speed}this.mesh.geometry.verticesNeedUpdate=!0});const o=new n["c"](e);var s={steps:t,bevelEnabled:!1,extrudePath:o};const i=new n["w"],a=36,r=16;i.moveTo(a*Math.cos(0),a*Math.sin(0));for(let n=1;n<r;n++)i.lineTo(a*Math.cos(n*(2*Math.PI)/r),a*Math.sin(n*(2*Math.PI)/r)/1.5);const h=new n["h"](i,s),c=g.water;h.mergeVertices();const m=h.vertices.length;this.waves=[];for(let n=0;n<m;n++){const e=h.vertices[n];this.waves.push({y:e.y,x:e.x,z:e.z,ang:Math.random()*Math.PI*2,amp:5+15*Math.random(),speed:.032+.064*Math.random()})}this.mesh=new n["p"](h,c),this.mesh.receiveShadow=!0,this.mesh.castShadow=!0}}function J(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class U{constructor(){J(this,"turnLights",e=>{e?(this.light.intensity=.95,this.light.distance=1e3,this.light.decay=2,this.light.castShadow=!0,this.light.shadow.mapSize.width=128,this.light.shadow.mapSize.height=128):(this.light.intensity=0,this.light.distance=1,this.light.decay=1,this.light.castShadow=!1,this.light.shadow.mapSize.width=8,this.light.shadow.mapSize.height=8)}),this.mesh=new n["r"],this.mesh.name="lamp-post";const e=new y([8,100,8]).mesh;e.geometry.vertices[2].x+=1,e.geometry.vertices[2].z+=1,e.geometry.vertices[3].x+=1,e.geometry.vertices[3].z-=1,e.geometry.vertices[6].x-=1,e.geometry.vertices[6].z-=1,e.geometry.vertices[7].x-=1,e.geometry.vertices[7].z+=1,e.updateMatrix();const t=new y([6,6,40],{x:0,y:45,z:12}).mesh,o=new y([4,4,20],{x:0,y:38,z:10}).mesh;o.rotation.x-=Math.PI/4,o.updateMatrix();const s=new n["i"];s.merge(e.geometry,e.matrix),s.merge(t.geometry,t.matrix),s.merge(o.geometry,o.matrix);const i=new n["p"](s,g.wood);i.castShadow=!0,i.receiveShadow=!0;const a=new n["p"](new n["e"](1,6,4,8),g.darkMetal);a.castShadow=!0,a.receiveShadow=!0,a.position.set(0,40,30),this.light=new n["u"](16636818,0,0,0),this.light.castShadow=!1,this.light.shadow.mapSize.width=16,this.light.shadow.mapSize.height=16,this.light.position.set(-10,30,30),this.mesh.add(i,a,this.light)}}const Y={sunrise:{hemisphereLight:{intensity:.6},ambientLight:{intensity:.3},sunLight:{intensity:.75,position:[630,210,-110],color:16759431}},midday:{hemisphereLight:{intensity:.9},ambientLight:{intensity:.5},sunLight:{intensity:.75,position:[-280,695,350],color:16777215}},sunset:{hemisphereLight:{intensity:.6},ambientLight:{intensity:.3},sunLight:{intensity:.75,position:[-290,560,900],color:16759431}},midnight:{hemisphereLight:{intensity:.025},ambientLight:{intensity:.025},sunLight:{intensity:.025,position:[-420,800,370],color:15658734}}},V=[6,8,17,20];function Z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class K{constructor(){Z(this,"update",()=>{Date.now()-this.now>6e4&&(this.now=new Date,this.hours=("0"+this.now.getHours()).slice(-2))}),Z(this,"getHours",()=>this.hours),this.now=new Date(0),this.timeNode=document.getElementById("time"),this.dayNode=document.getElementById("day"),this.update()}}let Q=({dpi:e,antialias:t})=>{let o=window.innerWidth,i=window.innerHeight;window.addEventListener("resize",()=>{o=window.innerWidth,i=window.innerHeight,y.setSize(o,i),l.aspect=o/i,l.updateProjectionMatrix(),J()},!1);const r=document.getElementById("scene"),m=r.querySelector("canvas"),w=h(),l=c(o,i),y=d({canvas:m,W:o,H:i,dpi:e,antialias:t}),x=new n["j"](11184810,0,.9),u=new n["a"](4210752,.5),M=p();let z=e=>{x.intensity=Y[e].hemisphereLight.intensity,u.intensity=Y[e].ambientLight.intensity,M.intensity=Y[e].sunLight.intensity,M.color.setHex(Y[e].sunLight.color),M.position.set(...Y[e].sunLight.position),"midnight"===e?(L.map(e=>e.turnLights(!0)),g.line.color.setHex(1118481)):(L.map(e=>e.turnLights()),g.line.color.setHex(14465972))};const v=new f,P=new O,I=new B,b=new R,S=new n["r"];S.name="islands",S.add(v.mesh,P.mesh,I.mesh);const k=[],T=[{points:[new n["z"](-450,690,40),new n["z"](-370,615,40),new n["z"](-195,600,40),new n["z"](-180,210,40),new n["z"](-60,210,50),new n["z"](-20,210,100),new n["z"](15,205,210),new n["z"](0,-180,230),new n["z"](0,-180,570)],steps:25},{points:[new n["z"](0,-250,665),new n["z"](0,-380,665)],steps:4},{points:[new n["z"](-450,90,80),new n["z"](-450,0,80)],steps:2}];for(let s=0;s<T.length;s++)k.push(new X(T[s].points,T[s].steps));k.map(e=>S.add(e.mesh));let L=[];const E=[{x:-215,y:650,z:-185,ry:0},{x:-215,y:650,z:185,ry:Math.PI},{x:180,y:250,z:-175,ry:-Math.PI/4},{x:170,y:-150,z:400,ry:-Math.PI/2}];for(let s=0;s<E.length;s++){const e=new U;e.mesh.position.set(E[s].x,E[s].y,E[s].z),e.mesh.rotation.y+=E[s].ry,L.push(e)}S.add(...L.map(e=>e.mesh)),w.add(x,u,M,S,b.mesh),w.rotation.x=Math.PI/4,w.rotation.y=-Math.PI/4;const j=new n["d"];let q;const C={x:0,y:0};window.matchMedia("(hover)").matches&&document.addEventListener("mousemove",({clientX:e,clientY:t})=>{C.x=e/o*2-1,C.y=1-t/i*2});let H={x:0,y:0},W=({beta:e,gamma:t})=>{if(!H.initial)return H.initial={x:e,y:t};H.x=a(-90,e-H.initial.x,90)||0,H.y=a(-45,t-H.initial.y,45)||0,C.y=-H.x/90,C.x=-H.y/45};if(window.DeviceOrientationEvent&&"function"===typeof window.DeviceOrientationEvent.requestPermission){let e=document.createElement("button");e.id="gyroscope",e.addEventListener("click",()=>{DeviceOrientationEvent.requestPermission().then(t=>{"granted"===t&&window.addEventListener("deviceorientation",W),e.classList.add("hidden")}).catch(console.log)}),document.body.appendChild(e)}else window.addEventListener("deviceorientation",W);const D=new K;let G=+D.getHours(),N=e=>{e>=V[0]&&e<V[1]?(r.className="sunrise",z("sunrise")):e>=V[1]&&e<V[2]?(r.className="midday",z("midday")):e>=V[2]&&e<V[3]?(r.className="sunset",z("sunset")):(r.className="midnight",g.line.color.setHex(1118481),z("midnight"))};N(G);const _=P.windvane.vane;let F=.05,A=0,J=()=>{q=j.getDelta(),P.fans[0].rotate(5*q),P.fans[1].rotate(6*q),I.fans[0].rotate(-2*q),I.fans[1].rotate(-4*q),P.windvane.rotateFan(q),k[0].moveWaves(),k[1].moveWaves(),k[2].moveWaves(),b.fans[0].rotate(20*q),b.fans[1].rotate(21*q),b.fans[2].rotate(19*q),b.fans[3].rotate(22*q),b.cabine.turbines[0].rotate(.25*q),b.cabine.turbines[1].rotate(.25*q),b.mesh.position.y+=Math.sin(A*Math.PI),S.position.y+=Math.cos(A*Math.PI)/2,_.rotation.y+=Math.cos(A*Math.PI)*F/10,A+=.01,w.rotation.x+=(-C.y*(Math.PI/10)+Math.PI/4-w.rotation.x)*F,w.rotation.y+=(C.x*(Math.PI/8)-Math.PI/4-w.rotation.y)*F,y.render(w,l)},Z=null,Q=()=>{Z=requestAnimationFrame(Q),J()},$=()=>{Q()},ee=()=>{cancelAnimationFrame(Z)},te=new s["a"]({autoplace:!1,hideable:!1});te.closed=!0;const oe=document.getElementById("gui");oe.appendChild(te.domElement);let se={cameraControls:!0,isOverride:!1,sunrise:()=>N(7),midday:()=>N(11),sunset:()=>N(19),midnight:()=>N(0)},ne=te.addFolder("daytime");return ne.add(se,"sunrise"),ne.add(se,"midday"),ne.add(se,"sunset"),ne.add(se,"midnight"),ne.open(),{draw:J,start:$,stop:ee}};var $=Q;let ee=new URL(document.location).searchParams,te=parseInt(ee.get("dpi"))||window.devicePixelRatio,oe="false"!==ee.get("antialias"),{draw:se,start:ne,stop:ie}=$({dpi:te,antialias:oe}),ae=(()=>{try{return window.self!==window.top}catch(e){return!0}})();if(ae){document.body.classList.add("is-iframe"),se();let e=["http://localhost:8080","https://nextgtrgod.github.io"];window.addEventListener("message",t=>{if(e.includes(t.origin))switch(t.data){case"start":ne();break;case"stop":ie();break}})}else{ne();let e=!1,t=document.getElementById("gui");e&&t.classList.add("visible"),document.addEventListener("keyup",({keyCode:e})=>{72===e&&t.classList.toggle("visible")}),console.log("press h to show controls")}document.body.classList.add("loaded")},fb98:function(e,t,o){}});
//# sourceMappingURL=app.202e9505.js.map